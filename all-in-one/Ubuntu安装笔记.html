<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Ubuntu安装笔记</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
  <style type="text/css">html {scroll-behavior: smooth;}body {font-size: 1rem;line-height: 1.6;tab-size: 4;color: rgb(51, 51, 51);font-family: Microsoft YaHei,"Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;-webkit-font-smoothing: antialiased;position: relative;top: 0;left: 300px;width: calc(90% - 300px);padding: 2em 5%;}h1,h2,h3,h4,h5,h6 {position: relative;margin-top: 1rem;margin-bottom: 1rem;padding-bottom: 0;font-weight: bold;line-height: 1.4;cursor: text;}h1 {font-size: 2.25em;line-height: 1.2;border-bottom: 1px solid #eee;}h2 {font-size: 1.75em;line-height: 1.225;border-bottom: 1px solid #eee;}h3 {font-size: 1.5em;line-height: 1.43;}h4 {font-size: 1.25em;}h5 {font-size: 1em;}h6 {font-size: 1em;color: #777;}p,blockquote{ margin: 0.8em 0 !important; }ul,ol,dl,table{margin: 0.8em 0;}li>ol,li>ul {margin: 0 0;}a {color: #4183C4;text-decoration: none;}hr {height: 2px;padding: 0;margin: 16px 0;background-color: #e7e7e7;border: 0 none;overflow: hidden;box-sizing: content-box;}li p.first {display: inline-block;}ul,ol {padding-left: 20px;}ul:first-child,ol:first-child {margin-top: 0;}ul:last-child,ol:last-child {margin-bottom: 0;}blockquote {border-left: 4px solid #dfe2e5 !important;padding: 0 15px;color: #777777 !important;background-color: #ffffff !important;}blockquote blockquote {padding-right: 0;}table {padding: 0;word-break: initial;border-collapse: collapse;}table tr {border: 1px solid #dfe2e5;margin: 0;padding: 0;}table tr:nth-child(2n),thead {background-color: #f8f8f8;}table th {font-weight: normal;text-align: unset;border-bottom: 0;border: 1px solid #dfe2e5;margin: 0;padding: 6px 13px;}table td {border: 1px solid #dfe2e5;margin: 0;padding: 6px 13px;}table th:first-child,table td:first-child {margin-top: 0;}table th:last-child,table td:last-child {margin-bottom: 0;}tt {border: 1px solid #e7eaed;background-color: #f8f8f8;border-radius: 3px;padding: 2px 4px 0px 4px;font-size: 0.9em;}code {border: 1px solid #e7eaed;background-color: #f3f4f4;border-radius: 3px;padding: 0 2px 0 2px;font-size: 0.9em;}img {width: 50%;height: 50%;display: block;vertical-align: middle;image-orientation: from-image;margin: auto;}figcaption {text-align: center;}pre>code{counter-reset: linenumber;display: block;white-space: pre;overflow: auto !important;padding: 0.2em;border-radius: 7px;}pre>code>span {counter-increment: linenumber;display: inline-block;line-height: 1.25em !important;}pre>code>span::before {content: counter(linenumber);display: inline-block;font-size: 0.9em;color: #999;min-width: 1.8em;margin-right: 0.5em;padding-right: 0.25em;text-align: right;border-right: 1px solid #999;line-height: 1.9em;user-select: none;pointer-events: none;}#TOC {font-size: 0.8rem;position: fixed;top: 0;left: 0;width: 300px;height: 100%;padding: 32px 16px 48px 16px !important;box-shadow: 0 0 4px rgba(150,150,150,0.33);box-sizing: border-box;overflow: auto;scrollbar-color: #f5f5f5;scrollbar-width: 1px;}#TOC::-webkit-scrollbar{width: 1px;border-right: 1px solid #f5f5f5;}#TOC a{color: #333333;text-decoration: none;}#TOC a:hover{color: #333333 !important;text-decoration: underline !important;}#TOC ul { list-style: none; }#TOC li { margin-bottom: 0.25rem; }@media (max-width: 700px) {#TOC { display: none; }body { left: 0px; width: 90%; }}</style>
  <script type="text/javascript">
  window.onload = function(){
    document.querySelectorAll('a[href^="#"]').forEach(function(item,index,arr){
        item.addEventListener('click', function(e) {
            e.preventDefault();
            const target =  document.getElementById(decodeURI((item.href.substring(item.href.indexOf('#')+1))));
            if(target == null) { return; }
            target.scrollIntoView({ behavior: 'smooth' });
        });
    })
    const toc_a = document.querySelectorAll('#TOC a');
    function updateTOC(){
      const scrollPosition = window.scrollY;
      let highlightTarget;
      for(let i=toc_a.length-1; i>=0; i--){
        const target = document.getElementById(decodeURI((toc_a[i].href.substring(toc_a[i].href.indexOf('#')+1))));
        if(target == null) { continue; }
        const ItemPosition = target.offsetTop;
        if (scrollPosition > ItemPosition && typeof(highlightTarget) == "undefined") {
          highlightTarget = toc_a[i];
        } else if(typeof(highlightTarget) == "undefined" && i == 0) {
          highlightTarget = toc_a[0];
        }
      }
      toc_a.forEach( item => {
        item.style.fontWeight = "";
      });
      if(typeof(highlightTarget) == "undefined") { return; }
      highlightTarget.style.fontWeight = "bold";
    }
    let timer = null;
    window.addEventListener('scroll', () => {
      window.clearTimeout(timer);
      timer = window.setTimeout(() => { updateTOC() }, 200);
    });
  };
  </script>
  <base target="_blank">
</head>
<body>
<header id="title-block-header">
<h1 class="title">Ubuntu安装笔记</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#ubuntu18.04安装笔记" id="toc-ubuntu18.04安装笔记">Ubuntu18.04安装笔记</a>
<ul>
<li><a href="#硬盘安装" id="toc-硬盘安装">硬盘安装</a></li>
<li><a href="#修改源" id="toc-修改源">修改源</a></li>
<li><a href="#清理不常用软件" id="toc-清理不常用软件">清理不常用软件</a></li>
<li><a href="#安装常用软件" id="toc-安装常用软件">安装常用软件</a></li>
<li><a href="#创建桌面图标" id="toc-创建桌面图标">创建桌面图标</a></li>
<li><a href="#美化" id="toc-美化">美化</a></li>
<li><a href="#开发环境配置" id="toc-开发环境配置">开发环境配置</a>
<ul>
<li><a href="#java" id="toc-java">JAVA</a></li>
<li><a href="#node.js" id="toc-node.js">Node.js</a></li>
<li><a href="#python" id="toc-python">Python</a></li>
<li><a href="#php" id="toc-php">PHP</a></li>
<li><a href="#ruby" id="toc-ruby">Ruby</a></li>
</ul></li>
<li><a href="#系统配置" id="toc-系统配置">系统配置</a></li>
<li><a href="#其他软件" id="toc-其他软件">其他软件</a></li>
<li><a href="#常用命令" id="toc-常用命令">常用命令</a></li>
</ul></li>
<li><a href="#其他命令" id="toc-其他命令">其他命令</a>
<ul>
<li><a href="#windows常用命令" id="toc-windows常用命令">Windows常用命令</a></li>
<li><a href="#git常用命令" id="toc-git常用命令">git常用命令</a></li>
<li><a href="#ffmpeg常用命令" id="toc-ffmpeg常用命令">FFmpeg常用命令</a></li>
<li><a href="#pandoc常用命令" id="toc-pandoc常用命令">pandoc常用命令</a></li>
<li><a href="#adb常用命令" id="toc-adb常用命令">adb常用命令</a></li>
<li><a href="#js生成字符串md5" id="toc-js生成字符串md5">js生成字符串MD5</a></li>
</ul></li>
</ul>
</nav>
<h1 id="ubuntu18.04安装笔记">Ubuntu18.04安装笔记</h1>
<h2 id="硬盘安装">硬盘安装</h2>
<p>easyBCD=&gt;Add New Entry=&gt;NeoGrub=&gt;Install=&gt;Configure</p>
<pre><code>title Install Ubuntu
root (hd0,0)
kernel (hd0,0)/vmlinuz.efi boot=casper iso-scan/filename=/ubuntu.iso ro quiet splash locale=zh_CN.UTF-8
initrd (hd0,0)/initrd.lz</code></pre>
<p>把ubuntu.iso放到C盘，并解压其中的vmlinuz.efi及initrd.lz也放到C盘</p>
<p>如果启动后显示File not
found，可以试试把ISO文件名改短，或者把vmlinuz.efi改成vmlinuz，或者检查一下C盘是不是(hd0,0)</p>
<p>安装前要卸载挂载点</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> umount <span class="at">-l</span> /isodevice</span></code></pre></div>
<h2 id="修改源">修改源</h2>
<p>ubuntu
22.04及以下版本换源，22.04的代号是<code>jammy</code>，其他版本自行替换：</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 先备份原来的源</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp /etc/apt/sources.list /etc/apt/sources.list.backup</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改源</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /etc/apt/sources.list</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 把阿里云的源复制进去</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">deb</span> http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="ex">deb-src</span> http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="ex">deb</span> http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="ex">deb-src</span> http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="ex">deb</span> http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="ex">deb-src</span> http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="ex">deb</span> http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="ex">deb-src</span> http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span></code></pre></div>
<p>ubuntu
24.04版本换源，24.04的代号是<code>noble</code>，其他版本自行替换：</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 先备份原来的源</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp /etc/apt/sources.list /etc/apt/sources.list.backup</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改源</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /etc/apt/sources.list</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 把官方的源注释掉，再把清华的源复制进去</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Types:</span> deb</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="ex">URIs:</span> http://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Suites:</span> noble noble-updates noble-security</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Components:</span> main restricted universe multiverse</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="ex">Signed-By:</span> /usr/share/keyrings/ubuntu-archive-keyring.gpg</span></code></pre></div>
<h2 id="清理不常用软件">清理不常用软件</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get remove libreoffice-common gnome-sudoku aisleriot gnome-mahjongg gnome-mines deja-dup</span></code></pre></div>
<h2 id="安装常用软件">安装常用软件</h2>
<p>更新</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get upgrade</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get dist-upgrade</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-manager <span class="at">-c</span> <span class="at">-d</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="ex">do-release-upgrade</span></span></code></pre></div>
<p>驱动安装</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ubuntu-drivers</span> devices</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ubuntu-drivers autoinstall</span></code></pre></div>
<p>如果安装软件时提示缺失依赖，执行以下命令修复</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-f</span></span></code></pre></div>
<p>gedit</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install gedit</span></code></pre></div>
<p>压缩工具</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install unzip</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install unrar</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install p7zip-full</span></code></pre></div>
<p>图形化压缩软件</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install xarchiver</span></code></pre></div>
<p>下载工具</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-get</span> install axel</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:t-tujikawa/ppa </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install aria2</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /usr/local/bin/Aria2c</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># (粘贴)</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="ex">aria2c</span> <span class="at">--enable-rpc</span> <span class="at">--rpc-listen-all</span> <span class="at">--rpc-allow-origin-all</span>  <span class="at">--file-allocation</span><span class="op">=</span>none <span class="at">--max-connection-per-server</span><span class="op">=</span>3 <span class="at">--max-concurrent-downloads</span><span class="op">=</span>5 <span class="at">--continue</span> <span class="at">-d</span> ~/Downloads/</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod +x /usr/local/bin/Aria2c</span></code></pre></div>
<p>zsh</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install zsh</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 下载 oh-my-zsh 项目来帮我们配置 zsh</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh <span class="at">-O</span> <span class="at">-</span> <span class="kw">|</span> <span class="fu">sh</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 或</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">chsh</span> <span class="at">-s</span> /bin/zsh</span></code></pre></div>
<h2 id="创建桌面图标">创建桌面图标</h2>
<p>新建文件<code>XXX.desktop</code>，内容如下</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[Desktop Entry]</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Version</span><span class="ot">=</span><span class="fl">1.0</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Type</span><span class="ot">=</span><span class="st">Application</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="dt">Name</span><span class="ot">=</span><span class="st">XXX</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="dt">Icon</span><span class="ot">=</span><span class="st">/usr/local/xxx.png</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="dt">Exec</span><span class="ot">=</span><span class="st">/usr/local/xxx</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="dt">Comment</span><span class="ot">=</span><span class="st">XXX</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="dt">Categories</span><span class="ot">=</span><span class="st">TextEditor;Development;Math;Science</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="dt">Terminal</span><span class="ot">=</span><span class="kw">false</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="dt">StartupNotify</span><span class="ot">=</span><span class="kw">true</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="dt">MimeType</span><span class="ot">=</span><span class="st">text/markdown;text/x-matlab</span></span></code></pre></div>
<p>最后<code>sudo mv XXX.desktop /usr/share/applications</code>或者<code>mv /home/xxx/.local/share/applications</code></p>
<h2 id="美化">美化</h2>
<p>Albert Spotlight</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:noobslab/macbuntu</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install albert</span></code></pre></div>
<p>gnome-tweak-tool</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install gnome-tweak-tool</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install gnome-tweaks</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Ubuntu可能已经自带gnome-shell</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install gnome-shell</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install chrome-gnome-shell</span></code></pre></div>
<p>安装<a href="https://extensions.gnome.org"><code>gnome插件</code></a></p>
<p>推荐的插件:<a href="https://extensions.gnome.org/extension/1031/topicons/">TopIcons
Plus</a>、<a href="https://extensions.gnome.org/extension/104/netspeed/">NetSpeed</a>、<a href="https://extensions.gnome.org/extension/307/dash-to-dock/">Dash to
Dock</a> (https://micheleg.github.io/dash-to-dock/download.html)</p>
<p>部分插件可以解压后直接放到<code>~/.local/share/gnome-shell/extensions/</code>下，然后按<code>Alt+F2 r Enter</code>重启gnome生效，如果没有生效，可以通过<code>dconf</code>把文件夹名加到<code>/org/gnome/shell/enabled-extensions</code>的key中</p>
<p>安装<a href="https://www.gnome-look.org"><code>gnome主题</code></a></p>
<p>推荐的主题:<a href="https://www.gnome-look.org/p/1275087">McMojave</a>、<a href="https://www.gnome-look.org/p/1180016/">T4G-Shell-theme III</a></p>
<p>推荐的图标:<a href="https://www.gnome-look.org/p/1340791">Reversal
icon theme</a>、<a href="https://www.gnome-look.org/p/1210856">Mojave CT
icons</a></p>
<p>安装<code>gnome-shell</code>主题前要先安装<a href="https://extensions.gnome.org/extension/19/user-themes/">User
Themes插件</a>，或者把主题放到<code>/usr/share/themes</code>，图标放到<code>/usr/share/icons</code></p>
<p>更改<code>Grub主题</code>，推荐<a href="https://www.opendesktop.org/s/Gnome/p/1009236/">Grub-theme-vimix</a></p>
<p>安装Grub主题前要先安装<code>Grub2</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install grub2</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装默认主题</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install grub2-themes-ubuntu-mate</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 下载主题，将主题文件夹者复制到 /boot/grub/themes/</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 然后执行(文件夹也有可能是/etc/default/grub2)</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /etc/default/grub</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 找到GRUB_THEME，改为</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="va">GRUB_THEME</span><span class="op">=</span>/boot/grub/themes/my-theme/theme.txt</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 再把GRUB_HIDDEN_TIMEOUT=0注释掉</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 更新grub</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-grub</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 没有update-grub命令的可以执行</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> grub-mkconfig <span class="at">-o</span> /boot/grub/grub.cfg</span></code></pre></div>
<p><strong>安装Plymouth开机动画</strong>，推荐<a href="https://www.gnome-look.org/p/1009456/">Ubunut Spinner Logo
Plymouth</a></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 把开机动画放到plymouth目录下</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv ./my-theme /usr/share/plymouth/themes/</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改默认开机动画</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-sf</span> /usr/share/plymouth/themes/my-theme/my-theme.plymouth /etc/alternatives/default.plymouth</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者用update-alternatives安装</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/share/plymouth/themes/default.plymouth default.plymouth /usr/share/plymouth/themes/mytheme/mytheme.plymouth 100</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 选择要用的开机动画</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--config</span> default.plymouth</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 更新内核</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-initramfs <span class="at">-u</span></span></code></pre></div>
<p><strong>修改启动页背景</strong>（Ubuntu18.04及以前）</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp pic.png /usr/share/backgrounds/</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /etc/alternatives/gdm3.css</span></code></pre></div>
<p>把</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#lockDialogGroup</span> {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background</span><span class="ch">:</span> <span class="cn">#2c001e</span> <span class="fu">url(</span><span class="st">resource:///org/gnome/shell/theme/noise-texture.png</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-repeat</span><span class="ch">:</span> <span class="dv">repeat</span><span class="op">;</span> }</span></code></pre></div>
<p>改为</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#lockDialogGroup</span> {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background</span><span class="ch">:</span> <span class="cn">#2c001e</span> <span class="fu">url(</span><span class="st">file:///usr/share/backgrounds/pic.png</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-repeat</span><span class="ch">:</span> <span class="dv">no-repeat</span><span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-size</span><span class="ch">:</span> <span class="dv">cover</span><span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-position</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span> }</span></code></pre></div>
<p><strong>Ubuntu20.04的更改方法</strong></p>
<p>https://github.com/thiggy01/change-gdm-background</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#添加执行权限</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 777 change-gdm-background</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#运行脚本，设置壁纸路径(/path/to/image)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ./change-gdm-background /path/to/image</span></code></pre></div>
<p>或者 https://github.com/PRATAP-KUMAR/ubuntu-gdm-set-background</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装依赖</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install libglib2.0-dev-bin <span class="at">-y</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#运行脚本</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ubuntu-gdm-set-background <span class="at">--image</span> /path/to/image</span></code></pre></div>
<p><strong>Ubuntu22.04及以上的更改方法</strong></p>
<p>22.04及以上需使用gnome插件，且卸载插件后效果会消失:
https://github.com/PRATAP-KUMAR/gdm-extension</p>
<h2 id="开发环境配置">开发环境配置</h2>
<h3 id="java">JAVA</h3>
<p>方法1：通过apt安装</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:webupd8team/java</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get install oracle-java9-installer</span></code></pre></div>
<p>方法2：建立符号链接（通过<code>update-alternatives --install link name path priority</code>命令，删除就<code>update-alternatives --remove name path</code>）</p>
<p>下载JDK压缩包（<a href="https://www.oracle.com/java/technologies/downloads/">Oracle
JDK</a>、<a href="https://jdk.java.net/archive/">OpenJDK</a>），解压并复制到/usr/lib/jvm后，然后执行</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/java java /usr/lib/jvm/jdk-22.0.2/bin/java 300</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/javac javac /usr/lib/jvm/jdk-22.0.2/bin/javac 300</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/jar jar /usr/lib/jvm/jdk-22.0.2/bin/jar 300</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/javap javap /usr/lib/jvm/jdk-22.0.2/bin/javap 300</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置默认jdk</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--config</span> java</span></code></pre></div>
<p>方法3：添加环境变量</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir /usr/local/java</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 解压并复制jdk进去</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> ./jdk-22.0.2</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xzvf</span> openjdk-22.0.2_linux-x64_bin.tar.gz ./jdk-22.0.2</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cp <span class="at">-a</span> ./jdk /usr/local/java/</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /etc/profile</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 在最后加上</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="va">JAVA_HOME</span><span class="op">=</span>/usr/local/java/jdk-22.0.2</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="va">CLASSPATH</span><span class="op">=</span><span class="va">$JAVA_HOME</span>/lib/</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="va">PATH</span><span class="op">=</span><span class="va">$PATH</span>:<span class="va">$JAVA_HOME</span>/bin</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span> <span class="va">JAVA_HOME</span> <span class="va">CLASSPATH</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 重启后生效，或者输入以下命令在当前命令行生效</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> /etc/profile</span></code></pre></div>
<h3 id="node.js">Node.js</h3>
<p>方法一：通过apt安装</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install nodejs</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看node、npm版本确认是否安装成功</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> <span class="at">-v</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> <span class="at">-v</span></span></code></pre></div>
<p>方法二：建立软链接</p>
<p><a href="https://nodejs.org/dist/">下载安装包</a>，解压，然后执行</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> /opt/node/</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> ./node-v20.9.0-linux-x64.tar.gz/<span class="pp">*</span> /opt/node/</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 如果之前已经建立了软链接，则先删掉</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-f</span> /usr/local/bin/node</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-f</span> /usr/local/bin/npm</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 然后建立软链接</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-s</span> /opt/node/bin/node /usr/local/bin/node</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-s</span> /opt/node/bin/npm /usr/local/bin/npm</span></code></pre></div>
<p>换源</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看当前的源，没改过就应该是官方源 https://registry.npmjs.org/</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> config get registry</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 临时换源，每条命令都要加 --registry &lt;URL&gt;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> <span class="at">--registry</span> <span class="op">&lt;</span>URL<span class="op">&gt;</span> install xxx</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 永久换源，要恢复就改回官方的URL</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> config set registry <span class="op">&lt;</span>URL<span class="op">&gt;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 也可以使用nrm来管理源</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> i <span class="at">-g</span> nrm</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 列出所有可用的源</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="ex">nrm</span> ls</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用指定的源</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="ex">nrm</span> use <span class="op">&lt;</span>source_name<span class="op">&gt;</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 自定义源名称和地址</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="ex">nrm</span> add <span class="op">&lt;</span>source_name<span class="op">&gt;</span> <span class="op">&lt;</span>URL<span class="op">&gt;</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 删除自定义源</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="ex">nrm</span> del <span class="op">&lt;</span>source_name<span class="op">&gt;</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 测试速度</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="ex">nrm</span> test <span class="op">&lt;</span>source_name<span class="op">&gt;</span></span></code></pre></div>
<p>更新Node.js和npm的版本</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 通过版本管理工具n升级，这样会同时更新Node.js和npm</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> npm install n <span class="at">-g</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看是否安装成功</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="ex">n</span> <span class="at">-V</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># n的命令如下</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> n 20.9.0 <span class="co">#升级到指定版本</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> n latest <span class="co">#升级到最新版本</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> n lts <span class="co">#升级到长期支持版本</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> n stable <span class="co">#升级到最新的稳定版本</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 也可以只升级npm</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> npm install npm <span class="at">-g</span></span></code></pre></div>
<p>清除缓存、模块等常用命令</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 清除npm缓存</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> cache clean <span class="at">-f</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 列出所有全局顶级模块</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> ls <span class="at">-gp</span> <span class="at">--depth</span><span class="op">=</span>0</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 清除所有全局模块（列出所有顶级模块后，排除以“/npm”结尾的npm本身的所有模块，然后执行删除）</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> ls <span class="at">-gp</span> <span class="at">--depth</span><span class="op">=</span>0 <span class="kw">|</span> <span class="fu">awk</span> <span class="at">-F</span>/ <span class="st">&#39;/node_modules/ &amp;&amp; !/\/npm$/ {print $NF}&#39;</span> <span class="kw">|</span> <span class="fu">sudo</span> xargs npm <span class="at">-g</span> rm</span></code></pre></div>
<h3 id="python">Python</h3>
<p>Linux编译安装指定版本的Python</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 解压</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> tar <span class="at">-zxvf</span> Python-3.10.11.tgz <span class="at">-C</span> .<span class="dt">\</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>cd Python-3.10.11</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 通过&quot;--prefix=&quot;指定python安装的位置</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span>/usr/local/python3.10.11</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 编译安装</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> make</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> make test</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> make install</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 如果报错，可能是编译环境没配好，尝试安装以下依赖</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install zlib1g-dev libbz2-dev libssl-dev libncurses5-dev libsqlite3-dev libreadline-dev tk-dev libgdbm-dev libdb-dev libpcap-dev xz-utils libexpat1-dev liblzma-dev libffi-dev libc6-dev</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 更新python默认指向</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法一</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 先查看目前系统默认的python</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> /usr/bin <span class="kw">|</span> <span class="fu">grep</span> python</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 手动建立python符号链接</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv /usr/bin/python /usr/bin/python.bak</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv /usr/bin/python3 /usr/bin/python3.bak</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/local/python3.10.11/bin/python3.10 /usr/bin/python</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/local/python3.10.11/bin/python3.10 /usr/bin/python3</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 手动建立pip符号链接</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv /usr/bin/pip /usr/bin/pip.bak</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv /usr/bin/pip3 /usr/bin/pip3.bak</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/local/python3.10.11/bin/pip3 /usr/bin/pip</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/local/python3.10.11/bin/pip3 /usr/bin/pip3</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法二</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 先查看系统目前已配置的可用python版本</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--list</span> python</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 先为各版本创建符号链接（未安装的版本跳过），这里假设python安装在默认位置</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="co"># （在自动模式下，最后的数字越大，优先级越高，不过我们这里会指定默认python版本，所以数字无所谓）</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/python python /usr/bin/python3.9 1</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/python python /usr/bin/python3.10 2</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/python python /usr/bin/python3.11 3</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a><span class="co"># pip同理，不过pip一般使用最高版本就可以兼容大部分情况</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/pip pip /usr/bin/pip3.10 300</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--install</span> /usr/bin/pip3 pip3 /usr/bin/pip3.10 300</span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a><span class="co"># 选择默认指向</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--config</span> python</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 对于不再使用的版本，可以移除</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a><span class="ex">update-alternatives</span> <span class="at">--remove</span> python /usr/bin/python2.7</span></code></pre></div>
<p>pip2和pip3</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install python-pip python-dev build-essential</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> pip install <span class="at">--upgrade</span> pip</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install python3-pip</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> pip3 install <span class="at">--upgrade</span> pip</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者使用python自带的工具安装pip</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> ensurepip <span class="at">--upgrade</span></span></code></pre></div>
<p><strong>便携版python安装</strong>（Windows）</p>
<p>下载embeddable版的<a href="https://www.python.org/downloads">python</a>，该版本是便携版，不带pip，所以还要安装pip：</p>
<p>1、解压后进入python目录，检查python版本<code>python --version</code></p>
<p>2、安装pip（<a href="https://pip.pypa.io/en/stable/installation/">参考</a>）：</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> https://bootstrap.pypa.io/get-pip.py <span class="at">-o</span> get-pip.py</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> get-pip.py</span></code></pre></div>
<p>3、便携版的python需找到<code>python3x._pth</code>（x是版本号），把<code>import site</code>前面的<code>#</code>删掉，才能自动识别pip</p>
<p>4、如果pip还是不能运行，在<code>python3x._pth</code>最后加上一行<code>Lib/site-packages</code></p>
<p>注意：便携版的python在使用pip的时候最好不要直接使用<code>pip</code>，而是使用<code>python -m pip</code>调用。</p>
<p>注意：如果后续移动了python文件夹的位置，<code>python\Scripts</code>目录下的可执行文件无法直接使用，需要指定<code>python.exe</code>，比如<code>&quot;.\python\python.exe&quot; &quot;.\python\Scripts\libretranslate.exe&quot; --host 127.0.0.1 --port 5000</code>.</p>
<p><strong>常用命令</strong></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pip临时换源，每条命令都要加 -i &lt;URL&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="op">&lt;</span>module_name<span class="op">&gt;</span> -i <span class="op">&lt;</span>URL<span class="op">&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pip永久换源，并删除缓存</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip config set global.index-url <span class="op">&lt;</span>URL<span class="op">&gt;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip cache purge</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 换回默认源</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip config unset global.index-url</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 一些源的地址</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># https://mirrors.aliyun.com/pypi/simple/</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co"># https://pypi.mirrors.ustc.edu.cn/simple/</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 如果换源后警告，添加信任即可</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="op">&lt;</span>module_name<span class="op">&gt;</span> --trusted-host pypi.tuna.tsinghua.edu.cn</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co"># pip更新</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="at">--upgrade</span> pip</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装模块</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="op">&lt;</span>module_name<span class="op">&gt;</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 也可以用源码安装，即包含setup.py的文件夹或者tar.gz压缩包</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="st">&quot;/path/to/project_folder&quot;</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 更新单个模块</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="at">--upgrade</span> <span class="op">&lt;</span>module_name<span class="op">&gt;</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 更新所有模块方法一：利用requirements.txt</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt <span class="co">#然后将requirements.txt中的 == 替换成 &gt;= ，再执行更新</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="at">-r</span> requirements.txt <span class="at">--upgrade</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 更新所有模块方法二：使用pip-review模块</span></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install pip-review</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip-review <span class="at">--local</span> <span class="at">--interactive</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 列出已安装的模块</span></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip list</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 卸载模块</span></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip uninstall <span class="op">&lt;</span>module_name<span class="op">&gt;</span></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装虚拟环境模块，默认python3是内置venv的，便携版python3或python2则需安装virtualenv模块，对应的创建环境命令也需更改</span></span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="at">--upgrade</span> virtualenv</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建虚拟环境，使得项目使用的模块可以单独存在，不影响全局的模块</span></span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a><span class="co"># 默认虚拟环境中的模块都需要显式安装才可用，如果想在该虚拟环境中使用系统已安装的模块则需指定--system-site-packages</span></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a><span class="co"># 该命令会创建DIRECTORY目录，并生成pyvenv.cfg文件、Lib及Scripts文件夹（Linux下为bin文件夹），里面包含符号链接</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> venv <span class="op">&lt;</span>path/to/DIRECTORY<span class="op">&gt;</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> virtualenv <span class="op">&lt;</span>path/to/DIRECTORY<span class="op">&gt;</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Windows激活虚拟环境</span></span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span><span class="dt">\D</span>IRECTORY<span class="dt">\S</span>cripts<span class="dt">\a</span>ctivate</span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Linux激活虚拟环境</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ./DIRECTORY/bin/activate</span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a><span class="co"># 取消激活虚拟环境</span></span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a><span class="ex">deactivate</span></span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 要删除虚拟环境则删除整个目录即可</span></span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-rf</span> DIRECTORY</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 导出项目所需模块列表</span></span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a><span class="co"># 一键安装项目所需的模块，一般目录下会有一个requirements.txt文件</span></span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="at">-r</span> requirements.txt</span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查模块是否已经安装</span></span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip check <span class="at">-r</span> requirements.txt</span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a><span class="co"># 一键卸载第三方模块，原理是先导出requirements.txt，再根据requirements.txt卸载，不过会把pip也卸载掉，需重新安装pip</span></span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip uninstall <span class="at">-r</span> requirements.txt <span class="at">-y</span></span></code></pre></div>
<p>在联网环境下下载<code>whl</code>文件，以便离线安装模块：</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 下载whl文件，platform一般是linux_x86_64、win_amd64、macosx_10_9_x86_64等</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip download <span class="op">&lt;</span>package_name<span class="op">&gt;</span> --only-binary=:all: <span class="at">--wheel</span> <span class="at">--platform</span> <span class="op">&lt;</span>platform<span class="op">&gt;</span> --python-version <span class="op">&lt;</span>python_version<span class="op">&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 比如</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip download numpy <span class="at">--only-binary</span><span class="op">=</span>:all: <span class="at">--wheel</span> <span class="at">--platform</span> win_amd64 <span class="at">--python-version</span> 311</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 离线环境安装whl，需指定禁止查询在线索引（--no-index）以及在当前目录下查找whl文件进行安装（--find-links）</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="at">--no-index</span> <span class="at">--find-links</span><span class="op">=</span><span class="st">&quot;/path/to/packages&quot;</span> <span class="op">&lt;</span>package_name.whl<span class="op">&gt;</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据requestments.txt批量下载whl到文件夹，默认只会下载当前platform下的包，且如果安装环境下的pip版本过低可能会报错</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip download <span class="at">-r</span> requestments.txt <span class="at">-d</span> ./pip_packages</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 离线安装requestments.txt中的包</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="at">--no-index</span> <span class="at">--find-links</span><span class="op">=</span>./pip_packages <span class="at">-r</span> requirements.txt </span></code></pre></div>
<h3 id="php">PHP</h3>
<p>LAMP</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:ondrej/php</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install apache2</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> status apache2    <span class="co"># 检查apache2是否启动</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/init.d/apache2</span> start</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/init.d/apache2</span> stop</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/init.d/apache2</span> restart</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install mysql-server mysql-client libmysqlclient-dev</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> netstat <span class="at">-tap</span> <span class="kw">|</span> <span class="fu">grep</span> mysql  <span class="co"># 检查mysql是否安装成功</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /etc/mysql/debian.cnf    <span class="co"># 查看mysql默认用户名密码</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-u</span> debian-sys-maint <span class="at">-p</span>    <span class="co"># 登录mysql</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="ex">update</span> mysql.user set authentication_string=password<span class="er">(</span><span class="st">&#39;password&#39;</span><span class="kw">)</span> <span class="ex">where</span> user=<span class="st">&#39;debian-sys-maint&#39;</span>and Host = <span class="st">&#39;localhost&#39;</span><span class="kw">;</span>   <span class="co"># 更改密码</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="ex">update</span> mysql.user set user=<span class="st">&quot;user&quot;</span> where user=<span class="st">&quot;debian-sys-maint&quot;</span><span class="kw">;</span>    <span class="co"># 更改用户名</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="ex">flush</span> privileges<span class="kw">;</span>   <span class="co"># 刷新权限</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install mariadb-server-10.0 mariadb-client-10.0</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mysql_secure_installation  <span class="co"># 配置Mariadb</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install php7.2</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install php7.2-mysql libapache2-mod-php7.2 php7.2-curl php7.2-json php7.2-cgi</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> service mysql restart</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> service apache2 restart</span></code></pre></div>
<h3 id="ruby">Ruby</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install curl ruby</span></code></pre></div>
<h2 id="系统配置">系统配置</h2>
<p>禁用guest</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /usr/share/lightdm/lightdm.conf.d/50-no-guest.conf</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (粘贴)</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[SeatDefaults]</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="ex">allow-guest=false</span></span></code></pre></div>
<p>关闭错误报告</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> rm /var/crash/<span class="pp">*</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /etc/default/apport</span></code></pre></div>
<p>调节亮度</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gedit /sys/class/backlight/intel_backlight/brightness</span></code></pre></div>
<p>CA证书安装位置：<code>/usr/local/share/ca-certificates/</code></p>
<h2 id="其他软件">其他软件</h2>
<p>使用flatpak应用框架:
https://flatpak.org/setup/Ubuntu、https://flathub.org</p>
<p>firefox:
https://support.mozilla.org/en-US/kb/install-firefox-linux</p>
<p>Chrome: https://www.google.cn/intl/en_uk/chrome/</p>
<p>sougou输入法: http://pinyin.sogou.com/linux/</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 装完再安装依赖</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-f</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 若无法显示界面，尝试安装以下依赖</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install libqt5qml5 libqt5quick5 libqt5quickwidgets5 qml-module-qtquick2</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install libgsettings-qt1</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 若还是不能运行，尝试卸载ibus</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt purge ibus</span></code></pre></div>
<p><a href="https://www.wps.com/office/linux/">WPS</a></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install wps-office</span></code></pre></div>
<p>解决字体缺失、在Ubuntu22.04上无法打开等问题</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 解决字体缺失</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 先下载字体文件wps-symbol-fonts.zip，解压到/usr/share/fonts/wps-office/或/home/xxx/.local/share/fonts/wps-office</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkfontscale</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkfontdir</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> fc-cache</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 解决在Ubuntu22.04上无法打开</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 给WPS的安装目录设置777的权限</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 0777 <span class="at">-R</span>  /opt/kingsoft/wps-office</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 删除之前WPS的安装设置</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-rf</span>  ~/.config/Kingsoft/</span></code></pre></div>
<p>VLC: http://www.videolan.org</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> snap install vlc</span></code></pre></div>
<p>Haroopad: http://pad.haroopress.com/user.html</p>
<p>VSCode: https://code.visualstudio.com/</p>
<p>GIMP</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install gimp</span></code></pre></div>
<p>shutter</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:shutter/ppa</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get install shutter</span></code></pre></div>
<p>octave</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install octave</span></code></pre></div>
<p>BleachBit: http://www.bleachbit.org/download/linux</p>
<p>VirtualBox: https://www.virtualbox.org</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install virtualbox virtualbox-ext-pack virtualbox-guest-additions-iso</span></code></pre></div>
<p>Veracrypt: https://www.veracrypt.fr/en/Downloads.html</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 若不能运行，尝试安装libfuse2</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install libfuse2</span></code></pre></div>
<p>AndroidStudio: https://developer.android.google.cn/studio</p>
<p>Genymotion: https://www.genymotion.com</p>
<p>jMonkeyEngine: https://github.com/jMonkeyEngine/jmonkeyengine</p>
<p>Wudao-dict: https://github.com/ChestnutHeng/Wudao-dict</p>
<p>indicator-sysmonitor:
https://github.com/fossfreedom/indicator-sysmonitor</p>
<p>Katoolin: https://github.com/LionSec/katoolin</p>
<p>FileZilla: https://filezilla-project.org</p>
<p>Wine: https://wiki.winehq.org/Ubuntu</p>
<p>Pandoc: http://pandoc.org/installing.html#linux</p>
<p>FFmpeg: https://ffmpeg.org/download.html</p>
<p>Mathematica: http://www.wolfram.com/mathematica/</p>
<p>Netease Cloud Music: http://music.163.com/#/download</p>
<h2 id="常用命令">常用命令</h2>
<p>命令行环境变量设置</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看当前环境变量</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printenv</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 临时设置环境变量</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">VARIABLE_NAME</span><span class="op">=</span><span class="st">&quot;value&quot;</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 临时追加环境变量，以PATH为例</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$PATH</span><span class="st">:/new/directory/path&quot;</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 为当前用户永久设置环境变量，一般会根据不同系统把环境变量放在.bashrc、.profile或.bash_profile文件中</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;export VARIABLE_NAME=&quot;value&quot;&#39;</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 同理，对所有用户，环境变量一般放在/etc/profile或/etc/environment文件中</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> echo <span class="st">&#39;export VARIABLE_NAME=&quot;value&quot;&#39;</span> <span class="op">&gt;&gt;</span> /etc/profile</span></code></pre></div>
<p>解决ubuntu与windows的时差</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">timedatectl</span> set-local-rtc 1 <span class="at">--adjust-system-clock</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> hwclock <span class="at">--localtime</span> <span class="at">--systohc</span></span></code></pre></div>
<p>用户组管理，以安装Android Studio硬件加速(KVM)为例</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 检测是否支持kvm</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kvm-ok</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装kvm</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install qemu-kvm libvirt-bin ubuntu-vm-builder bridge-utils</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 将当前用户添加到KVM组和libvirtd组</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> adduser myusername kvm</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> adduser myusername libvirt-qemu</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 卸载</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看用户/用户组</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cat /etc/shadow</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cat /etc/group</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 如果要把用户从用户组中移除</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gpasswd <span class="at">-d</span> myusername kvm</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gpasswd <span class="at">-d</span> myusername libvirt-qemu</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 删除用户组</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> groupdel kvm</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> groupdel libvirt-qemu</span></code></pre></div>
<p>修复Ubuntu无法访问Windows磁盘分区</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install ntfs-3g</span></code></pre></div>
<p>让gedit显示GB2312</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install dconf-tools</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="ex">dconf-editor</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 依次点开-&gt;org-&gt;gnome-&gt;gedit-&gt;preferences-&gt;encodings，把Custom value改成</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># [&#39;UTF-8&#39;, &#39;GB18030&#39;, &#39;GB2312&#39;, &#39;GBK&#39;, &#39;BIG5&#39;, &#39;CURRENT&#39;, &#39;UTF-16&#39;]</span></span></code></pre></div>
<p>解压/压缩命令</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="ex">7z</span> x file file</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-jxvf</span> file.tar.bz2</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-zxvf</span> file.tar</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="ex">7za</span> a <span class="at">-t7z</span> <span class="at">-r</span> test.7z ~/tozip/<span class="pp">*</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> zcvf test.tar.gz ~/tozip/<span class="pp">*</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> jcvf test.tar.bz2 ~/tozip/<span class="pp">*</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> <span class="at">-O</span> cp936 test.zip <span class="co"># 解决乱码问题</span></span></code></pre></div>
<p>清理内核</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">uname</span> <span class="at">-a</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dpkg <span class="at">--get-selections</span> <span class="kw">|</span><span class="fu">grep</span> linux</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get purge linux-headers-x.x.x-xx linux-image-x.x.x-xx-generic</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-grub</span></code></pre></div>
<p>修复引导</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-i</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="ex">add-apt-repository</span> ppa:yannubuntu/boot-repair</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-get</span> update</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-get</span> install <span class="at">-y</span> boot-repair</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="ex">boot-repair</span></span></code></pre></div>
<p>用<code>grep</code>查找字符串</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 在当前目录下的所有文件的内容中查找字符串str（其中 -r 是递归查找， -n 是显示行号）</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-rn</span> <span class="st">&quot;str&quot;</span> ./</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 查找文件名包含指定字符串</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> . <span class="at">-name</span> <span class="st">&#39;str&#39;</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 也可以结合起来用</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> ./ <span class="at">-name</span> <span class="st">&quot;*.*&quot;</span> <span class="kw">|</span> <span class="fu">xargs</span> grep <span class="st">&quot;Hello&quot;</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者（其中 -l 表示只显示文件名）</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> . <span class="kw">|</span> <span class="fu">xargs</span> grep <span class="at">-ri</span> <span class="st">&quot;Hello&quot;</span> <span class="at">-l</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 如果不知道文件所在的大致目录，只知道文件的类型（比如.txt），可以在根目录（/）下查找</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> / <span class="at">-type</span> f <span class="at">-name</span> <span class="st">&quot;*.txt&quot;</span> <span class="kw">|</span> <span class="fu">xargs</span> grep <span class="st">&quot;Hello&quot;</span></span></code></pre></div>
<p>查看、清理进程</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> <span class="at">-aux</span> <span class="kw">|</span> <span class="fu">grep</span> XXX</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="bu">kill</span> <span class="at">-9</span> PID</span></code></pre></div>
<p>网卡开启monitor模式</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="ex">iwconfig</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="ex">iwconfig</span> wlan0 mode monitor</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="ex">airodump-ng</span> wlan0</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="ex">iwconfig</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="ex">airmon-ng</span> start wlan0</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="ex">iwconfig</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="ex">airodump-ng</span> mon0</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="ex">airodump-ng</span> <span class="at">-d</span> BSSID_address <span class="at">--channel</span> 11 <span class="at">-w</span> outputfile mon0</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="ex">airmon-ng</span> stop wlan0</span></code></pre></div>
<h1 id="其他命令">其他命令</h1>
<h2 id="windows常用命令">Windows常用命令</h2>
<p>安装win10以上的系统时，强制要求联网并登录账号，在联网界面，可以按Shift+F10调出命令行，然后执行<code>oobe\bypassnro</code>，重启后会出现没有网络的选项。</p>
<p>Windows
Defender保护历史记录路径在<code>C:\ProgramData\Microsoft\Windows Defender\Scans\History\Service\DetectionHistory</code>，删除该文件夹下的所有文件即可删除记录。</p>
<p><strong>diskpart命令</strong>：想要知道分卷的编号，先用cmd执行<code>diskpart</code>进入新的命令行窗口，然后执行：</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 列出所选磁盘的分卷</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>list disk</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span> disk n <span class="co"># n为要选择的磁盘编号</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>list partition</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者显示所有分卷，但是有的隐藏分卷不会被列出来（随便选择一个磁盘后才能使用）</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>list volume</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 还可以给分卷分配盘符</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span> partition n <span class="co"># n为要选择的分卷编号</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>assign letter<span class="op">=</span>D</span></code></pre></div>
<p><strong>bcdedit命令</strong>：</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 列出所有的BCD启动项</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>enum <span class="co"># 或者不指定参数，直接使用bcdedit也可以列出</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置默认引导项</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>default <span class="op">{</span>identifier<span class="op">}</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置超时时间（单位为秒）</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>timeout <span class="dv">10</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建引导项，一般会在创建时用“/d”指定描述</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>create <span class="op">/</span>d <span class="st">&quot;new_system&quot;</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 更改引导项的参数，比如描述（即菜单上显示的名字）、磁盘分卷等</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span><span class="fu">set</span> <span class="op">{</span>identifier<span class="op">}</span> description <span class="st">&quot;new description&quot;</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span><span class="fu">set</span> <span class="op">{</span>identifier<span class="op">}</span> osdevice partition<span class="op">=</span>\Device\HarddiskVolume2</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 用Grub引导Windows，其中&quot;{bootmgr}&quot;是Boot Manager的标识符</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co">#（{bootmgr}中Windows默认的引导路径是 \EFI\Microsoft\Boot\bootmgfw.efi，Ubuntu默认的引导路径是 \EFI\ubuntu\grubx64.efi）</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="co">#（BCD菜单中默认Windows的引导路径是\Windows\system32\winload.efi）</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span><span class="fu">set</span> <span class="op">{</span>bootmgr<span class="op">}</span> path \EFI\ubuntu\grubx64<span class="op">.</span><span class="fu">efi</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span><span class="fu">set</span> <span class="op">{</span>identifier<span class="op">}</span> path \Windows\system32\winload<span class="op">.</span><span class="fu">efi</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 更简单的创建方法是复制现有的配置再更改，其中“{current}”是指当前系统的引导项</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span><span class="fu">copy</span> <span class="op">{</span>current<span class="op">}</span> <span class="op">/</span>d <span class="st">&quot;new_system&quot;</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 用“/create”创建的引导项不会出现在BCD菜单中，需通过“/displayorder”指定顺序才会显示</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>displayorder <span class="op">{</span>identifier1<span class="op">}</span> <span class="op">{</span>identifier2<span class="op">}</span> <span class="op">...</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 在最后面添加引导项</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>displayorder <span class="op">{</span>identifier<span class="op">}</span> <span class="op">/</span>addlast</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 删除引导项</span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>delete <span class="op">{</span>identifier<span class="op">}</span></span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 备份BCD</span></span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>export c<span class="op">:</span>\bcdbak</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 恢复BCD</span></span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span>import c<span class="op">:</span>\bcdbak</span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 禁用驱动签名，有时候驱动有问题无法开机可以试试</span></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a>bcdedit <span class="op">/</span><span class="fu">set</span> nointegritychecks on</span></code></pre></div>
<p>注意：bcdedit无法识别不同硬盘，只能识别不同分卷，要引导另一个硬盘上的分卷，就根据disk0、disk1等，按顺序执行<code>diskpart</code>的<code>list partition</code>命令，然后顺延volume编号，得到<code>\Device\HarddiskVolume</code>的号码，再设置<code>osdevice partition=xxx</code>；比如disk0有两个volume，disk1中第一个volume是另一个系统，那么就是<code>\Device\HarddiskVolume3</code>，依此类推。</p>
<p><strong>bcdboot命令</strong>：</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>C<span class="op">:</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cd</span> C<span class="op">:</span>\Windows\System32</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>bcdboot C<span class="op">:</span>\Windows <span class="op">/</span>addlast <span class="op">/</span>s D<span class="op">:</span></span></code></pre></div>
<p>命令参数解析：</p>
<ul>
<li><code>bcdboot C:\Windows</code>：
BCDBoot使用<code>%WINDIR%\System32\Config\BCD-Template</code>文件创建新的启动项，该参数指定在复制启动环境时用作源的Windows目录的位置；在双Windows系统中，若另一个系统没有被列出来或无法进入，比如D盘中的系统，在启动菜单中按<code>Shift+F10</code>进入命令行，然后输入<code>bcdboot D:\Windows</code>命令即可修复；</li>
<li><code>/addlast</code>：将新建的启动项添加到启动顺序列表的底部，默认是添加到顶部；</li>
<li><code>/s &lt;volume letter&gt;</code>：指定系统分区的卷号，配置要在另一台计算机上启动的驱动器（例如U盘或移动硬盘），需使用此设置来指定系统分区，平时的正常安装不要使用该选项；</li>
<li><code>/m</code>：如果该Windows分区已有一个启动项，默认会删除旧的启动项及其值，可以使用<code>/m</code>来将现有启动项中的值合并到新的启动项中；</li>
</ul>
<p><strong>修改cmd默认编码为UTF-8</strong></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看当前默认编码，936为GBK，65001为UTF-8</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>chcp</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 临时修改为UTF-8</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>chcp <span class="dv">65001</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 永久修改则需改注册表，注册表找到如下路径</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Command Processor</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 然后选中Command Processor，右键新建字符串，命名为autorun，值填入chcp 65001&gt;nul</span></span></code></pre></div>
<p><strong>命令行设置环境变量</strong></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看所有环境变量</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看比如以pa开头的环境变量</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> pa</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 临时修改或追加环境变量，值为&quot;&quot;表示清空该环境变量</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> <span class="st">&quot;VARIABLE_NAME&quot;</span><span class="op">=</span><span class="st">&quot;value&quot;</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> <span class="st">&quot;path&quot;</span><span class="op">=</span><span class="st">&quot;%path%;xxx;&quot;</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 永久修改或追加环境变量，不加/m修改的是当前用户环境变量，加/m表示修改系统环境变量</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>setx <span class="st">&quot;VARIABLE_NAME&quot;</span> <span class="st">&quot;value&quot;</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>setx <span class="st">&quot;VARIABLE_NAME&quot;</span> <span class="st">&quot;%VARIABLE_NAME%;value;&quot;</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>setx <span class="st">&quot;VARIABLE_NAME&quot;</span> <span class="st">&quot;value&quot;</span> <span class="op">/</span>m</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>setx <span class="st">&quot;VARIABLE_NAME&quot;</span> <span class="st">&quot;%VARIABLE_NAME%;value;&quot;</span> <span class="op">/</span>m</span></code></pre></div>
<p><strong>清除powershell记录</strong></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Remove-Item</span> <span class="op">(</span><span class="fu">Get-PSReadlineOption</span><span class="op">).</span><span class="fu">HistorySavePath</span></span></code></pre></div>
<p><strong>管理员权限相关</strong></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查当前是否以管理员权限运行，核心思想就是试图访问需要管理员身份才可以访问的资源，无权访问结果为0</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>REG QUERY <span class="st">&quot;HKU\S-1-5-19&quot;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 申请管理员权限</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co"># VBS方式</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="op">%</span><span class="dv">1</span> mshta vbscript<span class="op">:</span>CreateObject<span class="op">(</span><span class="st">&quot;Shell.Application&quot;</span><span class="op">).</span><span class="fu">ShellExecute</span><span class="op">(</span><span class="st">&quot;cmd.exe&quot;</span><span class="op">,</span><span class="st">&quot;/c %~s0 ::&quot;</span><span class="op">,</span><span class="st">&quot;&quot;</span><span class="op">,</span><span class="st">&quot;runas&quot;</span><span class="op">,</span><span class="dv">1</span><span class="op">)(</span>window<span class="op">.</span><span class="fu">close</span><span class="op">)&amp;&amp;</span><span class="cf">exit</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cd</span> <span class="op">/</span>d <span class="st">&quot;%~dp0&quot;</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="co"># powershell方式，其中%~sdpnx0指当前批处理文件</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>powershell <span class="op">-</span>Command <span class="st">&quot;Start-Process &#39;%~sdpnx0&#39; -Verb RunAs&quot;</span><span class="op">&amp;&amp;</span><span class="cf">exit</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 结合使用</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>REG QUERY <span class="st">&quot;HKU\S-1-5-19&quot;</span><span class="op">&gt;</span>NUL <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span> <span class="op">||</span> <span class="op">(</span>powershell <span class="op">-</span>Command <span class="st">&quot;Start-Process &#39;%~sdpnx0&#39; -Verb RunAs&quot;</span><span class="op">&amp;&amp;</span><span class="cf">EXIT</span><span class="op">)</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 将当前目录下的run.exe注册为需要使用管理员运行的程序，这样以后打开run.exe都会弹UAC框</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>reg add <span class="st">&quot;HKCU\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers&quot;</span> <span class="op">/</span>f <span class="op">/</span>v <span class="st">&quot;%~dp0\run.exe&quot;</span> <span class="op">/</span>d <span class="st">&quot;~ RUNASADMIN&quot;</span> <span class="op">&gt;</span>NUL <span class="dv">2</span><span class="op">&gt;</span>NUL</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 让需要管理员权限的软件以普通权限运行，原理是通过设置环境变量来使用兼容层运行</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>cmd <span class="op">/</span>min <span class="op">/</span>C <span class="st">&quot;set __COMPAT_LAYER=RUNASINVOKER &amp;&amp; start </span><span class="ch">&quot;&quot;</span><span class="st"> &quot;</span>C<span class="op">:</span>\my programs\file<span class="op">.</span><span class="fu">exe</span> <span class="st">&quot;&quot;</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者使用时把软件拖到cmd文件的图标上</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>cmd <span class="op">/</span>min <span class="op">/</span>C <span class="st">&quot;set __COMPAT_LAYER=RUNASINVOKER &amp;&amp; start </span><span class="ch">&quot;&quot;</span><span class="st"> %1&quot;</span> <span class="st">&quot;&quot;</span></span></code></pre></div>
<p><strong>其他常用命令</strong>：</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 遍历目录，并执行命令，比如递归遍历当前目录下所有jpg并复制到指定文件夹</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>forfiles <span class="op">/</span>p <span class="op">.</span> <span class="op">/</span>m <span class="op">*.</span><span class="fu">jpg</span> <span class="op">/</span>s <span class="op">/</span>c <span class="st">&quot;cmd /c copy @path D:\photos&quot;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取帮助</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>forfiles <span class="op">/?</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 在指定的文件中查找字符串</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>findstr <span class="st">&quot;str&quot;</span> test<span class="op">.</span><span class="fu">txt</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 在当前目录下的所有文件里查找字符串（其中/s表示包含子目录，/n表示显示行号，/i表示忽略大小写）</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>findstr <span class="op">/</span>s <span class="op">/</span>n <span class="op">/</span>i <span class="st">&quot;str&quot;</span> <span class="op">*.*</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 比较两个文件</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="fu">fc</span> file1<span class="op">.</span><span class="fu">txt</span> file2<span class="op">.</span><span class="fu">txt</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取帮助</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="fu">fc</span> <span class="op">/?</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a><span class="co"># windows下创建任意大小空白文件，比如1G，即1024*1024*1024*1</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>fsutil file createnew <span class="dv">1.</span><span class="dt">txt</span> <span class="dv">1073741824</span></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 合并文件（比如ts）</span></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a><span class="fu">copy</span> <span class="op">/</span>b  <span class="op">.</span>\<span class="op">*.</span><span class="fu">ts</span>  <span class="op">.</span>\new<span class="op">.</span><span class="fu">ts</span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 得到文件的MD5</span></span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>certutil <span class="op">-</span>hashfile  filename MD5</span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 证书管理器</span></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>certmgr<span class="op">.</span><span class="fu">msc</span></span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a><span class="co"># MSConfig</span></span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>msconfig</span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 将文件夹映射成虚拟磁盘</span></span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>subst A<span class="op">:</span> C<span class="op">:</span>\Downloads</span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 不带参数即查看映射</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>subst</span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a><span class="co"># 删除映射</span></span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>subst A<span class="op">:</span> <span class="op">/</span>D</span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Bitlocker回锁</span></span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>manage-bde <span class="op">-</span>lock D<span class="op">:</span></span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看当前的文件类型关联（cmd输入，不指定类型则查看所有）</span></span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>assoc <span class="op">.</span><span class="fu">mp4</span></span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a><span class="co"># 指定打开方式（等号后面为空就是删除关联的打开程序的意思）</span></span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>assoc <span class="op">.</span><span class="fu">mp4</span><span class="op">=</span>WMP11<span class="op">.</span><span class="fu">AssocFile</span><span class="op">.</span><span class="fu">MP4</span></span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a><span class="co"># 文件类型关联的软件对应注册表项（在两处同时删除就和使用命令行删除关联一样的效果）：</span></span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a><span class="co"># HKEY_CLASSES_ROOT</span></span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a><span class="co"># HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\</span></span></code></pre></div>
<p>重定向部分系统目录到当前文件夹：</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>@echo off</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>setlocal</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置&quot;批处理文件名_Data&quot;为存放数据的文件夹</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> <span class="st">&quot;rootfolder=%~dp0\%~n0_Data&quot;</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改常用系统文件夹路径，核心思想是修改目录变量</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> <span class="st">&quot;ProgramData=%rootfolder%\ProgramData&quot;</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> <span class="st">&quot;UserProfile=%rootfolder%\UserProfile&quot;</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> <span class="st">&quot;LocalAppData=%UserProfile%\AppData\Local&quot;</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set</span> <span class="st">&quot;AppData=%UserProfile%\AppData\Roaming&quot;</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not exist <span class="st">&quot;%rootfolder%&quot;</span> mkdir <span class="st">&quot;%rootfolder%&quot;</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not exist <span class="st">&quot;%ProgramData%&quot;</span> mkdir <span class="st">&quot;%ProgramData%&quot;</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not exist <span class="st">&quot;%UserProfile%&quot;</span> mkdir <span class="st">&quot;%UserProfile%&quot;</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not exist <span class="st">&quot;%UserProfile%\AppData&quot;</span> mkdir <span class="st">&quot;%UserProfile%\AppData&quot;</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not exist <span class="st">&quot;%LocalAppData%&quot;</span> mkdir <span class="st">&quot;%LocalAppData%&quot;</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> not exist <span class="st">&quot;%AppData%&quot;</span> mkdir <span class="st">&quot;%AppData%&quot;</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 把批处理命名为目标exe同名，并放在同一个目录下，双击批处理即可运行exe</span></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a><span class="fu">start</span> <span class="st">&quot;&quot;</span> <span class="st">&quot;%~n0.exe&quot;</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>endlocal</span></code></pre></div>
<p>win11右键菜单更改：</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># win11右键菜单更改</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Win10模式</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>reg<span class="op">.</span><span class="fu">exe</span> add <span class="st">&quot;HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32&quot;</span> <span class="op">/</span>f <span class="op">/</span>ve</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>taskkill <span class="op">/</span>f <span class="op">/</span>im explorer<span class="op">.</span><span class="fu">exe</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="fu">start</span> explorer<span class="op">.</span><span class="fu">exe</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co"># win11模式</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>reg<span class="op">.</span><span class="fu">exe</span> delete <span class="st">&quot;HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}&quot;</span> <span class="op">/</span>f</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>taskkill <span class="op">/</span>f <span class="op">/</span>im explorer<span class="op">.</span><span class="fu">exe</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="fu">start</span> explorer<span class="op">.</span><span class="fu">exe</span></span></code></pre></div>
<p>清理任务栏图标记录：</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 关闭Windows外壳程序explorer</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>taskkill <span class="op">/</span>f <span class="op">/</span>im explorer<span class="op">.</span><span class="fu">exe</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 清理系统图标缓存数据库</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>attrib <span class="op">-</span>h <span class="op">-</span>s <span class="op">-</span>r <span class="st">&quot;%userprofile%\AppData\Local\IconCache.db&quot;</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\IconCache.db&quot;</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>attrib <span class="op">/</span>s <span class="op">/</span>d <span class="op">-</span>h <span class="op">-</span>s <span class="op">-</span>r <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\*&quot;</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_32.db&quot;</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_96.db&quot;</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_102.db&quot;</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_256.db&quot;</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_1024.db&quot;</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_idx.db&quot;</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="fu">del</span> <span class="op">/</span>f <span class="st">&quot;%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_sr.db&quot;</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 清理 系统托盘记忆的图标</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="fu">echo</span> y<span class="op">|</span>reg delete <span class="st">&quot;HKEY_CLASSES_ROOT\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify&quot;</span> <span class="op">/</span>v IconStreams</span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="fu">echo</span> y<span class="op">|</span>reg delete <span class="st">&quot;HKEY_CLASSES_ROOT\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify&quot;</span> <span class="op">/</span>v PastIconsStream</span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 重启Windows外壳程序explorer</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="fu">start</span> explorer</span></code></pre></div>
<p><strong>注册表相关</strong></p>
<p>打开注册表<code>regedit</code></p>
<p>设置中，“安装的应用”项目存放位置（根据<code>DisplayName</code>判断）：</p>
<ul>
<li><code>HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows\CurrentVersion\Uninstall</code></li>
<li><code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall</code></li>
<li><code>HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall</code></li>
</ul>
<p>此电脑中各种虚拟盘符对应注册表项：</p>
<ul>
<li><code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\MyComputer\NameSpace</code></li>
<li><code>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\MyComputer\NameSpace</code></li>
<li><code>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Desktop\NameSpace</code></li>
</ul>
<p>手动添加文件右键菜单：</p>
<pre><code>进入          HKEY_CLASSES_ROOT\*\shell\
在下面新建一项     Editplus
在新建的项目中，再新建一个项      command
之后在【HKEY_CLASSES_ROOT\*\shell\Editplus\command\】的默认值中，写入Editplus的绝对路径,并在后面添加  %1 。比如：C:\Program Files\EditPlus\editplus.exe %1
如果要指定图标，可以在【HKEY_CLASSES_ROOT\*\shell\Editplus】中添加字符串值，名字填 icon ，值填ico图标路径或者exe文件路径
如果需要多级菜单，在【HKEY_CLASSES_ROOT\*\shell\Editplus】中添加字符串值 SubCommands ，值不用填写，然后在下面新建一项 shell ，再在下面填新建你要显示在二级菜单中的项，并添加command项指定要运行的程序。多级菜单以此类推。
路径参数：
%1  文件路径
%2  系统默认的打印机
%3  文件扇区
%4  端口
%D  文件路径
%L  文件长路径
%V  文件路径
%W  当前文件的父目录的路径</code></pre>
<p>关闭ms-gamingoverlay弹框：</p>
<ul>
<li>找到<code>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\GameDVR</code>，把<code>AppCaptureEnabled</code>这个键值修改为0</li>
<li>找到<code>HKEY_CURRENT_USER\System\GameConfigStore</code>，把<code>GameDVR_Enabled</code>这个键值修改为0</li>
</ul>
<p>暂停Windows更新至2099年（新建reg格式文件粘贴再运行）：</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Windows Registry Editor Version 5.00</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="dt"> </span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="kw">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsUpdate\UX\Settings]</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="dt">&quot;FlightSettingsMaxPauseDays&quot;</span><span class="ot">=</span><span class="st">dword:00000e42</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="dt">&quot;PauseFeatureUpdatesStartTime&quot;</span><span class="ot">=</span><span class="st">&quot;2020-01-01T00:00:01Z&quot;</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="dt">&quot;PauseFeatureUpdatesEndTime&quot;</span><span class="ot">=</span><span class="st">&quot;2099-01-01T00:00:02Z&quot;</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="dt">&quot;PauseQualityUpdatesStartTime&quot;</span><span class="ot">=</span><span class="st">&quot;2020-01-01T00:00:01Z&quot;</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a><span class="dt">&quot;PauseQualityUpdatesEndTime&quot;</span><span class="ot">=</span><span class="st">&quot;2099-01-01T00:00:02Z&quot;</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="dt">&quot;PauseUpdatesStartTime&quot;</span><span class="ot">=</span><span class="st">&quot;2020-01-01T00:00:01Z&quot;</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="dt">&quot;PauseUpdatesExpiryTime&quot;</span><span class="ot">=</span><span class="st">&quot;2099-01-01T00:00:02Z&quot;</span></span></code></pre></div>
<p><strong>Veracrypt常用命令</strong></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载加密卷</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="ex">veracrypt</span> /beep /volume <span class="dt">\D</span>evice<span class="dt">\H</span>arddisk0<span class="dt">\P</span>artition2 /password <span class="st">&quot;123&quot;</span> /keyfile <span class="st">&quot;1.txt&quot;</span> /auto /letter D /explore /quit</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 卸载加密卷</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="ex">veracrypt</span> /beep /dismount D /quit</span></code></pre></div>
<p>命令参数解析：</p>
<ul>
<li><code>/beep</code>或<code>/b</code>：加载成功就播放一下提示音；</li>
<li><code>/dismount</code>或<code>/d</code>：卸载加密卷；</li>
<li><code>/volume</code>或<code>/v</code>：指定磁盘分卷名或文件路径；</li>
<li><code>/password</code>或<code>/p</code>：指定密码；</li>
<li><code>/keyfile</code>或<code>/k</code>：指定密钥位置；</li>
<li><code>/letter</code>或<code>/l</code>：指定分配的盘符，要和<code>/auto</code>或<code>/a</code>一起用才生效；</li>
<li><code>/explore</code>或<code>/e</code>：若加载成功，就打开该磁盘；</li>
<li><code>/quit</code>或<code>/q</code>：退出软件，否则每执行一次命令就新开一个窗口；</li>
</ul>
<p><strong>VirtualBox常用命令</strong></p>
<p>VBoxManage默认在<code>C:\Program Files\Oracle\VirtualBox\VBoxManage.exe</code>，退出独占键盘和鼠标的默认快捷键是右边的<code>Ctrl+Alt</code>。</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 压缩虚拟机</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="ex">VBoxManage</span> modifyhd D:<span class="dt">\c</span>entos.vdi <span class="at">--compact</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看所有的虚拟磁盘</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="ex">VBoxManage</span> list hdds</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 删除虚拟磁盘（虚拟硬盘的文件也会被删除）</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="ex">VBoxManage</span> closemedium disk <span class="st">&quot;&lt;虚拟硬盘完整路径&gt;&quot;</span> <span class="at">--delete</span></span></code></pre></div>
<p>使用VirtualBox从本地硬盘启动系统，参考<a href="https://www.virtualbox.org/manual/UserManual.html#rawdisk">Using a
Raw Host Hard Disk From a Guest</a>：</p>
<p>1、确定硬盘DeviceID，或硬盘名称：</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Windows下查看硬盘DeviceID</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="ex">wmic</span> diskdrive list brief /format:list</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Linux下查看硬盘信息有很多种方法，以下任选一种即可</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> fdisk <span class="at">-l</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> df <span class="at">-h</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> lshw <span class="at">-class</span> disk</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> cat /proc/partitions</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> parted <span class="at">-l</span></span></code></pre></div>
<p>2、创建vmdk，指向实体硬盘：</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Windows下的命令</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用管理员进入cmd执行，而且以后如果要使用该创建的vmdk要用管理员运行Virtalbox</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="ex">VBoxManage</span> internalcommands createrawvmdk <span class="at">-filename</span> <span class="st">&quot;D:\physicDrive.vmdk&quot;</span>  <span class="at">-rawdisk</span> <span class="dt">\\</span>.<span class="dt">\P</span>HYSICALDRIVE0</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 还可以指定使用哪几个分卷（ESP和MSR等EFI分区记得选上，不然没法启动系统）</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="ex">VBoxManage</span> internalcommands createrawvmdk <span class="at">-filename</span> <span class="st">&quot;D:\physicDrive.vmdk&quot;</span>  <span class="at">-rawdisk</span> <span class="dt">\\</span>.<span class="dt">\P</span>HYSICALDRIVE0 <span class="at">-partitions</span> 1,2,3</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Linux下要先设置读写权限，而且以后每次使用该创建的vmdk都要设置读写权限</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 666 /dev/nvme0<span class="pp">*</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 666 /dev/sda<span class="pp">*</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 可以给同一个虚拟机创建多个不同的虚拟硬盘</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="ex">VBoxManage</span> internalcommands createrawvmdk <span class="at">-filename</span> <span class="st">&quot;physicDrive_nvme0n1.vmdk&quot;</span> <span class="at">-rawdisk</span> /dev/nvme0n1 <span class="at">-relative</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="ex">VBoxManage</span> internalcommands createrawvmdk <span class="at">-filename</span> <span class="st">&quot;physicDrive_sda.vmdk&quot;</span> <span class="at">-rawdisk</span> /dev/sda <span class="at">-partitions</span> 1,2,3 <span class="at">-relative</span></span></code></pre></div>
<p>3、打开Virtualbox，创建虚拟机：</p>
<ul>
<li>硬盘选择使用已有的vmdk虚拟硬盘；</li>
<li>勾选“启用EFI”；</li>
<li>如果用固态，存储控制器选NVMe，机械硬盘则选择SATA；</li>
<li>勾选“使用主机输入输出(I/O)缓存”；</li>
<li>网络连接模式最好用桥接（虚拟机能有独立的IP，但数据交换需通过网关设备）或NAT；</li>
<li>如果要在虚拟机里使用显卡，需要在BIOS里将VT-d（即Virtualization
Technology for Direct I/O）设置成enable，宿主机启用嵌套分页（Nested
Paging），虚拟机安装VirtualBox Extension
Pack，然后执行<code>VBoxManage modifyvm --pciattach</code>或<code>VBoxManage modifyvm --pcidetach</code>来启用或禁用PCI
Passthrough，并在虚拟机里安装显卡驱动；</li>
<li>最好禁用不需要的Virtualbox的快捷键；</li>
</ul>
<h2 id="git常用命令">git常用命令</h2>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装并配置用户名、邮箱</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install git</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.name <span class="st">&quot;Your Name&quot;</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.email <span class="st">&quot;email@example.com&quot;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="co"># github通过SSH令牌进行身份验证</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成公钥</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keygen</span> <span class="at">-t</span> rsa <span class="at">-C</span> <span class="st">&quot;你注册github时的邮箱&quot;</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看公钥</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="ex">gedit</span> ~/.ssh/id_rsa.pub</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 上传公钥到github：打开github网站settings-&gt;SSH and GPGkeys-&gt;new SSH key-&gt;粘贴公钥</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 测试密钥是否添加成功：</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-T</span> git@github.com</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看远程仓库</span></span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote <span class="at">-v</span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 取消链接远程仓库，仓库别名通常是origin</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote rm <span class="pp">[</span><span class="ss">远程仓库别名</span><span class="pp">]</span></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 把当前文件夹链接到远程仓库，仓库别名通常是origin</span></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote add <span class="pp">[</span><span class="ss">远程仓库别名</span><span class="pp">]</span> <span class="pp">[</span><span class="ss">ssh</span><span class="pp">-</span><span class="ss">url</span><span class="pp">]</span></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 初始化本地仓库</span></span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> init</span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote add origin git@github.com:<span class="pp">[</span><span class="ss">username</span><span class="pp">]</span>/[repo name].git</span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 上传到github</span></span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add <span class="at">--all</span></span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;update&quot;</span></span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin master</span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 不删除项目情况下删除所有commit记录</span></span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 原理是新建分支-&gt;文件移至新分支-&gt;提交更改（本地）-&gt;删除原分支-&gt;把新分支改名为master-&gt;提交至github）（需要重新上传所有文件）：</span></span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">--orphan</span> latest_branch</span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add <span class="at">-A</span></span>
<span id="cb79-34"><a href="#cb79-34" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-am</span> <span class="st">&quot;update&quot;</span></span>
<span id="cb79-35"><a href="#cb79-35" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-D</span> master</span>
<span id="cb79-36"><a href="#cb79-36" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-m</span> master</span>
<span id="cb79-37"><a href="#cb79-37" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-f</span> origin master</span></code></pre></div>
<h2 id="ffmpeg常用命令">FFmpeg常用命令</h2>
<p>官网：<a href="https://ffmpeg.org/">FFmpeg</a></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 列出所有支持的格式（也就是-f后面可以接的参数）</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-formats</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看支持的编码器（也就是-vcodec后面可以接的参数）</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-codecs</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看支持的滤镜（也就是-vf后面可以接的参数）:</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-filters</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 显示所有可用的硬件加速器（即GPU加速，需下载显卡相关的驱动并使用显卡相关的解码器及编码器）</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg.exe</span> <span class="at">-hwaccels</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取视频信息</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> video.mp4</span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 视频格式转换并重新编码（没有指定任何编码器或copy则默认重新编码），-f指定转码的格式，比如flv转成mp4，如果不指定则自动检测输出文件的后缀；-y表示若输出文件存在，则自动覆盖输出文件，而-n则表示不要覆盖输出文件</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.flv <span class="at">-f</span> mp4 <span class="at">-y</span> output.mp4</span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a><span class="co"># -acodec copy：音频流执行copy，视频流重新解码、编码；注意，所有的编码指令都应在输出参数前面指定</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-acodec</span> copy <span class="at">-f</span> mp4 output.mp4</span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a><span class="co"># -vcodec copy：视频流执行copy，音频流重新解码、编码</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vcodec</span> copy <span class="at">-f</span> mp4 output.mp4</span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a><span class="co"># -codec copy：音频流和视频流都执行copy，不重新解码、编码</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-codec</span> copy <span class="at">-f</span> mp4 output.mp4</span></code></pre></div>
<p>合并视频方法一，在视频所在文件夹中新建一个txt文件，把要合并的视频文件按顺序写上，比如filelist.txt：</p>
<pre><code>file &#39;1.mp4&#39;
file &#39;2.mp4&#39;
file &#39;3.mp4&#39;</code></pre>
<p>（以上文件内容可以用<code>dir /b /s /a-d &gt; filelist.txt</code>命令生成文件列表再修改，其中<code>/s</code>表示递归遍历，<code>/a-d</code>表示只列出文件）</p>
<p>然后执行：</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法一：合并mp4，使用concat demuxer方法，该方法要求视频音频的属性完全一样，且不会再进行解码、编码，速度较快</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-f</span> concat <span class="at">-i</span> filelist.txt <span class="at">-c</span> copy output.mp4</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法二：合并mp4，使用concat filter方法，该方法要求视频之间的分辨率和帧率一致，支持合并的同时重新解码、编码视频</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> 1.mp4 <span class="at">-i</span> 2.mp4 <span class="at">-i</span> 3.mp4 <span class="at">-i</span> 4.mp4 <span class="at">-filter_complex</span> concat=n=4:v=1:a=1 <span class="at">-f</span> mp4 output.mp4</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法三：ts格式可以使用concat protocol方法，直接在参数里指定concat的文件名，类似Linux中的cat命令</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> <span class="st">&quot;concat:1.ts|2.ts|3.ts&quot;</span> <span class="at">-codec</span> copy output.ts</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 先合并ts，然后将合并后的ts重新编码、转码为mp4</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-f</span> concat <span class="at">-i</span> filelist.txt <span class="at">-acodec</span> copy <span class="at">-vcodec</span> copy <span class="at">-absf</span> aac_adtstoasc output.mp4</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a><span class="co"># mp4转为ts需要指定过滤器，-vbsf指定视频过滤器</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i input.mp4</span> <span class="at">-vcodec</span> copy <span class="at">-acodec</span> copy <span class="at">-vbsf</span> h264_mp4toannexb output.ts</span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 其他的一些常用编码器</span></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a><span class="co"># mp4转为webm</span></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-c:v</span> libvpx <span class="at">-c:a</span> aac output.webm</span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a><span class="co"># mp4转flv，-g可以设置关键帧间隔，比如45帧</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-c:v</span> libx264 <span class="at">-c:a</span> aac <span class="at">-g</span> 45 output.flv</span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 结合cmd的循环命令，可以批量重新解码、编码</span></span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="ex">%%a</span> in <span class="er">(</span><span class="st">&quot;*.mp4&quot;</span><span class="kw">)</span> <span class="cf">do</span> <span class="ex">ffmpeg</span> <span class="at">-i</span> <span class="st">&quot;%%a&quot;</span> <span class="at">-c:v</span> libx264 <span class="at">-c:a</span> aac <span class="at">-y</span> <span class="st">&quot;%%a&quot;</span>.mp4</span></code></pre></div>
<p>其他常用命令：</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 视频压缩，-crf设置视频质量，取值范围为0~51，数值越大，画质越差，生成的文件就越小，一般取18即可让输出视频质量和输入视频相当；-r设置视频的帧率；-preset指定的编码速度越慢，获得的压缩效率就越高，取值有veryslow、slower、slow、medium、fast、faster、veryfast、superfast、ultrafast </span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-threads</span> 2 <span class="at">-vcodec</span> libx264 <span class="at">-acodec</span> copy <span class="at">-preset</span> veryslow <span class="at">-r</span> 60 <span class="at">-crf</span> 18 output.mp4</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取视频分辨率</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ffprobe</span> <span class="at">-v</span> error <span class="at">-select_streams</span> v:0 <span class="at">-show_entries</span> stream=width,height <span class="at">-of</span> csv=s=x:p=0 input.mp4</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 调整视频分辨率，比如调整为w:1920 h:1080；如果需要保持纵横比，那么就指定宽和高的其中一个，另一个设置为-1，比如-1:720</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> scale=1920:1080 <span class="at">-preset</span> veryslow <span class="at">-crf</span> 18 output.mp4</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 调整视频分辨率时，支持使用变量计算宽高，比如宽和高都减少一半</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> <span class="st">&quot;scale=iw/2:ih/2&quot;</span> <span class="at">-preset</span> veryslow <span class="at">-crf</span> 18 output.mp4  </span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 视频切割</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 读取input.mp4文件，并将其转换为HLS格式，并生成HLS播放列表文件output.m3u8和对应的媒体切片文件output_001.ts、output_002.ts等等</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 其中-hls_time指定HLS切片时长，单位为秒；-hls_list_size指定HLS播放列表中切片数量，为0则表示生成无限大小的播放列表；-hls_segment_filename指定HLS切片文件名</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-c:v</span> libx264 <span class="at">-c:a</span> aac <span class="at">-hls_time</span> 10 <span class="at">-hls_list_size</span> 0 <span class="at">-hls_segment_filename</span> <span class="st">&quot;output_%03d.ts&quot;</span> output.m3u8</span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 另一种切割方法</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-c:v</span> libx264 <span class="at">-c:a</span> aac <span class="at">-segment_time</span> 10 <span class="at">-segment_format</span> mpegts <span class="at">-segment_list</span> output.m3u8 output_%03d.ts</span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 音视频分离</span></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a><span class="co"># -an：audio no，只保留视频，去除音频</span></span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vcodec</span> copy <span class="at">-an</span> output.mp4</span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a><span class="co"># -vn：video no，只保留音频，去除视频</span></span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-acodec</span> copy <span class="at">-vn</span> output.mp4</span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 只保留音频，去除视频，且导出为MP3格式</span></span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vn</span> <span class="at">-acodec</span> libmp3lame <span class="at">-ab</span> 320k <span class="at">-ar</span> 44100 <span class="at">-f</span> mp3 output.mp3</span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 截取视频，-ss指定开始时间、-t指定持续时间，或用-to指定结束时间，单位为秒，-s指定分辨率，但是直接截取可能会导致截取时间点不准确以及开头黑屏</span></span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-ss</span> 00:01:10.0 <span class="at">-t</span> 00:00:05 <span class="at">-s</span> 1280x720 <span class="at">-codec</span> copy <span class="at">-f</span> flv output.flv</span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 为了避免以上问题，可进行重新编码</span></span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-ss</span> 00:00:01.123 <span class="at">-t</span> 00:00:05 <span class="at">-c:v</span> libx264 <span class="at">-c:a</span> aac output.mp4</span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 如果对准确度要求不高，可按关键帧截取视频，这样更快，注意，-accurate_seek必须放在-i参数之前</span></span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-ss</span> 10 <span class="at">-t</span> 5 <span class="at">-accurate_seek</span> <span class="at">-i</span> input.mp4 <span class="at">-codec</span> copy output.mp4</span>
<span id="cb83-32"><a href="#cb83-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-33"><a href="#cb83-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 顺时针旋转90°</span></span>
<span id="cb83-34"><a href="#cb83-34" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> <span class="st">&quot;transpose=1&quot;</span> output.mp4</span>
<span id="cb83-35"><a href="#cb83-35" aria-hidden="true" tabindex="-1"></a><span class="co"># 逆时针旋转90°</span></span>
<span id="cb83-36"><a href="#cb83-36" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> <span class="st">&quot;transpose=2&quot;</span> output.mp4</span>
<span id="cb83-37"><a href="#cb83-37" aria-hidden="true" tabindex="-1"></a><span class="co"># 水平翻转</span></span>
<span id="cb83-38"><a href="#cb83-38" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> hflip output.mp4</span>
<span id="cb83-39"><a href="#cb83-39" aria-hidden="true" tabindex="-1"></a><span class="co"># 垂直翻转</span></span>
<span id="cb83-40"><a href="#cb83-40" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> vflip output.mp4</span>
<span id="cb83-41"><a href="#cb83-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-42"><a href="#cb83-42" aria-hidden="true" tabindex="-1"></a><span class="co"># 视频倒放、音频不变</span></span>
<span id="cb83-43"><a href="#cb83-43" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> reverse reversed_video.mp4</span>
<span id="cb83-44"><a href="#cb83-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 音频倒放，视频不变</span></span>
<span id="cb83-45"><a href="#cb83-45" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg.exe</span> <span class="at">-i</span> input.mp4 <span class="at">-map</span> 0 <span class="at">-c:v</span> copy <span class="at">-af</span> <span class="st">&quot;areverse&quot;</span> reversed_audio.mp4</span>
<span id="cb83-46"><a href="#cb83-46" aria-hidden="true" tabindex="-1"></a><span class="co"># 音视频都倒放</span></span>
<span id="cb83-47"><a href="#cb83-47" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> reverse <span class="at">-af</span> areverse <span class="at">-preset</span> superfast reversed.mp4 </span>
<span id="cb83-48"><a href="#cb83-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 两倍速播放，setpts=PTS/2指视频变为2倍速，atempo=2指音频变为2倍速，对音视频进行加速时，如果不想丢帧，可以用-r参数指定输出视频FPS，用-ar参数指定音频采样率（Hz）</span></span>
<span id="cb83-49"><a href="#cb83-49" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-r</span> 60 <span class="at">-vf</span> setpts=PTS/2 <span class="at">-af</span> atempo=2 output.mp4</span>
<span id="cb83-50"><a href="#cb83-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 音量调整为80%</span></span>
<span id="cb83-51"><a href="#cb83-51" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-af</span> <span class="st">&quot;volume=0.8&quot;</span> output.mp4</span>
<span id="cb83-52"><a href="#cb83-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-53"><a href="#cb83-53" aria-hidden="true" tabindex="-1"></a><span class="co"># hstack：左右拼接视频；vstack：上下拼接视频</span></span>
<span id="cb83-54"><a href="#cb83-54" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input1.mp4 <span class="at">-i</span> input2.mp4 <span class="at">-lavfi</span> hstack output.mp4</span>
<span id="cb83-55"><a href="#cb83-55" aria-hidden="true" tabindex="-1"></a><span class="co"># 3个视频左右拼接</span></span>
<span id="cb83-56"><a href="#cb83-56" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input1.mp4 <span class="at">-i</span> input2.mp4 <span class="at">-i</span> input3.mp4 <span class="at">-lavfi</span> hstack=inputs=3 output.mp4</span>
<span id="cb83-57"><a href="#cb83-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-58"><a href="#cb83-58" aria-hidden="true" tabindex="-1"></a><span class="co"># 字幕格式转换</span></span>
<span id="cb83-59"><a href="#cb83-59" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> subtitle.srt subtitle.ass</span>
<span id="cb83-60"><a href="#cb83-60" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加硬字幕（srt或ass格式字幕）</span></span>
<span id="cb83-61"><a href="#cb83-61" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> subtitles=subtitle.srt output_srt.mp4</span>
<span id="cb83-62"><a href="#cb83-62" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vf</span> ass=subtitle.ass output_ass.mp4</span>
<span id="cb83-63"><a href="#cb83-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加软字幕（srt或ass格式同样操作）</span></span>
<span id="cb83-64"><a href="#cb83-64" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-i</span> subtitle.srt <span class="at">-c</span> copy <span class="at">-c:s</span> mov_text <span class="at">-metadata:s:s:0</span> language=chi ouptut_chi.mp4</span>
<span id="cb83-65"><a href="#cb83-65" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加多通道软字幕</span></span>
<span id="cb83-66"><a href="#cb83-66" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-i</span> ch.srt <span class="at">-i</span> en.srt <span class="at">-map</span> 0 <span class="at">-map</span> 1 <span class="at">-map</span> 2 <span class="at">-c</span> copy <span class="at">-c:s</span> mov_text <span class="at">-metadata:s:s:0</span> language=chi <span class="at">-metadata:s:s:1</span> language=eng output_chi_eng.mp4</span>
<span id="cb83-67"><a href="#cb83-67" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取软字幕（将第二个轨道subrip字幕轨道提取成srt文件，通过视频信息可查看第几个Stream是字幕）</span></span>
<span id="cb83-68"><a href="#cb83-68" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-map</span> <span class="st">&quot;0:2&quot;</span> output.srt </span></code></pre></div>
<p>一些常见问题：</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 合并mp4时，若出现Unsafe file name错误，则添加参数&quot;-safe 0&quot;</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-f</span> concat <span class="at">-safe</span> 0 <span class="at">-i</span> filelist.txt <span class="at">-c</span> copy output.mp4</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 解决时间轴的损坏</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法一：分离出视频、音频，再混合视频和音频，重新生成文件</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-map</span> 0:v <span class="at">-vcodec</span> copy <span class="at">-bsf:v</span> h264_mp4toannexb output_video.mp4</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-vn</span> output_audio.wav</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> output_video.mp4 <span class="at">-i</span> output_audio.wav <span class="at">-c</span> copy output_fixed.mp4</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法二：设定帧率为60fps（或其他想要的帧率），重新封装</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-fflags</span> +genpts <span class="at">-r</span> 60 <span class="at">-i</span> input.mp4 <span class="at">-vcodec</span> copy output_fixed.mp4</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法三：如果两个视频的time_base（即tbn）不一样，合并之后时间轴出错可以用以下方法修复（按需取值）</span></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="ex">ffmpeg</span> <span class="at">-i</span> input.mp4 <span class="at">-c:v</span> copy <span class="at">-video_track_timescale</span> 12800 output.mp4</span></code></pre></div>
<h2 id="pandoc常用命令">pandoc常用命令</h2>
<p>pandoc<a href="https://pandoc.org/">官网</a>，<a href="https://www.pandoc.org/MANUAL.html">文档</a>，安装完要添加到环境变量里；如果要生成PDF，还要安装（任选一个即可）：<a href="https://www.tug.org/texlive/">TeX Live</a>、<a href="https://miktex.org/">MiKTeX</a>。</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-s</span> <span class="at">--toc</span> <span class="at">--toc-depth</span><span class="op">=</span>6 <span class="at">--katex</span><span class="op">=</span><span class="st">&quot;file:///path/to/katexfolder/&quot;</span> <span class="at">--css</span><span class="op">=</span>cssfile.css <span class="at">-H</span> jsfile.js <span class="at">--embed-resources</span> <span class="at">--metadata</span> title=<span class="st">&quot;title&quot;</span> infile.md <span class="at">-o</span> outfile.html</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-s</span> <span class="at">--pdf-engine</span><span class="op">=</span><span class="st">&quot;path/to/xelatex.exe&quot;</span> <span class="at">-V</span> mainfont=<span class="st">&quot;SimSun.ttc&quot;</span> <span class="at">--template</span><span class="op">=</span><span class="st">&quot;path/to/template.latex&quot;</span> <span class="at">-f</span> markdown <span class="at">-t</span> pdf infile.md <span class="at">-o</span> outfile.pdf</span></code></pre></div>
<p>命令参数解析：</p>
<ul>
<li><code>-f FORMAT</code>、<code>--from=FORMAT</code>：指定输入文件的格式（可以通过文件后缀自动识别）；</li>
<li><code>-t FORMAT</code>、<code>--to=FORMAT</code>：指定输出文件的格式（可以通过文件后缀自动识别）；</li>
<li><code>-s</code>、<code>--standalone</code>：生成一个独立的HTML或LaTeX文件，包含完整的文档头和尾；如果不使用该选项，默认情况下，pandoc只会生成文档片段，比如网页就只有内容，不包含html、head、body等标签；</li>
<li><code>-o FILENAME</code>、<code>--output=FILENAME</code>：指定输出文件的名称和路径；</li>
<li><code>--css=CSSFILE</code>：使用自定义的css样式；pandoc似乎无法自定义javascript，不过可以通过<code>-H</code>、<code>-B</code>、<code>-A</code>后面加文件名，来间接添加，这几个参数的意思分别是在head中、在body前、在body后插入文件的内容，不过要记得在代码前后加script标签；</li>
<li><code>--embed-resources[=true|false]</code>：生成一个没有外部依赖关系的独立HTML文件，比如把css放进html中不再以link的形式引用，把图片、字体等以base64的形式嵌入到网页中；类似的参数还有<code>--self-contained</code>；</li>
<li><code>--mathml</code>、<code>--katex[=URL]</code>、<code>--mathjax[=URL]</code>：指定数学公式输出的格式为MathML、KaTeX或者MathJax；其中MathML是pandoc内置的，但是对部分公式支持不好（比如上下划线、箭头等过短）；<a href="https://github.com/KaTeX/KaTeX">KaTeX</a>、<a href="https://github.com/MathJax/MathJax">MathJax</a>不指定URL则使用默认cdn加载，不过可以本地化，其中KaTeX的URL指向带有<code>katex.min.js</code>和<code>katex.min.css</code>的文件夹，2.x版本的MathJax的URL指向<code>MathJax.js</code>文件，3.x版本指向<code>./MathJax/es5/tex-svg.js</code>文件；</li>
<li><code>--highlight-style=STYLE</code>：设置代码块的语法高亮的样式，默认是pygments，<code>STYLE</code>的可选值可以通过<code>pandoc --list-highlight-styles</code>命令列出，支持的编程语言可以通过<code>pandoc --list-highlight-languages</code>命令列出；</li>
<li><code>--toc</code>、<code>--toc-depth=6</code>：生成TOC，默认生成最多3级目录，可以改为比如6级目录；</li>
<li><code>-M KEY[=VAL]</code>、<code>--metadata=KEY[:VAL]</code>：设置文档元数据；比如设置文档日期<code>-M date=&#39;1970-01-01&#39;</code>，设置标题<code>--metadata title=&quot;xxx&quot;</code>；</li>
<li><code>-V KEY[=VAL]</code>、<code>--variable=KEY[:VAL]</code>：设置Pandoc变量值，可以在文档中使用KEY来引用该变量；
<ul>
<li>比如Windows设置中文字体<code>-V mainfont=&quot;SimSun&quot;</code>，Linux下则是<code>-V CJKmainfont=&quot;KaiTi&quot;</code>；要找到支持的中文字体，在Linux下可以通过<code>fc-list :lang=zh</code>命令列出，Windows下如果安装了TeX
Live，也可以使用该命令；</li>
<li>比如要更改生成的PDF的margin，可以使用<code>-V geometry:&quot;top=2cm, bottom=1.5cm, left=2cm, right=2cm&quot;</code>；</li>
</ul></li>
<li><code>--pdf-engine=xelatex</code>：指定pdf解析引擎为xelatex，默认是没有引擎的，需要另外安装；</li>
<li><code>--template=TEMPLATENAME</code>：指定导出pdf时使用的模板，这里推荐<a href="https://github.com/Wandmalfarbe/pandoc-latex-template">Eisvogel模板</a>；
<ul>
<li>Windows下把模板放在<code>C:\Users\USERNAME\AppData\Roaming\pandoc\templates\</code>；</li>
<li>Linux下把模板放在<code>/Users/USERNAME/.local/share/pandoc/templates/</code>或者<code>/Users/USERNAME/.pandoc/templates/</code>；</li>
</ul></li>
<li><code>--extract-media=DIR</code>：比如从.docx转为.md，默认是不提取嵌入在.docx中的图片的，加上该命令后，图片就会提取到指定的目录；</li>
<li><code>--shift-heading-level-by=NUMBER</code>：改变标题层级；比如把<code>NUMBER</code>设置成1，那么在生成的文件中，一级标题<code>#</code>则会变成二级标题<code>##</code>，而<code>NUMBER=-1</code>则可以把二级标题改为一级标题；</li>
<li><code>--eol=crlf|lf|native</code>：指定生成文件的换行符；</li>
<li><code>--quiet</code>：忽略所有WARNING；比如HTML5要求所有网页都必须指定一个非空标题，如果使用了<code>-s</code>命令，就必须通过<code>--metadata title=&quot;xxx&quot;</code>，或使用<a href="https://pandoc.org/MANUAL.html#extension-yaml_metadata_block">YAML格式的header</a>，或文章开头使用<code>% title</code>等方式来指定标题，否则会出现WARNING，这时使用该参数可以忽略警告，忽略后将使用文件名作为默认的标题；</li>
</ul>
<p><strong>注意</strong>：如果markdown中使用的图片等外部文件使用了相对路径，那么需要在markdown所在的目录下运行pandoc，否则找的是pandoc所在的目录，就会报错说找不到文件。</p>
<p><strong>注意</strong>：用pandoc将markdown导出为html，数学公式会在annotation标签下保留latex源码，如果不想保留，可以通过以下命令删除（浏览器console执行，然后保存网页；部分浏览器保存后页内锚点会变成绝对路径，且文件开头会出现保存时间的注释，需修改）：</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">function</span>(){</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">//填入公式保存位置的选择器</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  tagStrs<span class="op">=</span>[<span class="st">&#39;annotation&#39;</span><span class="op">,</span> <span class="st">&#39;span[class=&quot;katex-mathml&quot;]&#39;</span><span class="op">,</span> <span class="st">&#39;script[type=&quot;math</span><span class="sc">\/</span><span class="st">tex&quot;]&#39;</span>]<span class="op">;</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  tagStrs<span class="op">.</span><span class="fu">forEach</span>(</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span>(tagStr){</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> tagElements <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(tagStr)<span class="op">;</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> tagElements<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>){</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>        tagElements[i]<span class="op">.</span><span class="at">parentNode</span><span class="op">.</span><span class="fu">removeChild</span>(tagElements[i])</span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>})()</span></code></pre></div>
<p>附一个仿Typora的css：</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>html {</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">scroll-behavior</span><span class="ch">:</span> <span class="dv">smooth</span><span class="op">;</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>body {</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* 网页字体1rem，pdf字体10.5px，生成pdf时需修改字体大小*/</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* font-size: 10.5px; */</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">line-height</span><span class="ch">:</span> <span class="dv">1.6</span><span class="op">;</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">tab-size</span><span class="ch">:</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="fu">rgb(</span><span class="dv">51</span><span class="op">,</span> <span class="dv">51</span><span class="op">,</span> <span class="dv">51</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">Microsoft YaHei</span><span class="op">,</span><span class="st">&quot;Open Sans&quot;</span><span class="op">,</span><span class="st">&quot;Clear Sans&quot;</span><span class="op">,</span> <span class="st">&quot;Helvetica Neue&quot;</span><span class="op">,</span> <span class="dv">Helvetica</span><span class="op">,</span> <span class="dv">Arial</span><span class="op">,</span> <span class="st">&#39;Segoe UI Emoji&#39;</span><span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">-webkit-font-smoothing</span><span class="ch">:</span> <span class="dv">antialiased</span><span class="op">;</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* TOC的宽度是300px，根据TOC进行修改（生成pdf时需把这部分注释掉） */</span></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">top</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">left</span><span class="ch">:</span> <span class="dv">300</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span><span class="ch">:</span> <span class="fu">calc(</span><span class="dv">90</span><span class="dt">%</span> <span class="op">-</span> <span class="dv">300</span><span class="dt">px</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">em</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a>h1<span class="op">,</span>h2<span class="op">,</span>h3<span class="op">,</span>h4<span class="op">,</span>h5<span class="op">,</span>h6 {</span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb87-23"><a href="#cb87-23" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb87-24"><a href="#cb87-24" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin-bottom</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb87-25"><a href="#cb87-25" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding-bottom</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-26"><a href="#cb87-26" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">bold</span><span class="op">;</span></span>
<span id="cb87-27"><a href="#cb87-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">line-height</span><span class="ch">:</span> <span class="dv">1.4</span><span class="op">;</span></span>
<span id="cb87-28"><a href="#cb87-28" aria-hidden="true" tabindex="-1"></a>  <span class="kw">cursor</span><span class="ch">:</span> <span class="dv">text</span><span class="op">;</span></span>
<span id="cb87-29"><a href="#cb87-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-30"><a href="#cb87-30" aria-hidden="true" tabindex="-1"></a>h1 {</span>
<span id="cb87-31"><a href="#cb87-31" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">2.25</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-32"><a href="#cb87-32" aria-hidden="true" tabindex="-1"></a>  <span class="kw">line-height</span><span class="ch">:</span> <span class="dv">1.2</span><span class="op">;</span></span>
<span id="cb87-33"><a href="#cb87-33" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-bottom</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#eee</span><span class="op">;</span></span>
<span id="cb87-34"><a href="#cb87-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-35"><a href="#cb87-35" aria-hidden="true" tabindex="-1"></a>h2 {</span>
<span id="cb87-36"><a href="#cb87-36" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">1.75</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-37"><a href="#cb87-37" aria-hidden="true" tabindex="-1"></a>  <span class="kw">line-height</span><span class="ch">:</span> <span class="dv">1.225</span><span class="op">;</span></span>
<span id="cb87-38"><a href="#cb87-38" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-bottom</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#eee</span><span class="op">;</span></span>
<span id="cb87-39"><a href="#cb87-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-40"><a href="#cb87-40" aria-hidden="true" tabindex="-1"></a>h3 {</span>
<span id="cb87-41"><a href="#cb87-41" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">1.5</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-42"><a href="#cb87-42" aria-hidden="true" tabindex="-1"></a>  <span class="kw">line-height</span><span class="ch">:</span> <span class="dv">1.43</span><span class="op">;</span></span>
<span id="cb87-43"><a href="#cb87-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-44"><a href="#cb87-44" aria-hidden="true" tabindex="-1"></a>h4 {<span class="kw">font-size</span><span class="ch">:</span> <span class="dv">1.25</span><span class="dt">em</span><span class="op">;</span>}</span>
<span id="cb87-45"><a href="#cb87-45" aria-hidden="true" tabindex="-1"></a>h5 {<span class="kw">font-size</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">em</span><span class="op">;</span>}</span>
<span id="cb87-46"><a href="#cb87-46" aria-hidden="true" tabindex="-1"></a>h6 {<span class="kw">font-size</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">em</span><span class="op">;</span><span class="kw">color</span><span class="ch">:</span> <span class="cn">#777</span><span class="op">;</span>}</span>
<span id="cb87-47"><a href="#cb87-47" aria-hidden="true" tabindex="-1"></a>p<span class="op">,</span>blockquote{ <span class="kw">margin</span><span class="ch">:</span> <span class="dv">0.8</span><span class="dt">em</span> <span class="dv">0</span> <span class="at">!important</span><span class="op">;</span> }</span>
<span id="cb87-48"><a href="#cb87-48" aria-hidden="true" tabindex="-1"></a>ul<span class="op">,</span>ol<span class="op">,</span>dl<span class="op">,</span>table{<span class="kw">margin</span><span class="ch">:</span> <span class="dv">0.8</span><span class="dt">em</span> <span class="dv">0</span><span class="op">;</span>}</span>
<span id="cb87-49"><a href="#cb87-49" aria-hidden="true" tabindex="-1"></a>li<span class="op">&gt;</span>ol<span class="op">,</span>li<span class="op">&gt;</span>ul {<span class="kw">margin</span><span class="ch">:</span> <span class="dv">0</span> <span class="dv">0</span><span class="op">;</span>}</span>
<span id="cb87-50"><a href="#cb87-50" aria-hidden="true" tabindex="-1"></a>a {</span>
<span id="cb87-51"><a href="#cb87-51" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">#4183C4</span><span class="op">;</span></span>
<span id="cb87-52"><a href="#cb87-52" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-decoration</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb87-53"><a href="#cb87-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-54"><a href="#cb87-54" aria-hidden="true" tabindex="-1"></a>hr {</span>
<span id="cb87-55"><a href="#cb87-55" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-56"><a href="#cb87-56" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-57"><a href="#cb87-57" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin</span><span class="ch">:</span> <span class="dv">16</span><span class="dt">px</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-58"><a href="#cb87-58" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#e7e7e7</span><span class="op">;</span></span>
<span id="cb87-59"><a href="#cb87-59" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">0</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb87-60"><a href="#cb87-60" aria-hidden="true" tabindex="-1"></a>  <span class="kw">overflow</span><span class="ch">:</span> <span class="dv">hidden</span><span class="op">;</span></span>
<span id="cb87-61"><a href="#cb87-61" aria-hidden="true" tabindex="-1"></a>  <span class="kw">box-sizing</span><span class="ch">:</span> <span class="dv">content-box</span><span class="op">;</span></span>
<span id="cb87-62"><a href="#cb87-62" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-63"><a href="#cb87-63" aria-hidden="true" tabindex="-1"></a>li p<span class="fu">.first</span> {<span class="kw">display</span><span class="ch">:</span> <span class="dv">inline-block</span><span class="op">;</span>}</span>
<span id="cb87-64"><a href="#cb87-64" aria-hidden="true" tabindex="-1"></a>ul<span class="op">,</span>ol {<span class="kw">padding-left</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span>}</span>
<span id="cb87-65"><a href="#cb87-65" aria-hidden="true" tabindex="-1"></a>ul<span class="in">:first-child</span><span class="op">,</span>ol<span class="in">:first-child</span> {<span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span>}</span>
<span id="cb87-66"><a href="#cb87-66" aria-hidden="true" tabindex="-1"></a>ul<span class="in">:last-child</span><span class="op">,</span>ol<span class="in">:last-child</span> {<span class="kw">margin-bottom</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span>}</span>
<span id="cb87-67"><a href="#cb87-67" aria-hidden="true" tabindex="-1"></a>blockquote {</span>
<span id="cb87-68"><a href="#cb87-68" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-left</span><span class="ch">:</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#dfe2e5</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-69"><a href="#cb87-69" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">0</span> <span class="dv">15</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-70"><a href="#cb87-70" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">#777777</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-71"><a href="#cb87-71" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#ffffff</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-72"><a href="#cb87-72" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-73"><a href="#cb87-73" aria-hidden="true" tabindex="-1"></a>blockquote blockquote {<span class="kw">padding-right</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span>}</span>
<span id="cb87-74"><a href="#cb87-74" aria-hidden="true" tabindex="-1"></a>table {</span>
<span id="cb87-75"><a href="#cb87-75" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-76"><a href="#cb87-76" aria-hidden="true" tabindex="-1"></a>  <span class="kw">word-break</span><span class="ch">:</span> <span class="bu">initial</span><span class="op">;</span></span>
<span id="cb87-77"><a href="#cb87-77" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-collapse</span><span class="ch">:</span> <span class="dv">collapse</span><span class="op">;</span></span>
<span id="cb87-78"><a href="#cb87-78" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-79"><a href="#cb87-79" aria-hidden="true" tabindex="-1"></a>table tr {</span>
<span id="cb87-80"><a href="#cb87-80" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#dfe2e5</span><span class="op">;</span></span>
<span id="cb87-81"><a href="#cb87-81" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-82"><a href="#cb87-82" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-83"><a href="#cb87-83" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-84"><a href="#cb87-84" aria-hidden="true" tabindex="-1"></a>table tr<span class="in">:nth-child(</span><span class="dv">2</span><span class="dt">n</span><span class="in">)</span><span class="op">,</span>thead {<span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#f8f8f8</span><span class="op">;</span>}</span>
<span id="cb87-85"><a href="#cb87-85" aria-hidden="true" tabindex="-1"></a>table th {</span>
<span id="cb87-86"><a href="#cb87-86" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">normal</span><span class="op">;</span></span>
<span id="cb87-87"><a href="#cb87-87" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="bu">unset</span><span class="op">;</span></span>
<span id="cb87-88"><a href="#cb87-88" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-bottom</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-89"><a href="#cb87-89" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#dfe2e5</span><span class="op">;</span></span>
<span id="cb87-90"><a href="#cb87-90" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-91"><a href="#cb87-91" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">6</span><span class="dt">px</span> <span class="dv">13</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-92"><a href="#cb87-92" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-93"><a href="#cb87-93" aria-hidden="true" tabindex="-1"></a>table td {</span>
<span id="cb87-94"><a href="#cb87-94" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#dfe2e5</span><span class="op">;</span></span>
<span id="cb87-95"><a href="#cb87-95" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-96"><a href="#cb87-96" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">6</span><span class="dt">px</span> <span class="dv">13</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-97"><a href="#cb87-97" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-98"><a href="#cb87-98" aria-hidden="true" tabindex="-1"></a>table th<span class="in">:first-child</span><span class="op">,</span>table td<span class="in">:first-child</span> {<span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span>}</span>
<span id="cb87-99"><a href="#cb87-99" aria-hidden="true" tabindex="-1"></a>table th<span class="in">:last-child</span><span class="op">,</span>table td<span class="in">:last-child</span> {<span class="kw">margin-bottom</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span>}</span>
<span id="cb87-100"><a href="#cb87-100" aria-hidden="true" tabindex="-1"></a>tt {</span>
<span id="cb87-101"><a href="#cb87-101" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#e7eaed</span><span class="op">;</span></span>
<span id="cb87-102"><a href="#cb87-102" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#f8f8f8</span><span class="op">;</span></span>
<span id="cb87-103"><a href="#cb87-103" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-radius</span><span class="ch">:</span> <span class="dv">3</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-104"><a href="#cb87-104" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">px</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">4</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-105"><a href="#cb87-105" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">0.9</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-106"><a href="#cb87-106" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-107"><a href="#cb87-107" aria-hidden="true" tabindex="-1"></a>code {</span>
<span id="cb87-108"><a href="#cb87-108" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#e7eaed</span><span class="op">;</span></span>
<span id="cb87-109"><a href="#cb87-109" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#f3f4f4</span><span class="op">;</span></span>
<span id="cb87-110"><a href="#cb87-110" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-radius</span><span class="ch">:</span> <span class="dv">3</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-111"><a href="#cb87-111" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">0</span> <span class="dv">2</span><span class="dt">px</span> <span class="dv">0</span> <span class="dv">2</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-112"><a href="#cb87-112" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">0.9</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-113"><a href="#cb87-113" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-114"><a href="#cb87-114" aria-hidden="true" tabindex="-1"></a>img {</span>
<span id="cb87-115"><a href="#cb87-115" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb87-116"><a href="#cb87-116" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb87-117"><a href="#cb87-117" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span></span>
<span id="cb87-118"><a href="#cb87-118" aria-hidden="true" tabindex="-1"></a>  <span class="kw">vertical-align</span><span class="ch">:</span> <span class="dv">middle</span><span class="op">;</span></span>
<span id="cb87-119"><a href="#cb87-119" aria-hidden="true" tabindex="-1"></a>  <span class="kw">image-orientation</span><span class="ch">:</span> <span class="dv">from-image</span><span class="op">;</span></span>
<span id="cb87-120"><a href="#cb87-120" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin</span><span class="ch">:</span> <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb87-121"><a href="#cb87-121" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-122"><a href="#cb87-122" aria-hidden="true" tabindex="-1"></a>figcaption {</span>
<span id="cb87-123"><a href="#cb87-123" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb87-124"><a href="#cb87-124" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-125"><a href="#cb87-125" aria-hidden="true" tabindex="-1"></a><span class="im">@page</span> {</span>
<span id="cb87-126"><a href="#cb87-126" aria-hidden="true" tabindex="-1"></a>  <span class="kw">size</span><span class="ch">:</span> <span class="dv">A4</span><span class="op">;</span></span>
<span id="cb87-127"><a href="#cb87-127" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* 调整生成的PDF中上下左右空白的大小 */</span></span>
<span id="cb87-128"><a href="#cb87-128" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin</span><span class="ch">:</span> <span class="dv">14</span><span class="dt">mm</span> <span class="dv">19.5</span><span class="dt">mm</span><span class="op">;</span></span>
<span id="cb87-129"><a href="#cb87-129" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-130"><a href="#cb87-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-131"><a href="#cb87-131" aria-hidden="true" tabindex="-1"></a><span class="co">/* 代码块显示行号，要求代码块的每行最外面有且只有一个span，否则行号会计算出错，目前pandoc测试没问题 */</span></span>
<span id="cb87-132"><a href="#cb87-132" aria-hidden="true" tabindex="-1"></a>pre<span class="op">&gt;</span>code{</span>
<span id="cb87-133"><a href="#cb87-133" aria-hidden="true" tabindex="-1"></a>  <span class="kw">counter-reset</span><span class="ch">:</span> <span class="dv">linenumber</span><span class="op">;</span></span>
<span id="cb87-134"><a href="#cb87-134" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span></span>
<span id="cb87-135"><a href="#cb87-135" aria-hidden="true" tabindex="-1"></a>  <span class="kw">white-space</span><span class="ch">:</span> <span class="dv">pre</span><span class="op">;</span></span>
<span id="cb87-136"><a href="#cb87-136" aria-hidden="true" tabindex="-1"></a>  <span class="kw">overflow</span><span class="ch">:</span> <span class="bu">auto</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-137"><a href="#cb87-137" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">0.2</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-138"><a href="#cb87-138" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-radius</span><span class="ch">:</span> <span class="dv">7</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-139"><a href="#cb87-139" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-140"><a href="#cb87-140" aria-hidden="true" tabindex="-1"></a>pre<span class="op">&gt;</span>code<span class="op">&gt;</span>span {</span>
<span id="cb87-141"><a href="#cb87-141" aria-hidden="true" tabindex="-1"></a>  <span class="kw">counter-increment</span><span class="ch">:</span> <span class="dv">linenumber</span><span class="op">;</span></span>
<span id="cb87-142"><a href="#cb87-142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">inline-block</span><span class="op">;</span></span>
<span id="cb87-143"><a href="#cb87-143" aria-hidden="true" tabindex="-1"></a>  <span class="kw">line-height</span><span class="ch">:</span> <span class="dv">1.25</span><span class="dt">em</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-144"><a href="#cb87-144" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-145"><a href="#cb87-145" aria-hidden="true" tabindex="-1"></a>pre<span class="op">&gt;</span>code<span class="op">&gt;</span>span<span class="in">::before</span> {</span>
<span id="cb87-146"><a href="#cb87-146" aria-hidden="true" tabindex="-1"></a>  <span class="kw">content</span><span class="ch">:</span> <span class="fu">counter(</span><span class="dv">linenumber</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb87-147"><a href="#cb87-147" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">inline-block</span><span class="op">;</span></span>
<span id="cb87-148"><a href="#cb87-148" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">0.9</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-149"><a href="#cb87-149" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">#999</span><span class="op">;</span></span>
<span id="cb87-150"><a href="#cb87-150" aria-hidden="true" tabindex="-1"></a>  <span class="kw">min-width</span><span class="ch">:</span> <span class="dv">1.8</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-151"><a href="#cb87-151" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin-right</span><span class="ch">:</span> <span class="dv">0.5</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-152"><a href="#cb87-152" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding-right</span><span class="ch">:</span> <span class="dv">0.25</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-153"><a href="#cb87-153" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">right</span><span class="op">;</span></span>
<span id="cb87-154"><a href="#cb87-154" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-right</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#999</span><span class="op">;</span></span>
<span id="cb87-155"><a href="#cb87-155" aria-hidden="true" tabindex="-1"></a>  <span class="kw">line-height</span><span class="ch">:</span> <span class="dv">1.9</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb87-156"><a href="#cb87-156" aria-hidden="true" tabindex="-1"></a>  <span class="kw">user-select</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb87-157"><a href="#cb87-157" aria-hidden="true" tabindex="-1"></a>  <span class="kw">pointer-events</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb87-158"><a href="#cb87-158" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-159"><a href="#cb87-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-160"><a href="#cb87-160" aria-hidden="true" tabindex="-1"></a><span class="co">/* pandoc生成的TOC标签的id叫TOC，如果其他软件生成的id或class不一样就需要更改 */</span></span>
<span id="cb87-161"><a href="#cb87-161" aria-hidden="true" tabindex="-1"></a><span class="pp">#TOC</span> {</span>
<span id="cb87-162"><a href="#cb87-162" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">0.8</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb87-163"><a href="#cb87-163" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">fixed</span><span class="op">;</span></span>
<span id="cb87-164"><a href="#cb87-164" aria-hidden="true" tabindex="-1"></a>  <span class="kw">top</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-165"><a href="#cb87-165" aria-hidden="true" tabindex="-1"></a>  <span class="kw">left</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-166"><a href="#cb87-166" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span><span class="ch">:</span> <span class="dv">300</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-167"><a href="#cb87-167" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb87-168"><a href="#cb87-168" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">32</span><span class="dt">px</span> <span class="dv">16</span><span class="dt">px</span> <span class="dv">48</span><span class="dt">px</span> <span class="dv">16</span><span class="dt">px</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-169"><a href="#cb87-169" aria-hidden="true" tabindex="-1"></a>  <span class="kw">box-shadow</span><span class="ch">:</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">4</span><span class="dt">px</span> <span class="fu">rgba(</span><span class="dv">150</span><span class="op">,</span><span class="dv">150</span><span class="op">,</span><span class="dv">150</span><span class="op">,</span><span class="dv">0.33</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb87-170"><a href="#cb87-170" aria-hidden="true" tabindex="-1"></a>  <span class="kw">box-sizing</span><span class="ch">:</span> <span class="dv">border-box</span><span class="op">;</span></span>
<span id="cb87-171"><a href="#cb87-171" aria-hidden="true" tabindex="-1"></a>  <span class="kw">overflow</span><span class="ch">:</span> <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb87-172"><a href="#cb87-172" aria-hidden="true" tabindex="-1"></a>  <span class="kw">scrollbar-color</span><span class="ch">:</span> <span class="cn">#f5f5f5</span><span class="op">;</span></span>
<span id="cb87-173"><a href="#cb87-173" aria-hidden="true" tabindex="-1"></a>  <span class="kw">scrollbar-width</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-174"><a href="#cb87-174" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-175"><a href="#cb87-175" aria-hidden="true" tabindex="-1"></a><span class="pp">#TOC</span><span class="in">::-webkit-scrollbar</span>{</span>
<span id="cb87-176"><a href="#cb87-176" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb87-177"><a href="#cb87-177" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border-right</span><span class="ch">:</span>  <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#f5f5f5</span><span class="op">;</span></span>
<span id="cb87-178"><a href="#cb87-178" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-179"><a href="#cb87-179" aria-hidden="true" tabindex="-1"></a><span class="pp">#TOC</span> a{</span>
<span id="cb87-180"><a href="#cb87-180" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">#333333</span><span class="op">;</span></span>
<span id="cb87-181"><a href="#cb87-181" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-decoration</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb87-182"><a href="#cb87-182" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-183"><a href="#cb87-183" aria-hidden="true" tabindex="-1"></a><span class="pp">#TOC</span> a<span class="in">:hover</span>{</span>
<span id="cb87-184"><a href="#cb87-184" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">#333333</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-185"><a href="#cb87-185" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-decoration</span><span class="ch">:</span> <span class="dv">underline</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb87-186"><a href="#cb87-186" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-187"><a href="#cb87-187" aria-hidden="true" tabindex="-1"></a><span class="pp">#TOC</span> ul { <span class="kw">list-style</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span> }</span>
<span id="cb87-188"><a href="#cb87-188" aria-hidden="true" tabindex="-1"></a><span class="pp">#TOC</span> li { <span class="kw">margin-bottom</span><span class="ch">:</span> <span class="dv">0.25</span><span class="dt">rem</span><span class="op">;</span> }</span>
<span id="cb87-189"><a href="#cb87-189" aria-hidden="true" tabindex="-1"></a><span class="co">/* 屏幕太小则隐藏TOC */</span></span>
<span id="cb87-190"><a href="#cb87-190" aria-hidden="true" tabindex="-1"></a><span class="im">@media</span> <span class="fu">(</span><span class="kw">max-width</span><span class="ch">:</span> <span class="dv">700</span><span class="dt">px</span><span class="fu">)</span> {</span>
<span id="cb87-191"><a href="#cb87-191" aria-hidden="true" tabindex="-1"></a>  <span class="pp">#TOC</span> { <span class="kw">display</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span> }</span>
<span id="cb87-192"><a href="#cb87-192" aria-hidden="true" tabindex="-1"></a>  body { <span class="kw">left</span><span class="ch">:</span> <span class="dv">0</span><span class="dt">px</span><span class="op">;</span> <span class="kw">width</span><span class="ch">:</span> <span class="dv">90</span><span class="dt">%</span><span class="op">;</span> }</span>
<span id="cb87-193"><a href="#cb87-193" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>附一个实现导航栏高亮当前项的javascript，通过<code>-H jsfile.js</code>参数导入：</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="dt">&gt;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">onload</span> <span class="op">=</span> <span class="kw">function</span>(){</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* 点击页内锚点平滑滚动，且不更新地址栏 */</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;a[href^=&quot;#&quot;]&#39;</span>)<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(item<span class="op">,</span>index<span class="op">,</span>arr){</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) {</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>          e<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>          <span class="co">//获取导航项对应的ID锚点的元素，通过ID获取就不会将比如点“.”当作类选择器，可以处理符号冲突</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>          <span class="kw">const</span> target <span class="op">=</span>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="pp">decodeURI</span>((item<span class="op">.</span><span class="at">href</span><span class="op">.</span><span class="fu">substring</span>(item<span class="op">.</span><span class="at">href</span><span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&#39;#&#39;</span>)<span class="op">+</span><span class="dv">1</span>))))<span class="op">;</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span>(target <span class="op">==</span> <span class="kw">null</span>) { <span class="cf">return</span><span class="op">;</span> }</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>          target<span class="op">.</span><span class="fu">scrollIntoView</span>({ <span class="dt">behavior</span><span class="op">:</span> <span class="st">&#39;smooth&#39;</span> })<span class="op">;</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* 调用后，将TOC中当前导航项突出显示 */</span></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> toc_a <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&#39;#TOC a&#39;</span>)<span class="op">;</span></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateTOC</span>(){</span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> scrollPosition <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">scrollY</span><span class="op">;</span><span class="co">//获取页面滚动的垂直位置</span></span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> highlightTarget<span class="op">;</span></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span>toc_a<span class="op">.</span><span class="at">length</span><span class="op">-</span><span class="dv">1</span><span class="op">;</span> i<span class="op">&gt;=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">--</span>){<span class="co">//从后往前遍历，就可以找到最接近当前滚动位置上方的导航项</span></span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> target <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="pp">decodeURI</span>((toc_a[i]<span class="op">.</span><span class="at">href</span><span class="op">.</span><span class="fu">substring</span>(toc_a[i]<span class="op">.</span><span class="at">href</span><span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&#39;#&#39;</span>)<span class="op">+</span><span class="dv">1</span>))))<span class="op">;</span><span class="co">//获取导航项对应的ID锚点的元素</span></span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(target <span class="op">==</span> <span class="kw">null</span>) { <span class="cf">continue</span><span class="op">;</span> }</span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> ItemPosition <span class="op">=</span> target<span class="op">.</span><span class="at">offsetTop</span><span class="op">;</span><span class="co">//获取元素的垂直位置</span></span>
<span id="cb88-23"><a href="#cb88-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (scrollPosition <span class="op">&gt;</span> ItemPosition <span class="op">&amp;&amp;</span> <span class="kw">typeof</span>(highlightTarget) <span class="op">==</span> <span class="st">&quot;undefined&quot;</span>) {<span class="co">//判断元素位置是否在当前滚动位置的上方</span></span>
<span id="cb88-24"><a href="#cb88-24" aria-hidden="true" tabindex="-1"></a>        highlightTarget <span class="op">=</span> toc_a[i]<span class="op">;</span><span class="co">//记录要高亮的导航项</span></span>
<span id="cb88-25"><a href="#cb88-25" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span>(<span class="kw">typeof</span>(highlightTarget) <span class="op">==</span> <span class="st">&quot;undefined&quot;</span> <span class="op">&amp;&amp;</span> i <span class="op">==</span> <span class="dv">0</span>) {<span class="co">//要是文章上方有的部分没有导航项与之对应，则将第一个导航项突出显示</span></span>
<span id="cb88-26"><a href="#cb88-26" aria-hidden="true" tabindex="-1"></a>        highlightTarget <span class="op">=</span> toc_a[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb88-27"><a href="#cb88-27" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb88-28"><a href="#cb88-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb88-29"><a href="#cb88-29" aria-hidden="true" tabindex="-1"></a>    toc_a<span class="op">.</span><span class="fu">forEach</span>( item <span class="kw">=&gt;</span> {</span>
<span id="cb88-30"><a href="#cb88-30" aria-hidden="true" tabindex="-1"></a>      item<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">fontWeight</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span><span class="co">//移除所有的突出显示样式</span></span>
<span id="cb88-31"><a href="#cb88-31" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb88-32"><a href="#cb88-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="kw">typeof</span>(highlightTarget) <span class="op">==</span> <span class="st">&quot;undefined&quot;</span>) { <span class="cf">return</span><span class="op">;</span> }</span>
<span id="cb88-33"><a href="#cb88-33" aria-hidden="true" tabindex="-1"></a>    highlightTarget<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">fontWeight</span> <span class="op">=</span> <span class="st">&quot;bold&quot;</span><span class="op">;</span><span class="co">//给当前的导航项添加突出显示样式</span></span>
<span id="cb88-34"><a href="#cb88-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span><span class="fu">isInViewPort</span>(highlightTarget)){<span class="co">//如果当前的导航项超出可视区域，那么就将导航项垂直居中</span></span>
<span id="cb88-35"><a href="#cb88-35" aria-hidden="true" tabindex="-1"></a>      highlightTarget<span class="op">.</span><span class="fu">scrollIntoView</span>({ <span class="dt">block</span><span class="op">:</span> <span class="st">&quot;center&quot;</span>})<span class="op">;</span></span>
<span id="cb88-36"><a href="#cb88-36" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb88-37"><a href="#cb88-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb88-38"><a href="#cb88-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">//判断元素是否在可视区域内</span></span>
<span id="cb88-39"><a href="#cb88-39" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">isInViewPort</span>(dom) {</span>
<span id="cb88-40"><a href="#cb88-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> viewHeight <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerHeight</span> <span class="op">||</span> <span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">.</span><span class="at">clientHeight</span><span class="op">;</span></span>
<span id="cb88-41"><a href="#cb88-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> viewWidth <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerWidth</span> <span class="op">||</span> <span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">.</span><span class="at">clientWidth</span><span class="op">;</span></span>
<span id="cb88-42"><a href="#cb88-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { top<span class="op">,</span> right<span class="op">,</span> bottom<span class="op">,</span> left } <span class="op">=</span> dom<span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">;</span><span class="co">//当滚动条滚动时，top, left, bottom, right时刻会发生改变。</span></span>
<span id="cb88-43"><a href="#cb88-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">//如果一个元素在视窗之内，那么它的top、left大于等于0，且bottom、right小于等于视窗宽度</span></span>
<span id="cb88-44"><a href="#cb88-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (top <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> left <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> right <span class="op">&lt;=</span> viewWidth <span class="op">&amp;&amp;</span> bottom <span class="op">&lt;=</span> viewHeight)<span class="op">;</span></span>
<span id="cb88-45"><a href="#cb88-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb88-46"><a href="#cb88-46" aria-hidden="true" tabindex="-1"></a>  <span class="co">//停止滚动200ms后才更新TOC</span></span>
<span id="cb88-47"><a href="#cb88-47" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb88-48"><a href="#cb88-48" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;scroll&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb88-49"><a href="#cb88-49" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="fu">clearTimeout</span>(timer)<span class="op">;</span></span>
<span id="cb88-50"><a href="#cb88-50" aria-hidden="true" tabindex="-1"></a>    timer <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">setTimeout</span>(() <span class="kw">=&gt;</span> { <span class="fu">updateTOC</span>() }<span class="op">,</span> <span class="dv">200</span>)<span class="op">;</span></span>
<span id="cb88-51"><a href="#cb88-51" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb88-52"><a href="#cb88-52" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb88-53"><a href="#cb88-53" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code></pre></div>
<p>如果想让超链接（页内锚点除外）在新标签页打开，可以在head中插入如下代码：</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">base</span><span class="ot"> target</span><span class="op">=</span><span class="st">&quot;_blank&quot;</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Windows下使用pandoc批量转换markdown文件（使用前根据目录结构建好文件夹并放入文件）：</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">echo</span> off</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>chcp <span class="dv">65001</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="dt">SET</span> root_dir<span class="op">=%</span><span class="fu">cd</span><span class="op">%</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="fu">SET</span> source<span class="op">=%</span>root_dir<span class="op">%</span>\_source</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">SET</span> lib<span class="op">=%</span>root_dir<span class="op">%</span>\_lib</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="fu">SET</span> output<span class="op">=%</span>root_dir<span class="op">%</span>\output</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>mkdir <span class="op">%</span>output<span class="op">%</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">/</span><span class="fu">R</span> <span class="op">%</span>source<span class="op">%</span> <span class="op">%%</span>i <span class="kw">in</span> <span class="op">(*.</span><span class="fu">md</span><span class="op">)</span> <span class="cf">do</span> <span class="op">(</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cd</span> <span class="op">%%~</span>dpi</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">echo</span> processing <span class="op">%%~</span><span class="fu">ni</span><span class="op">%%~</span>xi</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>  cmd <span class="op">/</span>c pandoc <span class="op">-</span>s <span class="op">--</span>toc <span class="op">--</span>toc-depth<span class="op">=</span><span class="dv">6</span> <span class="op">--</span>katex<span class="op">=</span><span class="st">&quot;file:///%lib:\=/%/katex/&quot;</span> <span class="op">--</span>css<span class="op">=</span><span class="st">&quot;%lib%\blog.css&quot;</span> <span class="op">-</span>H <span class="st">&quot;%lib%\blog.js&quot;</span> <span class="op">--</span>embed-resources <span class="op">--</span>metadata title<span class="op">=</span><span class="st">&quot;%%~ni&quot;</span> <span class="op">%%</span>i <span class="op">-</span>o <span class="st">&quot;%output%\%%~ni.html&quot;</span></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cd</span> <span class="op">%</span>root_dir<span class="op">%</span></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>pause</span></code></pre></div>
<p>Linux下使用pandoc批量转换markdown文件（使用前根据目录结构建好文件夹并放入文件）：</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="va">root_dir</span><span class="op">=</span><span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="va">source</span><span class="op">=</span><span class="st">&quot;</span><span class="va">${root_dir}</span><span class="st">/_source&quot;</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="va">lib</span><span class="op">=</span><span class="st">&quot;</span><span class="va">${root_dir}</span><span class="st">/_lib&quot;</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="va">output</span><span class="op">=</span><span class="st">&quot;</span><span class="va">${root_dir}</span><span class="st">/output&quot;</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="st">&quot;</span><span class="va">${output}</span><span class="st">&quot;</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span><span class="fu"> read_dir()</span> <span class="kw">{</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> file <span class="kw">in</span> <span class="kw">`</span><span class="fu">ls</span> <span class="va">$1</span><span class="kw">`;</span> <span class="cf">do</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">[</span> <span class="ot">-d</span> <span class="st">&quot;</span><span class="va">${1}</span><span class="st">/</span><span class="va">${file}</span><span class="st">&quot;</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>      <span class="co"># 如果是文件夹，则递归</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>      <span class="ex">read_dir</span> <span class="st">&quot;</span><span class="va">${1}</span><span class="st">/</span><span class="va">${file}</span><span class="st">&quot;</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>      <span class="co"># 如果是文件，则执行命令</span></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${file}</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-q</span> <span class="at">-E</span> <span class="st">&#39;\.md$&#39;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;processing </span><span class="va">${file}</span><span class="st">&quot;</span></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">cd</span> <span class="va">$1</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a>        <span class="va">${lib}</span><span class="ex">/pandoc/bin/pandoc</span> <span class="at">-s</span> <span class="at">--toc</span> <span class="at">--toc-depth</span><span class="op">=</span>6 <span class="at">--katex</span><span class="op">=</span><span class="st">&quot;file:///</span><span class="va">${lib}</span><span class="st">/katex/&quot;</span> <span class="at">--css</span><span class="op">=</span><span class="st">&quot;</span><span class="va">${lib}</span><span class="st">/blog.css&quot;</span> <span class="at">-H</span> <span class="st">&quot;</span><span class="va">${lib}</span><span class="st">/blog.js&quot;</span> <span class="at">--embed-resources</span> <span class="at">--metadata</span> title=<span class="st">&quot;</span><span class="va">${file</span><span class="op">%%</span>.<span class="pp">*</span><span class="va">}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">${1}</span><span class="st">/</span><span class="va">${file}</span><span class="st">&quot;</span> <span class="at">-o</span> <span class="st">&quot;</span><span class="va">${output}</span><span class="st">/</span><span class="va">${file</span><span class="op">%%</span>.<span class="pp">*</span><span class="va">}</span><span class="st">.html&quot;</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">cd</span> <span class="va">${root_dir}</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>      <span class="cf">fi</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">done</span></span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a><span class="ex">read_dir</span> <span class="va">${source}</span></span></code></pre></div>
<p><strong>VSCode</strong></p>
<p>1、安装Markdown All in One、Markdown Preview Enhanced插件，然后下载<a href="https://www.princexml.com/download/">prince</a>，并将prince的exe所在目录添加进Path环境变量；</p>
<p>2、打开VSCode，按<code>Ctrl+Shift+P</code>，输入Markdown Preview
Enhanced: Customize Css，文件结构如下：</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* .markdown-preview.markdown-preview是正文部分的div的class */</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">.markdown-preview.markdown-preview</span> {</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* css... */</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span><span class="fu">.prince</span> {</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* prince专属配置（可以覆盖外面写的css，可以把pdf和html不同的部分放进来，必须放在这里才能生效） */</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">10.5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* css... */</span></span></code></pre></div>
<p>将前面pandoc的css稍作修改即可：</p>
<ul>
<li>直接把css复制过去，然后把<code>body</code>选择器改为<code>.markdown-preview.markdown-preview</code>（像字体大小这些必须这样设置才能生效）；</li>
<li>不要复制给代码块加行号的那部分css，否则行号显示会出错；</li>
<li>把TOC部分的选择器改为类选择器<code>.md-toc</code>；</li>
<li>VSCode会给生成的html赋予默认样式，有些样式需要覆盖：</li>
</ul>
<div class="sourceCode" id="cb93"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 去除TOC前面的三角形、正方形等list图标 */</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">.md-toc</span> summary { <span class="kw">list-style</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span> }</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">.md-toc</span> summary<span class="in">::-webkit-details-marker</span> { <span class="kw">display</span><span class="ch">:</span><span class="dv">none</span><span class="op">;</span> }</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="fu">.md-toc</span> details div {</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">list-style</span><span class="ch">:</span> <span class="dv">none</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* 去掉TOC中奇怪的空行 */</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.md-toc</span> ol {<span class="kw">margin-bottom</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span>}</span></code></pre></div>
<ul>
<li>可以添加一些VSCode支持的功能，比如给生成的PDF添加专属设置：</li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="op">&amp;</span><span class="fu">.prince</span> {</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* pdf需更改字体大小，且不需要自己设置TOC，要删掉为TOC预留的位置 */</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">10.5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">static</span><span class="op">;</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">top</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">left</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  <span class="im">@page</span> {</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="im">@bottom</span> {</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>      <span class="co">/* PDF底部加页码（放在.markdown-preview.markdown-preview或&amp;.prince等里面才会生效） */</span></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>      font-family<span class="in">:</span> Microsoft YaHei;</span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>      font-size<span class="in">:</span> 0<span class="fu">.5rem</span>;</span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>      content<span class="in">:</span> counter<span class="in">(</span>page<span class="in">)</span> &quot;/&quot; counter<span class="in">(</span>pages<span class="in">)</span></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>3、如果要生成带侧边栏TOC的html，进入VSCode的插件选项-&gt;进入Markdown
Preview Enhanced插件的设置-&gt;找到Enable Script
Execution并勾选，并在md文件的最前面加上如下代码（其中<code>embed_local_images</code>如果被设置为true，那么所有的本地图片将会以base64的形式嵌入到html中）：</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">embed_local_images</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">depth_from</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">depth_to</span><span class="kw">:</span><span class="at"> </span><span class="dv">6</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ordered</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>4、VSCode打开markdown文档-&gt;右键-&gt;MPE打开侧边预览，右边打开的窗口-&gt;右键-&gt;PDF(prince)-&gt;生成pdf文件；右键-&gt;HTML-&gt;HTML(offline)-&gt;生成html；</p>
<p><strong>Typora</strong></p>
<p>如果Typora想把markdown中使用的图片以base64的形式嵌入到导出的html中，需要下载<a href="https://github.com/EdenHell/compact_html/releases">compact_html</a>，并在Typora设置-&gt;导出-&gt;html-&gt;勾选运行自定义命令-&gt;输入<code>&quot;D:\compact_html.exe&quot; &quot;${outputPath}&quot;</code>（改为你的compact_html.exe路径）</p>
<p><strong>Hexo</strong></p>
<p>Hexo基于Node.js，因此可以使用Node.js的gulp，来实现将图片以base64的形式嵌入到导出的html中，并将公式由mathjax转为svg，同时还可以精简html。</p>
<p>先安装所需模块：</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gulp要安装两次，一次全局，一次项目内</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> npm install <span class="at">--global</span> gulp-cli</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install gulp <span class="at">--save-dev</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install gulp-mathjax-page <span class="at">--save-dev</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install gulp-html-minifier <span class="at">--save-dev</span></span></code></pre></div>
<p>然后新建gulpfile.js如下（Hexo生成的html在<code>./public</code>下，如果是其他路径就自行更改）：</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> gulp <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;gulp&#39;</span>)<span class="op">;</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> mathjax <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;gulp-mathjax-page&#39;</span>)<span class="op">;</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> htmlmin <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;gulp-html-minifier&#39;</span>)<span class="op">;</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">img2base64</span>(){</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> through <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;through2&#39;</span>)<span class="op">;</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> path <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> fs <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">transferImage</span>(file<span class="op">,</span> encoding<span class="op">,</span> callback){</span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (file<span class="op">.</span><span class="fu">isNull</span>()) {</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fu">callback</span>(<span class="kw">null</span><span class="op">,</span> file)<span class="op">;</span></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (file<span class="op">.</span><span class="fu">isStream</span>()) {</span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fu">callback</span>(<span class="fu">createError</span>(file<span class="op">,</span> <span class="st">&#39;Streaming not supported&#39;</span>))<span class="op">;</span></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> content <span class="op">=</span> file<span class="op">.</span><span class="at">contents</span><span class="op">.</span><span class="fu">toString</span>()<span class="op">;</span></span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">//比如音频，regx则是  /(&lt;source[\s\S]*?src\s*=\s*[\&quot;|\&#39;])(.*?)([\&quot;|\&#39;][\s\S]*?&gt;)/g</span></span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> rule <span class="op">=</span> <span class="ss">/</span><span class="sc">(</span><span class="ss">&lt;img</span><span class="sc">[\s\S]*?</span><span class="ss">src</span><span class="sc">\s*</span><span class="ss">=</span><span class="sc">\s*[\&quot;|\&#39;])(</span><span class="ss">.</span><span class="sc">*?)([\&quot;|\&#39;][\s\S]*?</span><span class="ss">&gt;</span><span class="sc">)</span><span class="ss">/g</span><span class="op">;</span><span class="co">//注意，这样无法排除注释里的img标签，如果找不到对应的图片，会报错</span></span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> imgList <span class="op">=</span> content<span class="op">.</span><span class="fu">match</span>(rule) <span class="op">||</span> []<span class="op">;</span></span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (imgList<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a>            imgList<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(item) {</span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> imageURL <span class="op">=</span> item<span class="op">.</span><span class="fu">replace</span>(rule<span class="op">,</span> <span class="st">&#39;$2&#39;</span>)<span class="op">;</span></span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span>(imageURL<span class="op">.</span><span class="fu">startsWith</span>(<span class="st">&quot;data&quot;</span>)){<span class="co">//防止已经base64转码的src再转码</span></span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb97-27"><a href="#cb97-27" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span>(<span class="ss">/</span><span class="sc">^</span><span class="ss">http</span><span class="sc">|</span><span class="ss">https:/</span><span class="op">.</span><span class="fu">test</span>(imageURL)) {<span class="co">//排除网络图片</span></span>
<span id="cb97-28"><a href="#cb97-28" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb97-29"><a href="#cb97-29" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb97-30"><a href="#cb97-30" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> route <span class="op">=</span> path<span class="op">.</span><span class="fu">join</span>(<span class="bu">__dirname</span><span class="op">,</span> <span class="st">&#39;public&#39;</span><span class="op">,</span> <span class="pp">decodeURI</span>(imageURL<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">\/</span><span class="ss">prefix/</span><span class="op">,</span><span class="st">&#39;&#39;</span>)))<span class="op">;</span><span class="co">//生成的图片地址和实际文件路径不一样，需要修正（自行更改）</span></span>
<span id="cb97-31"><a href="#cb97-31" aria-hidden="true" tabindex="-1"></a>                <span class="cf">try</span>{</span>
<span id="cb97-32"><a href="#cb97-32" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> filepath <span class="op">=</span> fs<span class="op">.</span><span class="fu">realpathSync</span>(route)<span class="op">;</span></span>
<span id="cb97-33"><a href="#cb97-33" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> imageContent <span class="op">=</span> <span class="bu">Buffer</span><span class="op">.</span><span class="fu">from</span>(fs<span class="op">.</span><span class="fu">readFileSync</span>(filepath))<span class="op">.</span><span class="fu">toString</span>(<span class="st">&#39;base64&#39;</span>)<span class="op">;</span></span>
<span id="cb97-34"><a href="#cb97-34" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> extname <span class="op">=</span> path<span class="op">.</span><span class="fu">extname</span>(imageURL)<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb97-35"><a href="#cb97-35" aria-hidden="true" tabindex="-1"></a>                    <span class="co">//比如音频，base64的开头则是  data:audio/mpeg;base64,</span></span>
<span id="cb97-36"><a href="#cb97-36" aria-hidden="true" tabindex="-1"></a>                    content <span class="op">=</span> content<span class="op">.</span><span class="fu">replace</span>(item<span class="op">,</span> item<span class="op">.</span><span class="fu">replace</span>(imageURL<span class="op">,</span><span class="st">&#39;data:image/&#39;</span> <span class="op">+</span> extname<span class="op">.</span><span class="fu">toLowerCase</span>() <span class="op">+</span> <span class="st">&#39;;base64,&#39;</span> <span class="op">+</span> imageContent))<span class="op">;</span></span>
<span id="cb97-37"><a href="#cb97-37" aria-hidden="true" tabindex="-1"></a>                }<span class="cf">catch</span>(err){</span>
<span id="cb97-38"><a href="#cb97-38" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(err)<span class="op">;</span><span class="co">//文件不存在就输出错误然后跳过</span></span>
<span id="cb97-39"><a href="#cb97-39" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb97-40"><a href="#cb97-40" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb97-41"><a href="#cb97-41" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb97-42"><a href="#cb97-42" aria-hidden="true" tabindex="-1"></a>        file<span class="op">.</span><span class="at">contents</span> <span class="op">=</span> <span class="bu">Buffer</span><span class="op">.</span><span class="fu">from</span>(content)<span class="op">;</span></span>
<span id="cb97-43"><a href="#cb97-43" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">push</span>(file)<span class="op">;</span></span>
<span id="cb97-44"><a href="#cb97-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">callback</span>(<span class="kw">null</span><span class="op">,</span> file)<span class="op">;</span></span>
<span id="cb97-45"><a href="#cb97-45" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb97-46"><a href="#cb97-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> through<span class="op">.</span><span class="fu">obj</span>(transferImage)<span class="op">;</span></span>
<span id="cb97-47"><a href="#cb97-47" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb97-48"><a href="#cb97-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-49"><a href="#cb97-49" aria-hidden="true" tabindex="-1"></a>gulp<span class="op">.</span><span class="fu">task</span>(<span class="st">&#39;mytask1&#39;</span><span class="op">,</span> <span class="kw">async</span>() <span class="kw">=&gt;</span> {</span>
<span id="cb97-50"><a href="#cb97-50" aria-hidden="true" tabindex="-1"></a>    gulp<span class="op">.</span><span class="fu">src</span>(<span class="st">&#39;./public/**/*.html&#39;</span>)</span>
<span id="cb97-51"><a href="#cb97-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">pipe</span>(<span class="fu">mathjax</span>({ <span class="co">//latex公式生成svg</span></span>
<span id="cb97-52"><a href="#cb97-52" aria-hidden="true" tabindex="-1"></a>        <span class="dt">mjpageConfig</span><span class="op">:</span> {</span>
<span id="cb97-53"><a href="#cb97-53" aria-hidden="true" tabindex="-1"></a>            <span class="dt">format</span><span class="op">:</span> [<span class="st">&#39;TeX&#39;</span>]<span class="op">,</span></span>
<span id="cb97-54"><a href="#cb97-54" aria-hidden="true" tabindex="-1"></a>            <span class="dt">singleDollars</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb97-55"><a href="#cb97-55" aria-hidden="true" tabindex="-1"></a>            <span class="dt">cssInline</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb97-56"><a href="#cb97-56" aria-hidden="true" tabindex="-1"></a>            <span class="dt">mhchem</span><span class="op">:</span> {<span class="dt">legacy</span><span class="op">:</span> <span class="kw">true</span>}</span>
<span id="cb97-57"><a href="#cb97-57" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb97-58"><a href="#cb97-58" aria-hidden="true" tabindex="-1"></a>        <span class="dt">mjnodeConfig</span><span class="op">:</span> {</span>
<span id="cb97-59"><a href="#cb97-59" aria-hidden="true" tabindex="-1"></a>            <span class="dt">svg</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb97-60"><a href="#cb97-60" aria-hidden="true" tabindex="-1"></a>            <span class="dt">css</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb97-61"><a href="#cb97-61" aria-hidden="true" tabindex="-1"></a>            <span class="dt">speakText</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb97-62"><a href="#cb97-62" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb97-63"><a href="#cb97-63" aria-hidden="true" tabindex="-1"></a>    }))</span>
<span id="cb97-64"><a href="#cb97-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">pipe</span>(<span class="fu">img2base64</span>())<span class="co">//图片转base64嵌入到html中</span></span>
<span id="cb97-65"><a href="#cb97-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">pipe</span>(<span class="fu">htmlmin</span>({</span>
<span id="cb97-66"><a href="#cb97-66" aria-hidden="true" tabindex="-1"></a>        <span class="dt">removeComments</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span><span class="co">//清除HTML注释</span></span>
<span id="cb97-67"><a href="#cb97-67" aria-hidden="true" tabindex="-1"></a>        <span class="dt">collapseBooleanAttributes</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span><span class="co">//省略布尔属性的值 &lt;input checked=&quot;true&quot;/&gt; ==&gt; &lt;input /&gt;</span></span>
<span id="cb97-68"><a href="#cb97-68" aria-hidden="true" tabindex="-1"></a>        <span class="dt">removeEmptyAttributes</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span><span class="co">//删除所有空格作属性值 &lt;input id=&quot;&quot; /&gt; ==&gt; &lt;input /&gt;</span></span>
<span id="cb97-69"><a href="#cb97-69" aria-hidden="true" tabindex="-1"></a>        <span class="dt">collapseWhitespace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span><span class="co">//压缩HTML</span></span>
<span id="cb97-70"><a href="#cb97-70" aria-hidden="true" tabindex="-1"></a>        <span class="dt">minifyJS</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span><span class="co">//压缩页面JS</span></span>
<span id="cb97-71"><a href="#cb97-71" aria-hidden="true" tabindex="-1"></a>        <span class="dt">minifyCSS</span><span class="op">:</span> <span class="kw">true</span><span class="co">//压缩页面CSS</span></span>
<span id="cb97-72"><a href="#cb97-72" aria-hidden="true" tabindex="-1"></a>    }))</span>
<span id="cb97-73"><a href="#cb97-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">pipe</span>(gulp<span class="op">.</span><span class="fu">dest</span>(<span class="st">&#39;./public&#39;</span>))</span>
<span id="cb97-74"><a href="#cb97-74" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>最后执行<code>gulp mytask1</code></p>
<p>关于使用Markdown的一些注意事项：</p>
<p>1、由于Windows和Linux路径分隔符不一样，插入的外部文件（如图片）不要带路径，最好和markdown文件放在同一目录，直接写文件名即可；</p>
<p>2、标题尽量不要出现Latex公式，否则生成的HTML或PDF的TOC点击后无法跳转（对于HTML可以F12改一下锚点id）；</p>
<p>3、尽量不要对Latex公式加粗、斜体、高亮、下划线、删除线等，像VSCode和MarkText就不会解析这些<code>**</code>和<code>==</code>等，而是直接显示到生成的HTML中；</p>
<p>4、行内公式要用两个<code>$</code>包裹，而不要用两个<code>$$</code>包裹；单独一行的公式（即用两个<code>$$</code>包裹的）不仅<code>$$</code>要换行，而且<code>$$</code>前后都要留有空行，否则MarkText不能正确解析；</p>
<p>5、如果公式要换行，要使用环境包裹，比如<code>\begin{aligned}...\end{aligned}</code>或<code>\begin{array}{cc}...\end{array}</code>等，而且要用<code>\\</code>换行，而不要用<code>\newline</code>，否则pandoc的mathml无法识别；</p>
<p>6、虚线分割的矩阵，包括<code>\begin{array}{cc:c}...\end{array}</code>和<code>\hdashline</code>，pandoc的mathml都无法识别；</p>
<p>7、微分符号要写做<code>\mathrm{d}</code>，不要简写为<code>\rm d</code>，否则pandoc的mathml无法识别；</p>
<p>8、pandoc的mathml不支持<code>verb|...|</code>（其中两边的<code>|</code>可以换成任意除字母、空格、星号外的任意不与之间内容冲突的符号，只是习惯用<code>|</code>）；</p>
<p>9、Latex中的中文最好用<code>\text{...}</code>包裹，否则pandoc的KaTex导出的html会报warning；</p>
<p>10、空集最好写<code>\emptyset</code>，而不要写做<code>\empty</code>，否则VSCode可能不识别（更新后好像已经支持了）；</p>
<p>11、尽量不要出现两个连续的大括号，比如<code>{{xxx}}</code>，否则会与hexo的语法冲突，报错Nunjucks
Error；</p>
<p>12、尽量统一换行符，比如用Linux换行符<code>\n</code>，并统一使用UTF-8。</p>
<h2 id="adb常用命令">adb常用命令</h2>
<p>SDK Platform Tools下载地址：<a href="https://developer.android.com/tools/releases/platform-tools">官网</a>、<a href="https://developer.android.google.cn/studio/releases/platform-tools">国内专用</a></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co">#启动adb服务</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> start-server</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co">#关闭adb服务</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> kill-server</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="co">#查看连接adb的设备</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> devices</span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="co">#使用基于pair的无线调试</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> pair <span class="op">&lt;</span>IP<span class="pp">[</span><span class="ss">:PORT</span><span class="pp">]</span><span class="op">&gt;</span> [PAIRING CODE]</span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co">#连接网络设备</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> connect <span class="op">&lt;</span>IP<span class="pp">[</span><span class="ss">:PORT</span><span class="pp">]</span><span class="op">&gt;</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a><span class="co">#断开网络设备的链接</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> disconnect [IP<span class="pp">[</span><span class="ss">:PORT</span><span class="pp">]</span>]</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a><span class="co">#重启手机</span></span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> reboot</span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="co">#通过adb进入bootloader：</span></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> reboot bootloader</span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a><span class="co">#通过adb进入recovery：</span></span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> reboot recovery</span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a><span class="co">#重新挂载文件系统</span></span>
<span id="cb98-22"><a href="#cb98-22" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> remount</span>
<span id="cb98-23"><a href="#cb98-23" aria-hidden="true" tabindex="-1"></a><span class="co">#获取su权限</span></span>
<span id="cb98-24"><a href="#cb98-24" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell su</span>
<span id="cb98-25"><a href="#cb98-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-26"><a href="#cb98-26" aria-hidden="true" tabindex="-1"></a><span class="co">#获取当前（前台）用户的ID</span></span>
<span id="cb98-27"><a href="#cb98-27" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am get-current-user</span>
<span id="cb98-28"><a href="#cb98-28" aria-hidden="true" tabindex="-1"></a><span class="co">#获取所有现有用户的列表</span></span>
<span id="cb98-29"><a href="#cb98-29" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm list users</span>
<span id="cb98-30"><a href="#cb98-30" aria-hidden="true" tabindex="-1"></a><span class="co">#查看支持最多用户数</span></span>
<span id="cb98-31"><a href="#cb98-31" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm get-max-users</span>
<span id="cb98-32"><a href="#cb98-32" aria-hidden="true" tabindex="-1"></a><span class="co">#创建新用户并返回ID</span></span>
<span id="cb98-33"><a href="#cb98-33" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm create-user <span class="op">&lt;</span>userName<span class="op">&gt;</span></span>
<span id="cb98-34"><a href="#cb98-34" aria-hidden="true" tabindex="-1"></a><span class="co">#按ID移除特定用户</span></span>
<span id="cb98-35"><a href="#cb98-35" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm remove-user <span class="op">&lt;</span>userId<span class="op">&gt;</span></span>
<span id="cb98-36"><a href="#cb98-36" aria-hidden="true" tabindex="-1"></a><span class="co">#按ID启动用户</span></span>
<span id="cb98-37"><a href="#cb98-37" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am start-user <span class="op">&lt;</span>userId<span class="op">&gt;</span></span>
<span id="cb98-38"><a href="#cb98-38" aria-hidden="true" tabindex="-1"></a><span class="co">#按ID将新用户切到前台来</span></span>
<span id="cb98-39"><a href="#cb98-39" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am switch-user <span class="op">&lt;</span>userId<span class="op">&gt;</span></span>
<span id="cb98-40"><a href="#cb98-40" aria-hidden="true" tabindex="-1"></a><span class="co">#查看切换用户是否成功（u0即表示userId=0的用户应用正处于前台）</span></span>
<span id="cb98-41"><a href="#cb98-41" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell dumpsys activity a <span class="kw">|</span> <span class="ex">adb</span> shell grep <span class="st">&#39;Hist &#39;</span></span>
<span id="cb98-42"><a href="#cb98-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-43"><a href="#cb98-43" aria-hidden="true" tabindex="-1"></a><span class="co">#所有应用列表：</span></span>
<span id="cb98-44"><a href="#cb98-44" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm list packages</span>
<span id="cb98-45"><a href="#cb98-45" aria-hidden="true" tabindex="-1"></a><span class="co">#为特定用户列出软件包</span></span>
<span id="cb98-46"><a href="#cb98-46" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm list packages <span class="at">--user</span> <span class="op">&lt;</span>userId<span class="op">&gt;</span></span>
<span id="cb98-47"><a href="#cb98-47" aria-hidden="true" tabindex="-1"></a><span class="co">#查找某个app</span></span>
<span id="cb98-48"><a href="#cb98-48" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm list packages <span class="st">&quot;关键字&quot;</span></span>
<span id="cb98-49"><a href="#cb98-49" aria-hidden="true" tabindex="-1"></a><span class="co">#系统应用列表：</span></span>
<span id="cb98-50"><a href="#cb98-50" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm list packages <span class="at">-s</span></span>
<span id="cb98-51"><a href="#cb98-51" aria-hidden="true" tabindex="-1"></a><span class="co">#已停用的系统应用列表：</span></span>
<span id="cb98-52"><a href="#cb98-52" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm list packages <span class="at">-s</span> <span class="at">-d</span></span>
<span id="cb98-53"><a href="#cb98-53" aria-hidden="true" tabindex="-1"></a><span class="co">#已启用的系统应用列表：</span></span>
<span id="cb98-54"><a href="#cb98-54" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm list packages <span class="at">-s</span> <span class="at">-e</span></span>
<span id="cb98-55"><a href="#cb98-55" aria-hidden="true" tabindex="-1"></a><span class="co">#查看某个应用的详细信息</span></span>
<span id="cb98-56"><a href="#cb98-56" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell dumpsys package <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-57"><a href="#cb98-57" aria-hidden="true" tabindex="-1"></a><span class="co">#打开app（比如：adb shell am start -n com.topjohnwu.magisk/com.topjohnwu.magisk.ui.MainActivity）</span></span>
<span id="cb98-58"><a href="#cb98-58" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am start <span class="at">-n</span> 包名/包名.活动名</span>
<span id="cb98-59"><a href="#cb98-59" aria-hidden="true" tabindex="-1"></a><span class="co">#打开指定用户下的app</span></span>
<span id="cb98-60"><a href="#cb98-60" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am start <span class="at">--user</span> <span class="op">&lt;</span>userId<span class="op">&gt;</span> 包名/包名.活动名</span>
<span id="cb98-61"><a href="#cb98-61" aria-hidden="true" tabindex="-1"></a><span class="co">#以action的方式打开app（以打开输入法设置为例）</span></span>
<span id="cb98-62"><a href="#cb98-62" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am start <span class="at">-a</span> android.settings.INPUT_METHOD_SETTINGS</span>
<span id="cb98-63"><a href="#cb98-63" aria-hidden="true" tabindex="-1"></a><span class="co">#以指定category的方式打开app（以打开通讯录为例）</span></span>
<span id="cb98-64"><a href="#cb98-64" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am start <span class="at">-c</span> android.intent.category.APP_CONTACTS</span>
<span id="cb98-65"><a href="#cb98-65" aria-hidden="true" tabindex="-1"></a><span class="co">#结合起来用</span></span>
<span id="cb98-66"><a href="#cb98-66" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am start <span class="at">-a</span> android.intent.action.MAIN <span class="at">-c</span> android.intent.category.LAUNCHER <span class="at">-n</span> 包名/包名.活动名</span>
<span id="cb98-67"><a href="#cb98-67" aria-hidden="true" tabindex="-1"></a><span class="co">#启动服务</span></span>
<span id="cb98-68"><a href="#cb98-68" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am startservice 包名/.活动名</span>
<span id="cb98-69"><a href="#cb98-69" aria-hidden="true" tabindex="-1"></a><span class="co">#恢复出厂设置</span></span>
<span id="cb98-70"><a href="#cb98-70" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am broadcast <span class="at">-a</span> android.intent.action.MASTER_CLEAR</span>
<span id="cb98-71"><a href="#cb98-71" aria-hidden="true" tabindex="-1"></a><span class="co">#强行停止与该app关联的所有进程</span></span>
<span id="cb98-72"><a href="#cb98-72" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am force-stop <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-73"><a href="#cb98-73" aria-hidden="true" tabindex="-1"></a><span class="co">#终止所有后台进程</span></span>
<span id="cb98-74"><a href="#cb98-74" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell am kill-all</span>
<span id="cb98-75"><a href="#cb98-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-76"><a href="#cb98-76" aria-hidden="true" tabindex="-1"></a><span class="co">#安装app（可以使用-g参数在安装时直接授予所有所需权限、-r替换已存在应用（即保留数据并安装新包）、-d忽略版本号安装（允许降级）、-l锁定应用（Android apk forward lock））：</span></span>
<span id="cb98-77"><a href="#cb98-77" aria-hidden="true" tabindex="-1"></a><span class="co">#关于Android apk forward lock可查看http://developer.android.com/guide/appendix/market-filters.html</span></span>
<span id="cb98-78"><a href="#cb98-78" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell install app</span>
<span id="cb98-79"><a href="#cb98-79" aria-hidden="true" tabindex="-1"></a><span class="co">#为特定用户安装软件包（用于多开应用）</span></span>
<span id="cb98-80"><a href="#cb98-80" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> install <span class="at">--user</span> <span class="op">&lt;</span>userId<span class="op">&gt;</span> <span class="op">&lt;</span>apk_path<span class="op">&gt;</span></span>
<span id="cb98-81"><a href="#cb98-81" aria-hidden="true" tabindex="-1"></a><span class="co">#比如将已经安装在userId=0的应用，安装到userId=999的用户中</span></span>
<span id="cb98-82"><a href="#cb98-82" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm install <span class="at">-r</span> <span class="at">--user</span> 999 <span class="kw">`</span><span class="ex">adb</span> shell pm path com.tencent.mm <span class="kw">|</span> <span class="fu">awk</span> <span class="at">-F</span><span class="st">&#39;:&#39;</span> <span class="st">&#39;{print $2}&#39;</span><span class="kw">`</span></span>
<span id="cb98-83"><a href="#cb98-83" aria-hidden="true" tabindex="-1"></a><span class="co">#卸载app：</span></span>
<span id="cb98-84"><a href="#cb98-84" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell uninstall <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-85"><a href="#cb98-85" aria-hidden="true" tabindex="-1"></a><span class="co">#卸载系统app（-k 表示保存数据）：</span></span>
<span id="cb98-86"><a href="#cb98-86" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm uninstall <span class="at">-k</span> <span class="at">--user</span> 0 <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-87"><a href="#cb98-87" aria-hidden="true" tabindex="-1"></a><span class="co">#恢复卸载的app</span></span>
<span id="cb98-88"><a href="#cb98-88" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell cmd package install-existing <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-89"><a href="#cb98-89" aria-hidden="true" tabindex="-1"></a><span class="co">#启用app：</span></span>
<span id="cb98-90"><a href="#cb98-90" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm enable <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-91"><a href="#cb98-91" aria-hidden="true" tabindex="-1"></a><span class="co">#为特定用户启用app</span></span>
<span id="cb98-92"><a href="#cb98-92" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm enable <span class="at">--user</span> <span class="op">&lt;</span>userId<span class="op">&gt;</span> <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-93"><a href="#cb98-93" aria-hidden="true" tabindex="-1"></a><span class="co">#停用app（方式1）：</span></span>
<span id="cb98-94"><a href="#cb98-94" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm disable <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-95"><a href="#cb98-95" aria-hidden="true" tabindex="-1"></a><span class="co">#停用app（方式2）：</span></span>
<span id="cb98-96"><a href="#cb98-96" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm disable-user <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-97"><a href="#cb98-97" aria-hidden="true" tabindex="-1"></a><span class="co">#为特定用户停用app</span></span>
<span id="cb98-98"><a href="#cb98-98" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm disable <span class="at">--user</span> <span class="op">&lt;</span>userId<span class="op">&gt;</span> <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-99"><a href="#cb98-99" aria-hidden="true" tabindex="-1"></a><span class="co">#隐藏app（提示没有权限可能需要su）：</span></span>
<span id="cb98-100"><a href="#cb98-100" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm hide <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-101"><a href="#cb98-101" aria-hidden="true" tabindex="-1"></a><span class="co">#取消隐藏app：</span></span>
<span id="cb98-102"><a href="#cb98-102" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm unhide <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-103"><a href="#cb98-103" aria-hidden="true" tabindex="-1"></a><span class="co">#去除app权限：</span></span>
<span id="cb98-104"><a href="#cb98-104" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm revoke <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-105"><a href="#cb98-105" aria-hidden="true" tabindex="-1"></a><span class="co">#查看app路径：</span></span>
<span id="cb98-106"><a href="#cb98-106" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell pm path <span class="op">&lt;</span>packageName<span class="op">&gt;</span></span>
<span id="cb98-107"><a href="#cb98-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-108"><a href="#cb98-108" aria-hidden="true" tabindex="-1"></a><span class="co">#截图</span></span>
<span id="cb98-109"><a href="#cb98-109" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell screencap /storage/emulated/0/test.png</span>
<span id="cb98-110"><a href="#cb98-110" aria-hidden="true" tabindex="-1"></a><span class="co">#录屏（要结束录屏的话就按ctrl+c，或者可以设置最大录屏时间，单位是秒；默认比特率为4Mbps，可以通过--bit-rate更改；通过添加--bugreport参数还可以添加时间戳水印）</span></span>
<span id="cb98-111"><a href="#cb98-111" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell screenrecord <span class="at">--time-limit</span><span class="op">=</span>120 <span class="at">--bit-rate</span> 6000000 /mnt/sdcard/Download/test.mp4</span>
<span id="cb98-112"><a href="#cb98-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-113"><a href="#cb98-113" aria-hidden="true" tabindex="-1"></a><span class="co">#从手机提取文件（1为手机路径，2为电脑路径）：</span></span>
<span id="cb98-114"><a href="#cb98-114" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> pull <span class="op">&lt;</span>path1<span class="op">&gt;</span> <span class="op">&lt;</span>path2<span class="op">&gt;</span></span>
<span id="cb98-115"><a href="#cb98-115" aria-hidden="true" tabindex="-1"></a><span class="co">#传送文件到手机（1为电脑路径，2为手机路径）：</span></span>
<span id="cb98-116"><a href="#cb98-116" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> push <span class="op">&lt;</span>path1<span class="op">&gt;</span> <span class="op">&lt;</span>path2<span class="op">&gt;</span></span>
<span id="cb98-117"><a href="#cb98-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-118"><a href="#cb98-118" aria-hidden="true" tabindex="-1"></a><span class="co">#将日志打印到电脑上</span></span>
<span id="cb98-119"><a href="#cb98-119" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> logcat <span class="op">&gt;</span> D:\log.txt</span>
<span id="cb98-120"><a href="#cb98-120" aria-hidden="true" tabindex="-1"></a><span class="co">#获取当前打开的APP的包名和activity</span></span>
<span id="cb98-121"><a href="#cb98-121" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell dumpsys window <span class="kw">|</span> <span class="ex">adb</span> shell grep mFocusedApp</span>
<span id="cb98-122"><a href="#cb98-122" aria-hidden="true" tabindex="-1"></a><span class="co">#获取手机内存信息</span></span>
<span id="cb98-123"><a href="#cb98-123" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell cat /proc/meminfo</span>
<span id="cb98-124"><a href="#cb98-124" aria-hidden="true" tabindex="-1"></a><span class="co">#获取手机存储信息</span></span>
<span id="cb98-125"><a href="#cb98-125" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell df</span>
<span id="cb98-126"><a href="#cb98-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-127"><a href="#cb98-127" aria-hidden="true" tabindex="-1"></a><span class="co">#获取手机的序列号（两种方式）</span></span>
<span id="cb98-128"><a href="#cb98-128" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> get-serialno</span>
<span id="cb98-129"><a href="#cb98-129" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell getprop ro.serialno</span>
<span id="cb98-130"><a href="#cb98-130" aria-hidden="true" tabindex="-1"></a><span class="co">#获取手机的IMEI（两种方式）</span></span>
<span id="cb98-131"><a href="#cb98-131" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell dumpsys iphonesubinfo</span>
<span id="cb98-132"><a href="#cb98-132" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell getprop gsm.baseband.imei</span>
<span id="cb98-133"><a href="#cb98-133" aria-hidden="true" tabindex="-1"></a><span class="co">#获取手机厂商名称</span></span>
<span id="cb98-134"><a href="#cb98-134" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell getprop ro.product.brand</span>
<span id="cb98-135"><a href="#cb98-135" aria-hidden="true" tabindex="-1"></a><span class="co">#获取手机设备类型</span></span>
<span id="cb98-136"><a href="#cb98-136" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell getprop ro.product.model</span>
<span id="cb98-137"><a href="#cb98-137" aria-hidden="true" tabindex="-1"></a><span class="co">#获取Android版本</span></span>
<span id="cb98-138"><a href="#cb98-138" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell getprop ro.build.version.release</span>
<span id="cb98-139"><a href="#cb98-139" aria-hidden="true" tabindex="-1"></a><span class="co">#获取api版本</span></span>
<span id="cb98-140"><a href="#cb98-140" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell getprop ro.build.version.sdk</span>
<span id="cb98-141"><a href="#cb98-141" aria-hidden="true" tabindex="-1"></a><span class="co">#查看手机的分辨率（两种方式）</span></span>
<span id="cb98-142"><a href="#cb98-142" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell wm size</span>
<span id="cb98-143"><a href="#cb98-143" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell dumpsys window <span class="kw">|</span> <span class="ex">adb</span> shell grep init</span>
<span id="cb98-144"><a href="#cb98-144" aria-hidden="true" tabindex="-1"></a><span class="co">#获取手机物理密度</span></span>
<span id="cb98-145"><a href="#cb98-145" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell wm density</span>
<span id="cb98-146"><a href="#cb98-146" aria-hidden="true" tabindex="-1"></a><span class="co">#查看电池信息</span></span>
<span id="cb98-147"><a href="#cb98-147" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell dumpsys battery</span>
<span id="cb98-148"><a href="#cb98-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-149"><a href="#cb98-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-150"><a href="#cb98-150" aria-hidden="true" tabindex="-1"></a><span class="co">#查看连接fastboot的设备</span></span>
<span id="cb98-151"><a href="#cb98-151" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> devices</span>
<span id="cb98-152"><a href="#cb98-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-153"><a href="#cb98-153" aria-hidden="true" tabindex="-1"></a><span class="co">#重启到系统</span></span>
<span id="cb98-154"><a href="#cb98-154" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> reboot</span>
<span id="cb98-155"><a href="#cb98-155" aria-hidden="true" tabindex="-1"></a><span class="co">#重启到bootloader（注意部分机型这样做可能会导致系统损坏）</span></span>
<span id="cb98-156"><a href="#cb98-156" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> reboot bootloader</span>
<span id="cb98-157"><a href="#cb98-157" aria-hidden="true" tabindex="-1"></a><span class="co">#重启到recovery（注意部分机型这样做可能会导致系统损坏）</span></span>
<span id="cb98-158"><a href="#cb98-158" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> reboot recovery</span>
<span id="cb98-159"><a href="#cb98-159" aria-hidden="true" tabindex="-1"></a><span class="co">#刷入ROM（不同机型输入方式不同）</span></span>
<span id="cb98-160"><a href="#cb98-160" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> update update.zip</span>
<span id="cb98-161"><a href="#cb98-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-162"><a href="#cb98-162" aria-hidden="true" tabindex="-1"></a><span class="co">#oem解锁（不同机型解锁方式可能不同）：</span></span>
<span id="cb98-163"><a href="#cb98-163" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> oem unlock</span>
<span id="cb98-164"><a href="#cb98-164" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> oem lock</span>
<span id="cb98-165"><a href="#cb98-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-166"><a href="#cb98-166" aria-hidden="true" tabindex="-1"></a><span class="co">#临时REC（比如TWRP，注意，部分机型的TWRP要刷在vendor_boot或recovery分区）：</span></span>
<span id="cb98-167"><a href="#cb98-167" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> boot twrp-xxx.img</span>
<span id="cb98-168"><a href="#cb98-168" aria-hidden="true" tabindex="-1"></a><span class="co">#使用sideload方式刷入永久REC（需要先进临时REC并且使用adb sideload功能）：</span></span>
<span id="cb98-169"><a href="#cb98-169" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> sideload twrp-installer-xxx.zip</span>
<span id="cb98-170"><a href="#cb98-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-171"><a href="#cb98-171" aria-hidden="true" tabindex="-1"></a><span class="co">#直接通过fastboot刷入boot.img（比如用Magisk修补过的boot文件）：</span></span>
<span id="cb98-172"><a href="#cb98-172" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> flash boot boot.img</span>
<span id="cb98-173"><a href="#cb98-173" aria-hidden="true" tabindex="-1"></a><span class="co">#其他分区同理：</span></span>
<span id="cb98-174"><a href="#cb98-174" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> flash system system.img</span>
<span id="cb98-175"><a href="#cb98-175" aria-hidden="true" tabindex="-1"></a><span class="co">#VAB分区时（不同机型的logo分区名字可能不同）：</span></span>
<span id="cb98-176"><a href="#cb98-176" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> flash logo_a logo.img</span>
<span id="cb98-177"><a href="#cb98-177" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> flash logo_b logo.img</span>
<span id="cb98-178"><a href="#cb98-178" aria-hidden="true" tabindex="-1"></a><span class="co">#擦除分区：</span></span>
<span id="cb98-179"><a href="#cb98-179" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> erase system</span>
<span id="cb98-180"><a href="#cb98-180" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> erase userdata</span>
<span id="cb98-181"><a href="#cb98-181" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> erase metadata</span>
<span id="cb98-182"><a href="#cb98-182" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> erase cache</span>
<span id="cb98-183"><a href="#cb98-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-184"><a href="#cb98-184" aria-hidden="true" tabindex="-1"></a><span class="co">#切换活动槽位为a或b（适用VAB分区的手机）</span></span>
<span id="cb98-185"><a href="#cb98-185" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> set_active a</span>
<span id="cb98-186"><a href="#cb98-186" aria-hidden="true" tabindex="-1"></a><span class="ex">fastboot</span> set_active b</span>
<span id="cb98-187"><a href="#cb98-187" aria-hidden="true" tabindex="-1"></a><span class="co">#adb可以看当前活动槽位</span></span>
<span id="cb98-188"><a href="#cb98-188" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell getprop ro.boot.slot_suffix</span>
<span id="cb98-189"><a href="#cb98-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-190"><a href="#cb98-190" aria-hidden="true" tabindex="-1"></a><span class="co">#删除所有magisk模块</span></span>
<span id="cb98-191"><a href="#cb98-191" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> wait-for-device shell magisk <span class="at">--remove-modules</span></span></code></pre></div>
<p><strong>APK-Splits的安装</strong>：</p>
<p>方法1，解压<code>.apks</code>文件，得到若干个<code>.apk</code>文件，这里假设分成base.apk、split_config.xxhdpi.apk、split_config.arm64_v8a.apk三部分，然后将这些<code>.apk</code>文件文件复制到手机里，这里我们放到<code>/sdcard/tmp/</code>目录下：</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 进入Shell命令行模式</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="ex">adb</span> shell</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建安装session</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="co"># （如果已经安装了base.apk，后续不用再装，但这里要使用包名来创建：pm install-create -r -p com.google.android.gm）</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pm</span> install-create</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 此时会返回一个结果，比如Success: created install session [1635978285]，后续需使用该session ID</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="ex">pm</span> install-write 1635978285 base.apk /sdcard/tmp/base.apk</span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pm</span> install-write 1635978285 split_config.xxhdpi.apk /sdcard/tmp/split_config.xxhdpi.apk</span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="ex">pm</span> install-write 1635978285 split_config.arm64_v8a.apk /sdcard/tmp/split_config.arm64_v8a.apk</span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 完成写入所有APK后，执行合并安装</span></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="ex">pm</span> install-commit 1635978285</span></code></pre></div>
<p>方法2，使用官方提供的<a href="https://github.com/google/bundletool">bundletool.jar</a>安装，需先配置好Java环境：</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 先使用adb devices确认设备已连接</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="ex">java</span> <span class="at">-jar</span> <span class="op">&lt;</span>bundletool.jar的路径<span class="op">&gt;</span> install-apks <span class="at">--apks</span><span class="op">=&lt;</span>.apks文件路径<span class="op">&gt;</span></span></code></pre></div>
<p>备注：Google Play
Store下载的应用是<code>.aab</code>格式，<code>.aab</code>转<code>.apks</code>命令：</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="ex">java</span> <span class="at">-jar</span> bundletool.jar build-apks <span class="at">--bundle</span><span class="op">=</span>xxx.aab <span class="at">--output</span><span class="op">=</span>xxx.apks</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 或</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="ex">java</span> <span class="at">-jar</span> bundletool.jar build-apks <span class="at">--bundle</span><span class="op">=</span>xxx.aab <span class="at">--output</span><span class="op">=</span>xxx.apks <span class="at">--ks</span><span class="op">=</span>xxxx.jks <span class="at">--ks-pass</span><span class="op">=</span>pass:证书密码 <span class="at">--ks-key-alias</span><span class="op">=</span>证书别名 <span class="at">--key-pass</span><span class="op">=</span>pass:证书别名密码</span></code></pre></div>
<p><strong>备份应用命令</strong>：<code>adb backup [-f &lt;file&gt;] [-apk|-noapk] [-shared|-noshared] [-all] [-system|nosystem] [&lt;packages&gt;]</code></p>
<ul>
<li><code>-f &lt;file&gt;</code>：设置备份后的文件名和路径。比如<code>&quot;C:\backupfile.ab&quot;</code>，扩展名是<code>ab</code>；</li>
<li><code>-apk|-noapk</code>：选择是否备份APK安装包，默认是只备份应用数据，不备份安装包的；</li>
<li><code>-shared|-noshared</code>：是否备份SD卡中的应用数据；</li>
<li><code>-all</code>：简单地表达“所有应用”的说法；</li>
<li>`<code>-system|-nosystem</code>：这个参数决定<code>-all</code>参数是否包含系统应用；</li>
<li><code>&lt;packages&gt;</code>：指定备份要备份应用的包名；</li>
</ul>
<p>比如备份软件及数据<code>adb backup -f filename.ab -apk -shared packagesName</code>
，恢复就<code>adb restore &lt;filename.ab&gt;</code></p>
<h2 id="js生成字符串md5">js生成字符串MD5</h2>
<div class="sourceCode" id="cb102"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 字符串md5加密，bit指定16位或32位，输出小写，要大写调用字符串的toUpperCase()</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">md5</span>(string<span class="op">,</span>bit) {</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_RotateLeft</span>(lValue<span class="op">,</span> iShiftBits) {</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (lValue <span class="op">&lt;&lt;</span> iShiftBits) <span class="op">|</span> (lValue <span class="op">&gt;&gt;&gt;</span> (<span class="dv">32</span> <span class="op">-</span> iShiftBits))<span class="op">;</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_AddUnsigned</span>(lX<span class="op">,</span> lY) {</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lX4<span class="op">,</span> lY4<span class="op">,</span> lX8<span class="op">,</span> lY8<span class="op">,</span> lResult<span class="op">;</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>        lX8 <span class="op">=</span> (lX <span class="op">&amp;</span> <span class="bn">0x80000000</span>)<span class="op">;</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>        lY8 <span class="op">=</span> (lY <span class="op">&amp;</span> <span class="bn">0x80000000</span>)<span class="op">;</span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>        lX4 <span class="op">=</span> (lX <span class="op">&amp;</span> <span class="bn">0x40000000</span>)<span class="op">;</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>        lY4 <span class="op">=</span> (lY <span class="op">&amp;</span> <span class="bn">0x40000000</span>)<span class="op">;</span></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a>        lResult <span class="op">=</span> (lX <span class="op">&amp;</span> <span class="bn">0x3FFFFFFF</span>) <span class="op">+</span> (lY <span class="op">&amp;</span> <span class="bn">0x3FFFFFFF</span>)<span class="op">;</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (lX4 <span class="op">&amp;</span> lY4) {</span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> (lResult <span class="op">^</span> <span class="bn">0x80000000</span> <span class="op">^</span> lX8 <span class="op">^</span> lY8)<span class="op">;</span></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (lX4 <span class="op">|</span> lY4) {</span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (lResult <span class="op">&amp;</span> <span class="bn">0x40000000</span>) {</span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> (lResult <span class="op">^</span> <span class="bn">0xC0000000</span> <span class="op">^</span> lX8 <span class="op">^</span> lY8)<span class="op">;</span></span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a>            } <span class="cf">else</span> {</span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> (lResult <span class="op">^</span> <span class="bn">0x40000000</span> <span class="op">^</span> lX8 <span class="op">^</span> lY8)<span class="op">;</span></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> (lResult <span class="op">^</span> lX8 <span class="op">^</span> lY8)<span class="op">;</span></span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-26"><a href="#cb102-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_F</span>(x<span class="op">,</span> y<span class="op">,</span> z) {</span>
<span id="cb102-27"><a href="#cb102-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (x <span class="op">&amp;</span> y) <span class="op">|</span> ((<span class="op">~</span>x) <span class="op">&amp;</span> z)<span class="op">;</span></span>
<span id="cb102-28"><a href="#cb102-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-29"><a href="#cb102-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_G</span>(x<span class="op">,</span> y<span class="op">,</span> z) {</span>
<span id="cb102-30"><a href="#cb102-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (x <span class="op">&amp;</span> z) <span class="op">|</span> (y <span class="op">&amp;</span> (<span class="op">~</span>z))<span class="op">;</span></span>
<span id="cb102-31"><a href="#cb102-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-32"><a href="#cb102-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_H</span>(x<span class="op">,</span> y<span class="op">,</span> z) {</span>
<span id="cb102-33"><a href="#cb102-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (x <span class="op">^</span> y <span class="op">^</span> z)<span class="op">;</span></span>
<span id="cb102-34"><a href="#cb102-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-35"><a href="#cb102-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_I</span>(x<span class="op">,</span> y<span class="op">,</span> z) {</span>
<span id="cb102-36"><a href="#cb102-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (y <span class="op">^</span> (x <span class="op">|</span> (<span class="op">~</span>z)))<span class="op">;</span></span>
<span id="cb102-37"><a href="#cb102-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-38"><a href="#cb102-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_FF</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x<span class="op">,</span> s<span class="op">,</span> ac) {</span>
<span id="cb102-39"><a href="#cb102-39" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(a<span class="op">,</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_F</span>(b<span class="op">,</span> c<span class="op">,</span> d)<span class="op">,</span> x)<span class="op">,</span> ac))<span class="op">;</span></span>
<span id="cb102-40"><a href="#cb102-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_RotateLeft</span>(a<span class="op">,</span> s)<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb102-41"><a href="#cb102-41" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb102-42"><a href="#cb102-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_GG</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x<span class="op">,</span> s<span class="op">,</span> ac) {</span>
<span id="cb102-43"><a href="#cb102-43" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(a<span class="op">,</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_G</span>(b<span class="op">,</span> c<span class="op">,</span> d)<span class="op">,</span> x)<span class="op">,</span> ac))<span class="op">;</span></span>
<span id="cb102-44"><a href="#cb102-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_RotateLeft</span>(a<span class="op">,</span> s)<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb102-45"><a href="#cb102-45" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb102-46"><a href="#cb102-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_HH</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x<span class="op">,</span> s<span class="op">,</span> ac) {</span>
<span id="cb102-47"><a href="#cb102-47" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(a<span class="op">,</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_H</span>(b<span class="op">,</span> c<span class="op">,</span> d)<span class="op">,</span> x)<span class="op">,</span> ac))<span class="op">;</span></span>
<span id="cb102-48"><a href="#cb102-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_RotateLeft</span>(a<span class="op">,</span> s)<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb102-49"><a href="#cb102-49" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb102-50"><a href="#cb102-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_II</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x<span class="op">,</span> s<span class="op">,</span> ac) {</span>
<span id="cb102-51"><a href="#cb102-51" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(a<span class="op">,</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_I</span>(b<span class="op">,</span> c<span class="op">,</span> d)<span class="op">,</span> x)<span class="op">,</span> ac))<span class="op">;</span></span>
<span id="cb102-52"><a href="#cb102-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">md5_AddUnsigned</span>(<span class="fu">md5_RotateLeft</span>(a<span class="op">,</span> s)<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb102-53"><a href="#cb102-53" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb102-54"><a href="#cb102-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_ConvertToWordArray</span>(string) {</span>
<span id="cb102-55"><a href="#cb102-55" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lWordCount<span class="op">;</span></span>
<span id="cb102-56"><a href="#cb102-56" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lMessageLength <span class="op">=</span> string<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb102-57"><a href="#cb102-57" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lNumberOfWords_temp1 <span class="op">=</span> lMessageLength <span class="op">+</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb102-58"><a href="#cb102-58" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lNumberOfWords_temp2 <span class="op">=</span> (lNumberOfWords_temp1 <span class="op">-</span> (lNumberOfWords_temp1 <span class="op">%</span> <span class="dv">64</span>)) <span class="op">/</span> <span class="dv">64</span><span class="op">;</span></span>
<span id="cb102-59"><a href="#cb102-59" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lNumberOfWords <span class="op">=</span> (lNumberOfWords_temp2 <span class="op">+</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb102-60"><a href="#cb102-60" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lWordArray <span class="op">=</span> <span class="bu">Array</span>(lNumberOfWords <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb102-61"><a href="#cb102-61" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lBytePosition <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb102-62"><a href="#cb102-62" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> lByteCount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb102-63"><a href="#cb102-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> (lByteCount <span class="op">&lt;</span> lMessageLength) {</span>
<span id="cb102-64"><a href="#cb102-64" aria-hidden="true" tabindex="-1"></a>            lWordCount <span class="op">=</span> (lByteCount <span class="op">-</span> (lByteCount <span class="op">%</span> <span class="dv">4</span>)) <span class="op">/</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb102-65"><a href="#cb102-65" aria-hidden="true" tabindex="-1"></a>            lBytePosition <span class="op">=</span> (lByteCount <span class="op">%</span> <span class="dv">4</span>) <span class="op">*</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb102-66"><a href="#cb102-66" aria-hidden="true" tabindex="-1"></a>            lWordArray[lWordCount] <span class="op">=</span> (lWordArray[lWordCount] <span class="op">|</span> (string<span class="op">.</span><span class="fu">charCodeAt</span>(lByteCount) <span class="op">&lt;&lt;</span> lBytePosition))<span class="op">;</span></span>
<span id="cb102-67"><a href="#cb102-67" aria-hidden="true" tabindex="-1"></a>            lByteCount<span class="op">++;</span></span>
<span id="cb102-68"><a href="#cb102-68" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-69"><a href="#cb102-69" aria-hidden="true" tabindex="-1"></a>        lWordCount <span class="op">=</span> (lByteCount <span class="op">-</span> (lByteCount <span class="op">%</span> <span class="dv">4</span>)) <span class="op">/</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb102-70"><a href="#cb102-70" aria-hidden="true" tabindex="-1"></a>        lBytePosition <span class="op">=</span> (lByteCount <span class="op">%</span> <span class="dv">4</span>) <span class="op">*</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb102-71"><a href="#cb102-71" aria-hidden="true" tabindex="-1"></a>        lWordArray[lWordCount] <span class="op">=</span> lWordArray[lWordCount] <span class="op">|</span> (<span class="bn">0x80</span> <span class="op">&lt;&lt;</span> lBytePosition)<span class="op">;</span></span>
<span id="cb102-72"><a href="#cb102-72" aria-hidden="true" tabindex="-1"></a>        lWordArray[lNumberOfWords <span class="op">-</span> <span class="dv">2</span>] <span class="op">=</span> lMessageLength <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb102-73"><a href="#cb102-73" aria-hidden="true" tabindex="-1"></a>        lWordArray[lNumberOfWords <span class="op">-</span> <span class="dv">1</span>] <span class="op">=</span> lMessageLength <span class="op">&gt;&gt;&gt;</span> <span class="dv">29</span><span class="op">;</span></span>
<span id="cb102-74"><a href="#cb102-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> lWordArray<span class="op">;</span></span>
<span id="cb102-75"><a href="#cb102-75" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb102-76"><a href="#cb102-76" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_WordToHex</span>(lValue) {</span>
<span id="cb102-77"><a href="#cb102-77" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> WordToHexValue <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span> WordToHexValue_temp <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span> lByte<span class="op">,</span> lCount<span class="op">;</span></span>
<span id="cb102-78"><a href="#cb102-78" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (lCount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> lCount <span class="op">&lt;=</span> <span class="dv">3</span><span class="op">;</span> lCount<span class="op">++</span>) {</span>
<span id="cb102-79"><a href="#cb102-79" aria-hidden="true" tabindex="-1"></a>            lByte <span class="op">=</span> (lValue <span class="op">&gt;&gt;&gt;</span> (lCount <span class="op">*</span> <span class="dv">8</span>)) <span class="op">&amp;</span> <span class="dv">255</span><span class="op">;</span></span>
<span id="cb102-80"><a href="#cb102-80" aria-hidden="true" tabindex="-1"></a>            WordToHexValue_temp <span class="op">=</span> <span class="st">&quot;0&quot;</span> <span class="op">+</span> lByte<span class="op">.</span><span class="fu">toString</span>(<span class="dv">16</span>)<span class="op">;</span></span>
<span id="cb102-81"><a href="#cb102-81" aria-hidden="true" tabindex="-1"></a>            WordToHexValue <span class="op">=</span> WordToHexValue <span class="op">+</span> WordToHexValue_temp<span class="op">.</span><span class="fu">substr</span>(WordToHexValue_temp<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb102-82"><a href="#cb102-82" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-83"><a href="#cb102-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> WordToHexValue<span class="op">;</span></span>
<span id="cb102-84"><a href="#cb102-84" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb102-85"><a href="#cb102-85" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">md5_Utf8Encode</span>(string) {</span>
<span id="cb102-86"><a href="#cb102-86" aria-hidden="true" tabindex="-1"></a>        string <span class="op">=</span> string<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">\r\n</span><span class="ss">/g</span><span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb102-87"><a href="#cb102-87" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> utftext <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb102-88"><a href="#cb102-88" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="kw">var</span> n <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> n <span class="op">&lt;</span> string<span class="op">.</span><span class="at">length</span><span class="op">;</span> n<span class="op">++</span>) {</span>
<span id="cb102-89"><a href="#cb102-89" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> c <span class="op">=</span> string<span class="op">.</span><span class="fu">charCodeAt</span>(n)<span class="op">;</span></span>
<span id="cb102-90"><a href="#cb102-90" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (c <span class="op">&lt;</span> <span class="dv">128</span>) {</span>
<span id="cb102-91"><a href="#cb102-91" aria-hidden="true" tabindex="-1"></a>                utftext <span class="op">+=</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>(c)<span class="op">;</span></span>
<span id="cb102-92"><a href="#cb102-92" aria-hidden="true" tabindex="-1"></a>            } <span class="cf">else</span> <span class="cf">if</span> ((c <span class="op">&gt;</span> <span class="dv">127</span>) <span class="op">&amp;&amp;</span> (c <span class="op">&lt;</span> <span class="dv">2048</span>)) {</span>
<span id="cb102-93"><a href="#cb102-93" aria-hidden="true" tabindex="-1"></a>                utftext <span class="op">+=</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>((c <span class="op">&gt;&gt;</span> <span class="dv">6</span>) <span class="op">|</span> <span class="dv">192</span>)<span class="op">;</span></span>
<span id="cb102-94"><a href="#cb102-94" aria-hidden="true" tabindex="-1"></a>                utftext <span class="op">+=</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>((c <span class="op">&amp;</span> <span class="dv">63</span>) <span class="op">|</span> <span class="dv">128</span>)<span class="op">;</span></span>
<span id="cb102-95"><a href="#cb102-95" aria-hidden="true" tabindex="-1"></a>            } <span class="cf">else</span> {</span>
<span id="cb102-96"><a href="#cb102-96" aria-hidden="true" tabindex="-1"></a>                utftext <span class="op">+=</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>((c <span class="op">&gt;&gt;</span> <span class="dv">12</span>) <span class="op">|</span> <span class="dv">224</span>)<span class="op">;</span></span>
<span id="cb102-97"><a href="#cb102-97" aria-hidden="true" tabindex="-1"></a>                utftext <span class="op">+=</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>(((c <span class="op">&gt;&gt;</span> <span class="dv">6</span>) <span class="op">&amp;</span> <span class="dv">63</span>) <span class="op">|</span> <span class="dv">128</span>)<span class="op">;</span></span>
<span id="cb102-98"><a href="#cb102-98" aria-hidden="true" tabindex="-1"></a>                utftext <span class="op">+=</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>((c <span class="op">&amp;</span> <span class="dv">63</span>) <span class="op">|</span> <span class="dv">128</span>)<span class="op">;</span></span>
<span id="cb102-99"><a href="#cb102-99" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb102-100"><a href="#cb102-100" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-101"><a href="#cb102-101" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> utftext<span class="op">;</span></span>
<span id="cb102-102"><a href="#cb102-102" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb102-103"><a href="#cb102-103" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> x <span class="op">=</span> <span class="bu">Array</span>()<span class="op">;</span></span>
<span id="cb102-104"><a href="#cb102-104" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> k<span class="op">,</span> AA<span class="op">,</span> BB<span class="op">,</span> CC<span class="op">,</span> DD<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">;</span></span>
<span id="cb102-105"><a href="#cb102-105" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> S11 <span class="op">=</span> <span class="dv">7</span><span class="op">,</span> S12 <span class="op">=</span> <span class="dv">12</span><span class="op">,</span> S13 <span class="op">=</span> <span class="dv">17</span><span class="op">,</span> S14 <span class="op">=</span> <span class="dv">22</span><span class="op">;</span></span>
<span id="cb102-106"><a href="#cb102-106" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> S21 <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> S22 <span class="op">=</span> <span class="dv">9</span><span class="op">,</span> S23 <span class="op">=</span> <span class="dv">14</span><span class="op">,</span> S24 <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb102-107"><a href="#cb102-107" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> S31 <span class="op">=</span> <span class="dv">4</span><span class="op">,</span> S32 <span class="op">=</span> <span class="dv">11</span><span class="op">,</span> S33 <span class="op">=</span> <span class="dv">16</span><span class="op">,</span> S34 <span class="op">=</span> <span class="dv">23</span><span class="op">;</span></span>
<span id="cb102-108"><a href="#cb102-108" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> S41 <span class="op">=</span> <span class="dv">6</span><span class="op">,</span> S42 <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> S43 <span class="op">=</span> <span class="dv">15</span><span class="op">,</span> S44 <span class="op">=</span> <span class="dv">21</span><span class="op">;</span></span>
<span id="cb102-109"><a href="#cb102-109" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="fu">md5_Utf8Encode</span>(string)<span class="op">;</span></span>
<span id="cb102-110"><a href="#cb102-110" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fu">md5_ConvertToWordArray</span>(string)<span class="op">;</span></span>
<span id="cb102-111"><a href="#cb102-111" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="bn">0x67452301</span><span class="op">;</span> b <span class="op">=</span> <span class="bn">0xEFCDAB89</span><span class="op">;</span> c <span class="op">=</span> <span class="bn">0x98BADCFE</span><span class="op">;</span> d <span class="op">=</span> <span class="bn">0x10325476</span><span class="op">;</span></span>
<span id="cb102-112"><a href="#cb102-112" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> k <span class="op">&lt;</span> x<span class="op">.</span><span class="at">length</span><span class="op">;</span> k <span class="op">+=</span> <span class="dv">16</span>) {</span>
<span id="cb102-113"><a href="#cb102-113" aria-hidden="true" tabindex="-1"></a>        AA <span class="op">=</span> a<span class="op">;</span> BB <span class="op">=</span> b<span class="op">;</span> CC <span class="op">=</span> c<span class="op">;</span> DD <span class="op">=</span> d<span class="op">;</span></span>
<span id="cb102-114"><a href="#cb102-114" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_FF</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">0</span>]<span class="op">,</span> S11<span class="op">,</span> <span class="bn">0xD76AA478</span>)<span class="op">;</span></span>
<span id="cb102-115"><a href="#cb102-115" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_FF</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">1</span>]<span class="op">,</span> S12<span class="op">,</span> <span class="bn">0xE8C7B756</span>)<span class="op">;</span></span>
<span id="cb102-116"><a href="#cb102-116" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_FF</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">2</span>]<span class="op">,</span> S13<span class="op">,</span> <span class="bn">0x242070DB</span>)<span class="op">;</span></span>
<span id="cb102-117"><a href="#cb102-117" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_FF</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">3</span>]<span class="op">,</span> S14<span class="op">,</span> <span class="bn">0xC1BDCEEE</span>)<span class="op">;</span></span>
<span id="cb102-118"><a href="#cb102-118" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_FF</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">4</span>]<span class="op">,</span> S11<span class="op">,</span> <span class="bn">0xF57C0FAF</span>)<span class="op">;</span></span>
<span id="cb102-119"><a href="#cb102-119" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_FF</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">5</span>]<span class="op">,</span> S12<span class="op">,</span> <span class="bn">0x4787C62A</span>)<span class="op">;</span></span>
<span id="cb102-120"><a href="#cb102-120" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_FF</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">6</span>]<span class="op">,</span> S13<span class="op">,</span> <span class="bn">0xA8304613</span>)<span class="op">;</span></span>
<span id="cb102-121"><a href="#cb102-121" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_FF</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">7</span>]<span class="op">,</span> S14<span class="op">,</span> <span class="bn">0xFD469501</span>)<span class="op">;</span></span>
<span id="cb102-122"><a href="#cb102-122" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_FF</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">8</span>]<span class="op">,</span> S11<span class="op">,</span> <span class="bn">0x698098D8</span>)<span class="op">;</span></span>
<span id="cb102-123"><a href="#cb102-123" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_FF</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">9</span>]<span class="op">,</span> S12<span class="op">,</span> <span class="bn">0x8B44F7AF</span>)<span class="op">;</span></span>
<span id="cb102-124"><a href="#cb102-124" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_FF</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">10</span>]<span class="op">,</span> S13<span class="op">,</span> <span class="bn">0xFFFF5BB1</span>)<span class="op">;</span></span>
<span id="cb102-125"><a href="#cb102-125" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_FF</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">11</span>]<span class="op">,</span> S14<span class="op">,</span> <span class="bn">0x895CD7BE</span>)<span class="op">;</span></span>
<span id="cb102-126"><a href="#cb102-126" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_FF</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">12</span>]<span class="op">,</span> S11<span class="op">,</span> <span class="bn">0x6B901122</span>)<span class="op">;</span></span>
<span id="cb102-127"><a href="#cb102-127" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_FF</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">13</span>]<span class="op">,</span> S12<span class="op">,</span> <span class="bn">0xFD987193</span>)<span class="op">;</span></span>
<span id="cb102-128"><a href="#cb102-128" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_FF</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">14</span>]<span class="op">,</span> S13<span class="op">,</span> <span class="bn">0xA679438E</span>)<span class="op">;</span></span>
<span id="cb102-129"><a href="#cb102-129" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_FF</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">15</span>]<span class="op">,</span> S14<span class="op">,</span> <span class="bn">0x49B40821</span>)<span class="op">;</span></span>
<span id="cb102-130"><a href="#cb102-130" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_GG</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">1</span>]<span class="op">,</span> S21<span class="op">,</span> <span class="bn">0xF61E2562</span>)<span class="op">;</span></span>
<span id="cb102-131"><a href="#cb102-131" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_GG</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">6</span>]<span class="op">,</span> S22<span class="op">,</span> <span class="bn">0xC040B340</span>)<span class="op">;</span></span>
<span id="cb102-132"><a href="#cb102-132" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_GG</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">11</span>]<span class="op">,</span> S23<span class="op">,</span> <span class="bn">0x265E5A51</span>)<span class="op">;</span></span>
<span id="cb102-133"><a href="#cb102-133" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_GG</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">0</span>]<span class="op">,</span> S24<span class="op">,</span> <span class="bn">0xE9B6C7AA</span>)<span class="op">;</span></span>
<span id="cb102-134"><a href="#cb102-134" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_GG</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">5</span>]<span class="op">,</span> S21<span class="op">,</span> <span class="bn">0xD62F105D</span>)<span class="op">;</span></span>
<span id="cb102-135"><a href="#cb102-135" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_GG</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">10</span>]<span class="op">,</span> S22<span class="op">,</span> <span class="bn">0x2441453</span>)<span class="op">;</span></span>
<span id="cb102-136"><a href="#cb102-136" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_GG</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">15</span>]<span class="op">,</span> S23<span class="op">,</span> <span class="bn">0xD8A1E681</span>)<span class="op">;</span></span>
<span id="cb102-137"><a href="#cb102-137" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_GG</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">4</span>]<span class="op">,</span> S24<span class="op">,</span> <span class="bn">0xE7D3FBC8</span>)<span class="op">;</span></span>
<span id="cb102-138"><a href="#cb102-138" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_GG</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">9</span>]<span class="op">,</span> S21<span class="op">,</span> <span class="bn">0x21E1CDE6</span>)<span class="op">;</span></span>
<span id="cb102-139"><a href="#cb102-139" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_GG</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">14</span>]<span class="op">,</span> S22<span class="op">,</span> <span class="bn">0xC33707D6</span>)<span class="op">;</span></span>
<span id="cb102-140"><a href="#cb102-140" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_GG</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">3</span>]<span class="op">,</span> S23<span class="op">,</span> <span class="bn">0xF4D50D87</span>)<span class="op">;</span></span>
<span id="cb102-141"><a href="#cb102-141" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_GG</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">8</span>]<span class="op">,</span> S24<span class="op">,</span> <span class="bn">0x455A14ED</span>)<span class="op">;</span></span>
<span id="cb102-142"><a href="#cb102-142" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_GG</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">13</span>]<span class="op">,</span> S21<span class="op">,</span> <span class="bn">0xA9E3E905</span>)<span class="op">;</span></span>
<span id="cb102-143"><a href="#cb102-143" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_GG</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">2</span>]<span class="op">,</span> S22<span class="op">,</span> <span class="bn">0xFCEFA3F8</span>)<span class="op">;</span></span>
<span id="cb102-144"><a href="#cb102-144" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_GG</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">7</span>]<span class="op">,</span> S23<span class="op">,</span> <span class="bn">0x676F02D9</span>)<span class="op">;</span></span>
<span id="cb102-145"><a href="#cb102-145" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_GG</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">12</span>]<span class="op">,</span> S24<span class="op">,</span> <span class="bn">0x8D2A4C8A</span>)<span class="op">;</span></span>
<span id="cb102-146"><a href="#cb102-146" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_HH</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">5</span>]<span class="op">,</span> S31<span class="op">,</span> <span class="bn">0xFFFA3942</span>)<span class="op">;</span></span>
<span id="cb102-147"><a href="#cb102-147" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_HH</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">8</span>]<span class="op">,</span> S32<span class="op">,</span> <span class="bn">0x8771F681</span>)<span class="op">;</span></span>
<span id="cb102-148"><a href="#cb102-148" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_HH</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">11</span>]<span class="op">,</span> S33<span class="op">,</span> <span class="bn">0x6D9D6122</span>)<span class="op">;</span></span>
<span id="cb102-149"><a href="#cb102-149" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_HH</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">14</span>]<span class="op">,</span> S34<span class="op">,</span> <span class="bn">0xFDE5380C</span>)<span class="op">;</span></span>
<span id="cb102-150"><a href="#cb102-150" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_HH</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">1</span>]<span class="op">,</span> S31<span class="op">,</span> <span class="bn">0xA4BEEA44</span>)<span class="op">;</span></span>
<span id="cb102-151"><a href="#cb102-151" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_HH</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">4</span>]<span class="op">,</span> S32<span class="op">,</span> <span class="bn">0x4BDECFA9</span>)<span class="op">;</span></span>
<span id="cb102-152"><a href="#cb102-152" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_HH</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">7</span>]<span class="op">,</span> S33<span class="op">,</span> <span class="bn">0xF6BB4B60</span>)<span class="op">;</span></span>
<span id="cb102-153"><a href="#cb102-153" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_HH</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">10</span>]<span class="op">,</span> S34<span class="op">,</span> <span class="bn">0xBEBFBC70</span>)<span class="op">;</span></span>
<span id="cb102-154"><a href="#cb102-154" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_HH</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">13</span>]<span class="op">,</span> S31<span class="op">,</span> <span class="bn">0x289B7EC6</span>)<span class="op">;</span></span>
<span id="cb102-155"><a href="#cb102-155" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_HH</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">0</span>]<span class="op">,</span> S32<span class="op">,</span> <span class="bn">0xEAA127FA</span>)<span class="op">;</span></span>
<span id="cb102-156"><a href="#cb102-156" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_HH</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">3</span>]<span class="op">,</span> S33<span class="op">,</span> <span class="bn">0xD4EF3085</span>)<span class="op">;</span></span>
<span id="cb102-157"><a href="#cb102-157" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_HH</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">6</span>]<span class="op">,</span> S34<span class="op">,</span> <span class="bn">0x4881D05</span>)<span class="op">;</span></span>
<span id="cb102-158"><a href="#cb102-158" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_HH</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">9</span>]<span class="op">,</span> S31<span class="op">,</span> <span class="bn">0xD9D4D039</span>)<span class="op">;</span></span>
<span id="cb102-159"><a href="#cb102-159" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_HH</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">12</span>]<span class="op">,</span> S32<span class="op">,</span> <span class="bn">0xE6DB99E5</span>)<span class="op">;</span></span>
<span id="cb102-160"><a href="#cb102-160" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_HH</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">15</span>]<span class="op">,</span> S33<span class="op">,</span> <span class="bn">0x1FA27CF8</span>)<span class="op">;</span></span>
<span id="cb102-161"><a href="#cb102-161" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_HH</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">2</span>]<span class="op">,</span> S34<span class="op">,</span> <span class="bn">0xC4AC5665</span>)<span class="op">;</span></span>
<span id="cb102-162"><a href="#cb102-162" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_II</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">0</span>]<span class="op">,</span> S41<span class="op">,</span> <span class="bn">0xF4292244</span>)<span class="op">;</span></span>
<span id="cb102-163"><a href="#cb102-163" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_II</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">7</span>]<span class="op">,</span> S42<span class="op">,</span> <span class="bn">0x432AFF97</span>)<span class="op">;</span></span>
<span id="cb102-164"><a href="#cb102-164" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_II</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">14</span>]<span class="op">,</span> S43<span class="op">,</span> <span class="bn">0xAB9423A7</span>)<span class="op">;</span></span>
<span id="cb102-165"><a href="#cb102-165" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_II</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">5</span>]<span class="op">,</span> S44<span class="op">,</span> <span class="bn">0xFC93A039</span>)<span class="op">;</span></span>
<span id="cb102-166"><a href="#cb102-166" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_II</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">12</span>]<span class="op">,</span> S41<span class="op">,</span> <span class="bn">0x655B59C3</span>)<span class="op">;</span></span>
<span id="cb102-167"><a href="#cb102-167" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_II</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">3</span>]<span class="op">,</span> S42<span class="op">,</span> <span class="bn">0x8F0CCC92</span>)<span class="op">;</span></span>
<span id="cb102-168"><a href="#cb102-168" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_II</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">10</span>]<span class="op">,</span> S43<span class="op">,</span> <span class="bn">0xFFEFF47D</span>)<span class="op">;</span></span>
<span id="cb102-169"><a href="#cb102-169" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_II</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">1</span>]<span class="op">,</span> S44<span class="op">,</span> <span class="bn">0x85845DD1</span>)<span class="op">;</span></span>
<span id="cb102-170"><a href="#cb102-170" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_II</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">8</span>]<span class="op">,</span> S41<span class="op">,</span> <span class="bn">0x6FA87E4F</span>)<span class="op">;</span></span>
<span id="cb102-171"><a href="#cb102-171" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_II</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">15</span>]<span class="op">,</span> S42<span class="op">,</span> <span class="bn">0xFE2CE6E0</span>)<span class="op">;</span></span>
<span id="cb102-172"><a href="#cb102-172" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_II</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">6</span>]<span class="op">,</span> S43<span class="op">,</span> <span class="bn">0xA3014314</span>)<span class="op">;</span></span>
<span id="cb102-173"><a href="#cb102-173" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_II</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">13</span>]<span class="op">,</span> S44<span class="op">,</span> <span class="bn">0x4E0811A1</span>)<span class="op">;</span></span>
<span id="cb102-174"><a href="#cb102-174" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_II</span>(a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">4</span>]<span class="op">,</span> S41<span class="op">,</span> <span class="bn">0xF7537E82</span>)<span class="op">;</span></span>
<span id="cb102-175"><a href="#cb102-175" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_II</span>(d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">11</span>]<span class="op">,</span> S42<span class="op">,</span> <span class="bn">0xBD3AF235</span>)<span class="op">;</span></span>
<span id="cb102-176"><a href="#cb102-176" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_II</span>(c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">2</span>]<span class="op">,</span> S43<span class="op">,</span> <span class="bn">0x2AD7D2BB</span>)<span class="op">;</span></span>
<span id="cb102-177"><a href="#cb102-177" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_II</span>(b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a<span class="op">,</span> x[k <span class="op">+</span> <span class="dv">9</span>]<span class="op">,</span> S44<span class="op">,</span> <span class="bn">0xEB86D391</span>)<span class="op">;</span></span>
<span id="cb102-178"><a href="#cb102-178" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(a<span class="op">,</span> AA)<span class="op">;</span></span>
<span id="cb102-179"><a href="#cb102-179" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(b<span class="op">,</span> BB)<span class="op">;</span></span>
<span id="cb102-180"><a href="#cb102-180" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(c<span class="op">,</span> CC)<span class="op">;</span></span>
<span id="cb102-181"><a href="#cb102-181" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> <span class="fu">md5_AddUnsigned</span>(d<span class="op">,</span> DD)<span class="op">;</span></span>
<span id="cb102-182"><a href="#cb102-182" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-183"><a href="#cb102-183" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(bit<span class="op">==</span><span class="dv">32</span>){</span>
<span id="cb102-184"><a href="#cb102-184" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="fu">md5_WordToHex</span>(a) <span class="op">+</span> <span class="fu">md5_WordToHex</span>(b) <span class="op">+</span> <span class="fu">md5_WordToHex</span>(c) <span class="op">+</span> <span class="fu">md5_WordToHex</span>(d))<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">;</span></span>
<span id="cb102-185"><a href="#cb102-185" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-186"><a href="#cb102-186" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="fu">md5_WordToHex</span>(b) <span class="op">+</span> <span class="fu">md5_WordToHex</span>(c))<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">;</span></span>
<span id="cb102-187"><a href="#cb102-187" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</body>
</html>
